[{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\about-us\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Check"},"fix":{"range":[159,170],"text":""},"desc":"Remove unused variable \"Check\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { \r\n  ArrowLeft, \r\n  Code, \r\n  Globe, \r\n  Instagram, \r\n  Info, \r\n  Check \r\n} from \"lucide-react\";\r\nimport { LucaLogo } from \"@/components/ui/Icons\"; // Asumsi file icon yang dibuat sebelumnya\r\n\r\n// --- DATA: TEAM MEMBERS ---\r\nconst TEAM_MEMBERS = [\r\n  { name: \"Beben Rafli Luhut Tua Sianipar\", role: \"Full Stack Developer, Scrum Master\" },\r\n  { name: \"Jeremy Emmanuel Susilo\", role: \"Full Stack Developer, DevOps Engineer\" },\r\n  { name: \"Made Abel Surya Mahotama\", role: \"Full Stack Developer, Backend Developer\" },\r\n  { name: \"Michael Kevin Pratama\", role: \"Full Stack Developer, UI/UX Designer\" },\r\n  { name: \"Steven Kukilo Seto\", role: \"Full Stack Developer, Product Owner\" },\r\n];\r\n\r\n// --- SUB-COMPONENTS ---\r\n\r\nconst SectionContainer = ({ title, children }: { title: string, children: React.ReactNode }) => (\r\n  <div className=\"w-full bg-white rounded-2xl p-6 mb-4 border border-gray-100 shadow-sm\">\r\n    <h2 className=\"text-lg font-bold text-ui-black mb-4 font-display\">{title}</h2>\r\n    {children}\r\n  </div>\r\n);\r\n\r\nconst MissionItem = ({ number, text }: { number: string, text: string }) => (\r\n  <div className=\"flex items-start gap-4 mb-4 last:mb-0\">\r\n    <div className=\"w-8 h-8 rounded-full bg-ui-accent-yellow flex items-center justify-center shrink-0\">\r\n      <span className=\"text-ui-black font-bold text-sm\">{number}</span>\r\n    </div>\r\n    <p className=\"text-sm text-ui-black leading-relaxed mt-1\">{text}</p>\r\n  </div>\r\n);\r\n\r\nconst ValueItem = ({ title, description }: { title: string, description: string }) => (\r\n  <div className=\"mb-4 last:mb-0\">\r\n    <h3 className=\"text-base font-bold text-ui-black mb-1\">{title}</h3>\r\n    <p className=\"text-sm text-ui-dark-grey leading-relaxed\">{description}</p>\r\n  </div>\r\n);\r\n\r\nconst TechItem = ({ tech, description }: { tech: string, description: string }) => (\r\n  <div className=\"flex items-start gap-3 mb-3 last:mb-0\">\r\n    <div className=\"w-2 h-2 rounded-full bg-ui-accent-yellow mt-1.5 shrink-0\" />\r\n    <div>\r\n        <h4 className=\"text-sm font-bold text-ui-black\">{tech}</h4>\r\n        <p className=\"text-xs text-ui-dark-grey\">{description}</p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst TeamMemberCard = ({ name, role }: { name: string, role: string }) => (\r\n  <div className=\"bg-white border border-gray-100 rounded-xl p-4 flex flex-col items-center text-center shadow-sm h-full hover:shadow-md transition-shadow\">\r\n    <div className=\"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mb-3 text-gray-400\">\r\n        <Info className=\"w-8 h-8\" />\r\n    </div>\r\n    <h3 className=\"text-sm font-bold text-ui-black mb-5 md:mb-0\">{name}</h3>\r\n    <p className=\"text-xs text-ui-dark-grey mb-5 h-8 flex items-center justify-center\">{role}</p>\r\n    \r\n    <div className=\"flex gap-2 mt-auto\">\r\n        <button className=\"p-2 rounded-full hover:bg-gray-100 transition-colors\">\r\n            <Code className=\"w-4 h-4 text-ui-black\" />\r\n        </button>\r\n        <button className=\"p-2 rounded-full hover:bg-gray-100 transition-colors\">\r\n            <Globe className=\"w-4 h-4 text-ui-black\" />\r\n        </button>\r\n        <button className=\"p-2 rounded-full hover:bg-gray-100 transition-colors\">\r\n            <Instagram className=\"w-4 h-4 text-ui-black\" />\r\n        </button>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// --- MAIN PAGE ---\r\n\r\nexport default function AboutUsPage() {\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full min-h-screen w-full bg-ui-background\">\r\n      \r\n      {/* HEADER TOP BAR */}\r\n      <div className=\"px-5 pt-6 pb-4 flex items-center gap-4 bg-white sticky top-0 z-30 border-b border-gray-50\">\r\n        <button \r\n            onClick={() => router.back()} \r\n            className=\"w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center hover:bg-gray-100 transition-colors\"\r\n        >\r\n             <ArrowLeft className=\"w-5 h-5 text-ui-black\" />\r\n        </button>\r\n        <h1 className=\"text-xl font-bold font-display text-ui-black\">About Us</h1>\r\n      </div>\r\n\r\n      {/* CONTENT SCROLLABLE */}\r\n      <div className=\"flex-1 overflow-y-auto no-scrollbar pb-10\">\r\n        <div className=\"p-5 flex flex-col gap-4\">\r\n\r\n            {/* 1. APP IDENTITY CARD */}\r\n            <div className=\"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm flex flex-col items-center text-center\">\r\n                <div className=\"w-20 h-20 rounded-full overflow-hidden mb-4\">\r\n                     <LucaLogo className=\"w-full h-full\" />\r\n                </div>\r\n                <h1 className=\"text-3xl font-bold font-display text-ui-black mb-2\">Luca</h1>\r\n                <p className=\"text-sm text-ui-dark-grey font-medium mb-2\">Split Expense Made Simple</p>\r\n                <span className=\"text-xs text-gray-400 bg-gray-50 px-3 py-1 rounded-full\">Version 1.0.0</span>\r\n            </div>\r\n\r\n            {/* 2. DESCRIPTION */}\r\n            <SectionContainer title=\"Tentang Luca\">\r\n                <p className=\"text-sm text-ui-black leading-relaxed text-justify mb-3\">\r\n                    Luca adalah aplikasi mobile yang dirancang untuk memudahkan Anda dalam membagi biaya bersama teman, keluarga, atau kelompok. Dengan fitur yang intuitif dan user-friendly, Luca membantu mengelola pengeluaran bersama dan melacak siapa yang berhutang kepada siapa.\r\n                </p>\r\n                <p className=\"text-sm text-ui-black leading-relaxed text-justify\">\r\n                    Luca dirancang untuk menghilangkan kebingungan dalam menghitung pembagian biaya dan memastikan semua orang mendapatkan perhitungan yang adil dan transparan.\r\n                </p>\r\n            </SectionContainer>\r\n\r\n            {/* 3. VISION */}\r\n            <SectionContainer title=\"Visi Kami\">\r\n                <p className=\"text-sm text-ui-black leading-relaxed text-justify\">\r\n                    Menjadi aplikasi pilihan utama dalam memudahkan pembagian biaya dengan cara yang fair, transparan, dan menyenangkan bagi semua pengguna.\r\n                </p>\r\n            </SectionContainer>\r\n\r\n            {/* 4. MISSION */}\r\n            <SectionContainer title=\"Misi Kami\">\r\n                <MissionItem number=\"1\" text=\"Menyediakan platform yang mudah digunakan untuk mengelola pengeluaran bersama\" />\r\n                <MissionItem number=\"2\" text=\"Memastikan perhitungan yang akurat dan transparan dalam pembagian biaya\" />\r\n                <MissionItem number=\"3\" text=\"Mengurangi konflik dan kebingungan terkait pembagian pengeluaran\" />\r\n                <MissionItem number=\"4\" text=\"Terus berinovasi untuk memberikan fitur terbaik kepada pengguna\" />\r\n            </SectionContainer>\r\n\r\n            {/* 5. VALUES */}\r\n            <SectionContainer title=\"Nilai Kami\">\r\n                <ValueItem title=\"Transparansi\" description=\"Semua transaksi dan perhitungan ditampilkan dengan jelas dan jujur\" />\r\n                <div className=\"h-4\" />\r\n                <ValueItem title=\"Kepercayaan\" description=\"Data pengguna dijaga dengan aman dan tidak dibagikan tanpa izin\" />\r\n                <div className=\"h-4\" />\r\n                <ValueItem title=\"Kemudahan\" description=\"Antarmuka yang intuitif sehingga siapa saja bisa menggunakannya dengan mudah\" />\r\n                <div className=\"h-4\" />\r\n                <ValueItem title=\"Inovasi\" description=\"Terus mengembangkan fitur baru berdasarkan masukan pengguna\" />\r\n            </SectionContainer>\r\n\r\n            {/* 6. TEAM MEMBERS */}\r\n            <SectionContainer title=\"Tim Pengembang\">\r\n                <div className=\"grid grid-cols-2 gap-3\">\r\n                    {TEAM_MEMBERS.map((member, idx) => {\r\n                        // Logic untuk membuat item terakhir (ke-5) full width atau centered\r\n                        // Di sini kita pakai flex/col-span logic kalau mau.\r\n                        // Tapi grid-cols-2 dengan item ganjil akan menyisakan 1 di kiri.\r\n                        // Agar mirip Android yang \"centered\" di baris terakhir, kita bisa pakai style khusus.\r\n                        const isLastAndOdd = idx === TEAM_MEMBERS.length - 1 && TEAM_MEMBERS.length % 2 !== 0;\r\n                        \r\n                        return (\r\n                            <div key={idx} className={isLastAndOdd ? \"col-span-2 max-w-[50%] mx-auto w-full\" : \"\"}>\r\n                                <TeamMemberCard name={member.name} role={member.role} />\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </SectionContainer>\r\n\r\n            {/* 7. TECH STACK */}\r\n            <SectionContainer title=\"Teknologi yang Digunakan\">\r\n                <TechItem tech=\"Kotlin\" description=\"Bahasa pemrograman untuk Android\" />\r\n                <TechItem tech=\"Jetpack Compose\" description=\"Framework UI modern untuk Android\" />\r\n                <TechItem tech=\"Firebase\" description=\"Backend dan database real-time\" />\r\n                <TechItem tech=\"Material Design 3\" description=\"Design system modern\" />\r\n            </SectionContainer>\r\n\r\n            {/* 8. COMMITMENT */}\r\n            <SectionContainer title=\"Komitmen Kami kepada Anda\">\r\n                <p className=\"text-sm text-ui-black leading-relaxed text-justify mb-3\">\r\n                    Kami berkomitmen untuk terus memberikan pengalaman terbaik kepada setiap pengguna Luca. Kami selalu terbuka terhadap masukan, saran, dan kritik constructive untuk terus meningkatkan kualitas aplikasi.\r\n                </p>\r\n                <p className=\"text-sm text-ui-black leading-relaxed text-justify\">\r\n                    Pengembangan Luca adalah proses berkelanjutan yang melibatkan feedback dari komunitas pengguna. Terima kasih telah menjadi bagian dari perjalanan Luca!\r\n                </p>\r\n            </SectionContainer>\r\n\r\n            {/* 9. FOOTER */}\r\n            <div className=\"py-6 px-6 text-center\">\r\n                <div className=\"h-px w-full bg-gray-200 mb-6\" />\r\n                <p className=\"text-xs text-ui-dark-grey mb-2\">┬⌐ 2026 Luca. All rights reserved.</p>\r\n                <p className=\"text-xs font-bold text-ui-accent-yellow\">Made with Γ¥ñ∩╕Å by Luca Team</p>\r\n            </div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\account\\settings\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1388,1391],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1388,1391],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":70,"column":15,"nodeType":"JSXOpeningElement","endLine":70,"endColumn":97},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2810,2813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2810,2813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3813,3816],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3813,3816],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\nD:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\account\\settings\\page.tsx:136:14\n  134 |\n  135 |         <div className=\"flex flex-col gap-4\">\n> 136 |             <InputField label=\"Current Password\" value={oldPass} onChange={setOldPass} show={showPass.old} onToggle={() => toggleShow('old')} />\n      |              ^^^^^^^^^^ This component is created during render\n  137 |             <InputField label=\"New Password\" value={newPass} onChange={setNewPass} show={showPass.new} onToggle={() => toggleShow('new')} />\n  138 |             <InputField label=\"Confirm Password\" value={confirmPass} onChange={setConfirmPass} show={showPass.confirm} onToggle={() => toggleShow('confirm')} />\n  139 |             \n\nD:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\account\\settings\\page.tsx:111:22\n  109 |   };\n  110 |\n> 111 |   const InputField = ({ label, value, onChange, show, onToggle }: any) => (\n      |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 112 |       <div className=\"relative\">\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 113 |         <label className=\"text-xs font-bold text-gray-400 ml-1 mb-1 block\">{label}</label>\n      ΓÇª\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 123 |       </div>\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 124 |   );\n      | ^^^^ The component is created during render here\n  125 |\n  126 |   return (\n  127 |     <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in\">","line":136,"column":14,"nodeType":null,"endLine":136,"endColumn":24},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\nD:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\account\\settings\\page.tsx:137:14\n  135 |         <div className=\"flex flex-col gap-4\">\n  136 |             <InputField label=\"Current Password\" value={oldPass} onChange={setOldPass} show={showPass.old} onToggle={() => toggleShow('old')} />\n> 137 |             <InputField label=\"New Password\" value={newPass} onChange={setNewPass} show={showPass.new} onToggle={() => toggleShow('new')} />\n      |              ^^^^^^^^^^ This component is created during render\n  138 |             <InputField label=\"Confirm Password\" value={confirmPass} onChange={setConfirmPass} show={showPass.confirm} onToggle={() => toggleShow('confirm')} />\n  139 |             \n  140 |             {error && (\n\nD:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\account\\settings\\page.tsx:111:22\n  109 |   };\n  110 |\n> 111 |   const InputField = ({ label, value, onChange, show, onToggle }: any) => (\n      |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 112 |       <div className=\"relative\">\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 113 |         <label className=\"text-xs font-bold text-gray-400 ml-1 mb-1 block\">{label}</label>\n      ΓÇª\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 123 |       </div>\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 124 |   );\n      | ^^^^ The component is created during render here\n  125 |\n  126 |   return (\n  127 |     <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in\">","line":137,"column":14,"nodeType":null,"endLine":137,"endColumn":24},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\nD:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\account\\settings\\page.tsx:138:14\n  136 |             <InputField label=\"Current Password\" value={oldPass} onChange={setOldPass} show={showPass.old} onToggle={() => toggleShow('old')} />\n  137 |             <InputField label=\"New Password\" value={newPass} onChange={setNewPass} show={showPass.new} onToggle={() => toggleShow('new')} />\n> 138 |             <InputField label=\"Confirm Password\" value={confirmPass} onChange={setConfirmPass} show={showPass.confirm} onToggle={() => toggleShow('confirm')} />\n      |              ^^^^^^^^^^ This component is created during render\n  139 |             \n  140 |             {error && (\n  141 |                 <div className=\"flex items-center gap-2 text-red-500 bg-red-50 p-3 rounded-xl\">\n\nD:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\account\\settings\\page.tsx:111:22\n  109 |   };\n  110 |\n> 111 |   const InputField = ({ label, value, onChange, show, onToggle }: any) => (\n      |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 112 |       <div className=\"relative\">\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 113 |         <label className=\"text-xs font-bold text-gray-400 ml-1 mb-1 block\">{label}</label>\n      ΓÇª\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 123 |       </div>\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 124 |   );\n      | ^^^^ The component is created during render here\n  125 |\n  126 |   return (\n  127 |     <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in\">","line":138,"column":14,"nodeType":null,"endLine":138,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":162,"column":110,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":113,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6577,6580],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6577,6580],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":298,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":298,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11792,11795],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11792,11795],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":340,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":340,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13305,13308],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13305,13308],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":355,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":355,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13749,13752],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13749,13752],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":426,"column":26,"nodeType":"JSXOpeningElement","endLine":430,"endColumn":28}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { \r\n  ArrowLeft, \r\n  Edit2, \r\n  LogOut, \r\n  Trash2, \r\n  Check, \r\n  X, \r\n  Eye, \r\n  EyeOff, \r\n  Camera,\r\n  Loader2,\r\n  User,\r\n  Shield,\r\n  AlertTriangle,\r\n  Mail\r\n} from \"lucide-react\";\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport { \r\n  getUserProfile, \r\n  updateUserProfile, \r\n  changePassword, \r\n  deleteAccount, \r\n  logout \r\n} from \"@/lib/firebase-auth\";\r\nimport { getEventsWithActivities, updateEvent } from \"@/lib/firestore\";\r\n\r\n// --- HELPER: GET AVATAR URL ---\r\nconst getAvatarUrl = (avatarName: string) => {\r\n  if (avatarName?.startsWith(\"http\")) return avatarName;\r\n  return `https://api.dicebear.com/7.x/avataaars/svg?seed=${avatarName || \"user\"}`;\r\n};\r\n\r\n// --- COMPONENT: SETTINGS GROUP CONTAINER (Agar Senada) ---\r\nconst SettingsGroupContainer = ({ title, children }: { title: string, children: React.ReactNode }) => (\r\n  <div className=\"w-full bg-white rounded-2xl p-2 mb-4 shadow-sm border border-gray-100\">\r\n    <h3 className=\"px-4 pt-3 pb-1 text-sm font-bold text-ui-accent-yellow uppercase tracking-wider\">\r\n        {title}\r\n    </h3>\r\n    <div className=\"flex flex-col p-2 gap-2\">\r\n        {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// --- COMPONENT: AVATAR SELECTION MODAL ---\r\nconst AvatarSelectionModal = ({ isOpen, onClose, onSelect }: any) => {\r\n  if (!isOpen) return null;\r\n  \r\n  // Dummy list avatar options (Simulasi Seed Dicebear)\r\n  const avatarOptions = [\"Felix\", \"Aneka\", \"Zoe\", \"Jack\", \"Molly\", \"Buster\", \"Bubba\", \"Sassy\", \"Bandit\"];\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in\">\r\n      <div className=\"bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl animate-in zoom-in-95\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h3 className=\"font-bold text-lg text-ui-black\">Choose Avatar</h3>\r\n          <button onClick={onClose} className=\"p-1 hover:bg-gray-100 rounded-full\"><X className=\"w-5 h-5 text-gray-400\" /></button>\r\n        </div>\r\n        <div className=\"grid grid-cols-3 gap-4\">\r\n          {avatarOptions.map((seed, idx) => (\r\n            <button \r\n              key={idx}\r\n              onClick={() => onSelect(seed)}\r\n              className=\"aspect-square rounded-full overflow-hidden bg-gray-50 border-2 border-transparent hover:border-ui-accent-yellow hover:scale-105 transition-all shadow-sm\"\r\n            >\r\n              <img src={getAvatarUrl(seed)} className=\"w-full h-full object-cover\" alt={seed} />\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- COMPONENT: CHANGE PASSWORD MODAL ---\r\nconst ChangePasswordModal = ({ isOpen, onClose, onConfirm }: any) => {\r\n  const [oldPass, setOldPass] = useState(\"\");\r\n  const [newPass, setNewPass] = useState(\"\");\r\n  const [confirmPass, setConfirmPass] = useState(\"\");\r\n  const [showPass, setShowPass] = useState({ old: false, new: false, confirm: false });\r\n  const [error, setError] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const handleSubmit = () => {\r\n    if (!oldPass || !newPass || !confirmPass) {\r\n      setError(\"All fields are required\");\r\n      return;\r\n    }\r\n    if (newPass !== confirmPass) {\r\n      setError(\"New passwords do not match\");\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    // Simulate delay inside modal\r\n    setTimeout(() => {\r\n        setIsLoading(false);\r\n        onConfirm(oldPass, newPass);\r\n    }, 1000);\r\n  };\r\n\r\n  const toggleShow = (field: 'old'|'new'|'confirm') => {\r\n    setShowPass(prev => ({ ...prev, [field]: !prev[field] }));\r\n  };\r\n\r\n  const InputField = ({ label, value, onChange, show, onToggle }: any) => (\r\n      <div className=\"relative\">\r\n        <label className=\"text-xs font-bold text-gray-400 ml-1 mb-1 block\">{label}</label>\r\n        <input \r\n            type={show ? \"text\" : \"password\"}\r\n            value={value}\r\n            onChange={(e) => { onChange(e.target.value); setError(\"\"); }}\r\n            className=\"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 text-sm font-medium outline-none focus:border-ui-accent-yellow focus:ring-1 focus:ring-ui-accent-yellow transition-all\"\r\n        />\r\n        <button onClick={onToggle} className=\"absolute right-3 top-8 text-gray-400 hover:text-gray-600\">\r\n            {show ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\r\n        </button>\r\n      </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in\">\r\n      <div className=\"bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl animate-in zoom-in-95\">\r\n        <div className=\"flex justify-between items-center mb-2\">\r\n             <h3 className=\"font-bold text-xl text-ui-black\">Change Password</h3>\r\n             <button onClick={onClose}><X className=\"w-5 h-5 text-gray-400\" /></button>\r\n        </div>\r\n        <p className=\"text-sm text-gray-500 mb-6\">Enter your current and new password.</p>\r\n\r\n        <div className=\"flex flex-col gap-4\">\r\n            <InputField label=\"Current Password\" value={oldPass} onChange={setOldPass} show={showPass.old} onToggle={() => toggleShow('old')} />\r\n            <InputField label=\"New Password\" value={newPass} onChange={setNewPass} show={showPass.new} onToggle={() => toggleShow('new')} />\r\n            <InputField label=\"Confirm Password\" value={confirmPass} onChange={setConfirmPass} show={showPass.confirm} onToggle={() => toggleShow('confirm')} />\r\n            \r\n            {error && (\r\n                <div className=\"flex items-center gap-2 text-red-500 bg-red-50 p-3 rounded-xl\">\r\n                    <AlertTriangle className=\"w-4 h-4\" />\r\n                    <p className=\"text-xs font-bold\">{error}</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n\r\n        <button \r\n            onClick={handleSubmit} \r\n            disabled={isLoading}\r\n            className=\"w-full mt-6 py-3 bg-ui-accent-yellow rounded-xl font-bold text-sm text-ui-black shadow-lg shadow-ui-accent-yellow/20 flex items-center justify-center gap-2 disabled:opacity-70\"\r\n        >\r\n            {isLoading && <Loader2 className=\"w-4 h-4 animate-spin\" />}\r\n            Update Password\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- COMPONENT: CONFIRMATION MODAL ---\r\nconst ConfirmModal = ({ isOpen, title, message, onConfirm, onClose, isDanger = false, confirmText = \"Yes\" }: any) => {\r\n  if (!isOpen) return null;\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in\">\r\n      <div className=\"bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl text-center animate-in zoom-in-95\">\r\n        <div className={`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${\r\n            isDanger ? \"bg-red-50 text-red-500\" : \"bg-ui-accent-yellow/20 text-ui-black\"\r\n        }`}>\r\n            {isDanger ? <Trash2 className=\"w-8 h-8\" /> : <LogOut className=\"w-8 h-8\" />}\r\n        </div>\r\n        \r\n        <h3 className=\"font-bold text-xl mb-2 text-ui-black\">{title}</h3>\r\n        <p className=\"text-sm text-gray-500 mb-6 leading-relaxed px-4\">{message}</p>\r\n        \r\n        <div className=\"flex gap-3\">\r\n            <button onClick={onClose} className=\"flex-1 py-3 bg-gray-100 hover:bg-gray-200 rounded-full font-bold text-sm text-gray-600 transition-colors\">Cancel</button>\r\n            <button \r\n                onClick={onConfirm} \r\n                className={`flex-1 py-3 rounded-full font-bold text-sm text-white shadow-lg transition-all ${\r\n                    isDanger \r\n                    ? 'bg-red-500 hover:bg-red-600 shadow-red-500/30' \r\n                    : 'bg-ui-black hover:bg-gray-800 shadow-black/30'\r\n                }`}\r\n            >\r\n                {confirmText}\r\n            </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- MAIN PAGE ---\r\nexport default function AccountSettingsPage() {\r\n  const router = useRouter();\r\n  const { user: authUser, loading: authLoading } = useAuth();\r\n\r\n  // State User Data from Firestore\r\n  const [userProfile, setUserProfile] = useState<{\r\n    username: string;\r\n    avatar: string;\r\n    email: string;\r\n    docId?: string;\r\n  } | null>(null);\r\n  const [profileLoading, setProfileLoading] = useState(true);\r\n\r\n  // UI States\r\n  const [isEditingUsername, setIsEditingUsername] = useState(false);\r\n  const [newUsername, setNewUsername] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [toastMessage, setToastMessage] = useState<string | null>(null);\r\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\r\n\r\n  // Fetch user profile from Firestore\r\n  useEffect(() => {\r\n    const fetchUserProfile = async () => {\r\n      if (!authUser) {\r\n        setProfileLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const profile = await getUserProfile(authUser.uid);\r\n        if (profile) {\r\n          setUserProfile({\r\n            username: profile.username || authUser.displayName || authUser.email?.split(\"@\")[0] || \"User\",\r\n            avatar: profile.avatarName || \"avatar_1\",\r\n            email: profile.email || authUser.email || \"\",\r\n            docId: profile.id,\r\n          });\r\n          setNewUsername(profile.username || authUser.displayName || authUser.email?.split(\"@\")[0] || \"User\");\r\n        } else {\r\n          // Use auth user data as fallback\r\n          setUserProfile({\r\n            username: authUser.displayName || authUser.email?.split(\"@\")[0] || \"User\",\r\n            avatar: \"avatar_1\",\r\n            email: authUser.email || \"\",\r\n          });\r\n          setNewUsername(authUser.displayName || authUser.email?.split(\"@\")[0] || \"User\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching user profile:\", error);\r\n        setErrorMessage(\"Failed to load profile\");\r\n      } finally {\r\n        setProfileLoading(false);\r\n      }\r\n    };\r\n\r\n    if (!authLoading) {\r\n      fetchUserProfile();\r\n    }\r\n  }, [authUser, authLoading]);\r\n\r\n  // Redirect if not logged in\r\n  useEffect(() => {\r\n    if (!authLoading && !authUser) {\r\n      router.push(\"/auth/login\");\r\n    }\r\n  }, [authUser, authLoading, router]);\r\n\r\n  // Modal States\r\n  const [showAvatarModal, setShowAvatarModal] = useState(false);\r\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [showLogoutModal, setShowLogoutModal] = useState(false);\r\n\r\n  // Toast Timer\r\n  useEffect(() => {\r\n    if (toastMessage) {\r\n      const timer = setTimeout(() => setToastMessage(null), 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [toastMessage]);\r\n\r\n  // Error Timer\r\n  useEffect(() => {\r\n    if (errorMessage) {\r\n      const timer = setTimeout(() => setErrorMessage(null), 4000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [errorMessage]);\r\n\r\n  // Handlers\r\n  const handleUpdateAvatar = async (avatarName: string) => {\r\n    if (!authUser) return;\r\n    setShowAvatarModal(false);\r\n    setIsLoading(true);\r\n    try {\r\n      await updateUserProfile(authUser.uid, { avatarName });\r\n      setUserProfile(prev => prev ? { ...prev, avatar: avatarName } : null);\r\n      // --- AUTO UPDATE ALL EVENTS PARTICIPANT AVATAR ---\r\n      // 1. Fetch all events for this user\r\n      const events = await getEventsWithActivities(authUser.uid);\r\n      // 2. For each event, update the participant entry for the user\r\n      await Promise.all(events.map(async (event) => {\r\n        if (!event.participants) return;\r\n        const updatedParticipants = event.participants.map((p: any) => {\r\n          if (\r\n            (p.userId && p.userId === authUser.uid) ||\r\n            (!p.userId && (p.name === authUser.displayName || p.name === authUser.email || p.name === userProfile?.username))\r\n          ) {\r\n            return { ...p, avatarName };\r\n          }\r\n          return p;\r\n        });\r\n        await updateEvent(authUser.uid, event.id, { participants: updatedParticipants });\r\n      }));\r\n      setToastMessage(\"Profile picture updated\");\r\n    } catch (error) {\r\n      console.error(\"Error updating avatar:\", error);\r\n      setErrorMessage(\"Failed to update profile picture\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdateUsername = async () => {\r\n    if (!newUsername.trim() || !authUser) return;\r\n    setIsLoading(true);\r\n    try {\r\n      await updateUserProfile(authUser.uid, { username: newUsername.trim() });\r\n      setUserProfile(prev => prev ? { ...prev, username: newUsername.trim() } : null);\r\n      setIsEditingUsername(false);\r\n      setToastMessage(\"Username updated successfully\");\r\n    } catch (error) {\r\n      console.error(\"Error updating username:\", error);\r\n      setErrorMessage(\"Failed to update username\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdatePassword = async (oldP: string, newP: string) => {\r\n    setShowPasswordModal(false);\r\n    setIsLoading(true);\r\n    try {\r\n      await changePassword(oldP, newP);\r\n      setToastMessage(\"Password updated successfully\");\r\n    } catch (error: any) {\r\n      console.error(\"Error updating password:\", error);\r\n      setErrorMessage(error.message || \"Failed to update password\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteAccount = async () => {\r\n    setShowDeleteModal(false);\r\n    setIsLoading(true);\r\n    try {\r\n      await deleteAccount();\r\n      document.cookie = \"luca_session=; path=/; max-age=0\";\r\n      router.push(\"/\");\r\n    } catch (error: any) {\r\n      console.error(\"Error deleting account:\", error);\r\n      setErrorMessage(error.message || \"Failed to delete account\");\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    setShowLogoutModal(false);\r\n    try {\r\n      await logout();\r\n      document.cookie = \"luca_session=; path=/; max-age=0\";\r\n      router.push(\"/\");\r\n    } catch (error) {\r\n      console.error(\"Error logging out:\", error);\r\n      setErrorMessage(\"Failed to log out\");\r\n    }\r\n  };\r\n\r\n  // Show loading state\r\n  if (authLoading || profileLoading) {\r\n    return (\r\n      <div className=\"flex flex-col h-full min-h-screen w-full bg-ui-background items-center justify-center\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin text-ui-accent-yellow\" />\r\n        <p className=\"mt-4 text-sm font-medium text-gray-500\">Loading profile...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!userProfile) {\r\n    return (\r\n      <div className=\"flex flex-col h-full min-h-screen w-full bg-ui-background items-center justify-center\">\r\n        <AlertTriangle className=\"w-8 h-8 text-red-500\" />\r\n        <p className=\"mt-4 text-sm font-medium text-gray-500\">Failed to load profile</p>\r\n        <button \r\n          onClick={() => router.push(\"/home\")}\r\n          className=\"mt-4 px-6 py-2 bg-ui-accent-yellow rounded-xl font-bold text-sm\"\r\n        >\r\n          Go Home\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Check if user signed in with Google\r\n  const isGoogleUser = authUser?.providerData?.some(\r\n    (provider) => provider.providerId === \"google.com\"\r\n  ) ?? false;\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full min-h-screen w-full bg-ui-background relative\">\r\n      \r\n      {/* HEADER */}\r\n      <div className=\"px-5 pt-6 pb-4 flex items-center gap-4 bg-white sticky top-0 z-30 border-b border-gray-50\">\r\n        <button \r\n            onClick={() => router.back()} \r\n            className=\"w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center hover:bg-gray-100 transition-colors\"\r\n        >\r\n             <ArrowLeft className=\"w-5 h-5 text-ui-black\" />\r\n        </button>\r\n        <h1 className=\"text-xl font-bold font-display text-ui-black\">Account Settings</h1>\r\n      </div>\r\n\r\n      {/* CONTENT SCROLLABLE */}\r\n      <div className=\"flex-1 overflow-y-auto no-scrollbar pb-10\">\r\n        <div className=\"p-5 flex flex-col gap-2\">\r\n        \r\n            {/* 1. PROFILE PICTURE CARD */}\r\n            <div className=\"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm flex flex-col items-center justify-center mb-4\">\r\n                <div className=\"relative group cursor-pointer\" onClick={() => setShowAvatarModal(true)}>\r\n                    <div className=\"w-28 h-28 rounded-full bg-gray-50 p-1 overflow-hidden shadow-inner\">\r\n                         <img \r\n                            src={getAvatarUrl(userProfile.avatar)} \r\n                            className=\"w-full h-full object-cover rounded-full\" \r\n                            alt=\"Profile\"\r\n                         />\r\n                    </div>\r\n                    {/* Edit Badge */}\r\n                    <div className=\"absolute bottom-0 right-0 bg-ui-accent-yellow text-ui-black p-2 rounded-full border-4 border-white shadow-sm group-hover:scale-110 transition-transform\">\r\n                        <Camera className=\"w-4 h-4\" />\r\n                    </div>\r\n                </div>\r\n                <p className=\"mt-4 text-xs font-bold text-gray-400 uppercase tracking-wide\">Tap to change avatar</p>\r\n            </div>\r\n\r\n            {/* 2. PERSONAL INFO GROUP */}\r\n            <SettingsGroupContainer title=\"Personal Information\">\r\n                <div className=\"mb-2\">\r\n                    <label className=\"text-xs font-bold text-gray-400 ml-1 mb-1 block\">Username</label>\r\n                    \r\n                    {!isEditingUsername ? (\r\n                        // Display Mode\r\n                        <div \r\n                            onClick={() => setIsEditingUsername(true)}\r\n                            className=\"w-full flex justify-between items-center bg-gray-50 border border-gray-200 p-4 rounded-xl cursor-pointer hover:border-ui-accent-yellow hover:bg-white transition-all group\"\r\n                        >\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <User className=\"w-4 h-4 text-gray-400\" />\r\n                                <span className=\"font-bold text-sm text-ui-black\">{userProfile.username}</span>\r\n                            </div>\r\n                            <Edit2 className=\"w-4 h-4 text-gray-300 group-hover:text-ui-black transition-colors\" />\r\n                        </div>\r\n                    ) : (\r\n                        // Edit Mode\r\n                        <div className=\"flex flex-col gap-3 animate-in fade-in slide-in-from-top-1\">\r\n                            <input \r\n                                value={newUsername}\r\n                                onChange={(e) => setNewUsername(e.target.value)}\r\n                                className=\"w-full bg-white border border-ui-accent-yellow rounded-xl px-4 py-3 text-sm font-bold text-ui-black outline-none shadow-sm focus:ring-4 focus:ring-ui-accent-yellow/10 transition-all\"\r\n                                autoFocus\r\n                            />\r\n                            <div className=\"flex gap-2\">\r\n                                <button \r\n                                    onClick={() => { setIsEditingUsername(false); setNewUsername(userProfile.username); }}\r\n                                    className=\"flex-1 py-2.5 bg-gray-100 rounded-xl font-bold text-xs text-gray-500 hover:bg-gray-200 transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button \r\n                                    onClick={handleUpdateUsername}\r\n                                    disabled={isLoading}\r\n                                    className=\"flex-1 py-2.5 bg-ui-accent-yellow rounded-xl font-bold text-xs text-ui-black shadow-sm hover:brightness-105 transition-all flex items-center justify-center gap-2\"\r\n                                >\r\n                                    {isLoading && <Loader2 className=\"w-3 h-3 animate-spin\"/>}\r\n                                    Save Changes\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Email Display (Read-only) */}\r\n                <div className=\"mb-2\">\r\n                    <label className=\"text-xs font-bold text-gray-400 ml-1 mb-1 block\">Email</label>\r\n                    <div className=\"w-full flex items-center bg-gray-50 border border-gray-200 p-4 rounded-xl\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <Mail className=\"w-4 h-4 text-gray-400\" />\r\n                            <span className=\"font-medium text-sm text-gray-500\">{userProfile.email}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </SettingsGroupContainer>\r\n\r\n            {/* 3. SECURITY GROUP */}\r\n            <SettingsGroupContainer title=\"Security\">\r\n                <div className=\"mb-2\">\r\n                    <label className=\"text-xs font-bold text-gray-400 ml-1 mb-1 block\">Password</label>\r\n                    {isGoogleUser ? (\r\n                        <div className=\"w-full flex items-center bg-gray-50 border border-gray-200 p-4 rounded-xl opacity-60\">\r\n                            <div className=\"flex items-center gap-3 flex-1\">\r\n                                <Shield className=\"w-4 h-4 text-gray-400\" />\r\n                                <div>\r\n                                    <span className=\"font-bold text-sm text-gray-400 block\">Signed in with Google</span>\r\n                                    <span className=\"text-xs text-gray-400\">Password change is not available for Google accounts</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div \r\n                            onClick={() => setShowPasswordModal(true)}\r\n                            className=\"w-full flex justify-between items-center bg-gray-50 border border-gray-200 p-4 rounded-xl cursor-pointer hover:border-ui-accent-yellow hover:bg-white transition-all group\"\r\n                        >\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <Shield className=\"w-4 h-4 text-gray-400\" />\r\n                                <span className=\"font-bold text-sm text-ui-black tracking-widest\">ΓÇóΓÇóΓÇóΓÇóΓÇóΓÇóΓÇóΓÇó</span>\r\n                            </div>\r\n                            <Edit2 className=\"w-4 h-4 text-gray-300 group-hover:text-ui-black transition-colors\" />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </SettingsGroupContainer>\r\n\r\n            {/* 4. DANGER ZONE GROUP */}\r\n            <div className=\"w-full bg-white rounded-2xl p-4 mb-4 shadow-sm border border-gray-100 mt-2\">\r\n                <h3 className=\"text-sm font-bold text-red-500 uppercase tracking-wider mb-3 px-2\">Danger Zone</h3>\r\n                <div className=\"flex flex-col gap-3\">\r\n                    <button \r\n                        onClick={() => setShowLogoutModal(true)}\r\n                        className=\"w-full py-4 rounded-xl bg-gray-50 text-ui-black font-bold text-sm flex items-center justify-center gap-2 hover:bg-gray-100 transition-colors border border-gray-100\"\r\n                    >\r\n                        <LogOut className=\"w-4 h-4\" />\r\n                        Log Out\r\n                    </button>\r\n                    \r\n                    <button \r\n                        onClick={() => setShowDeleteModal(true)}\r\n                        className=\"w-full py-4 rounded-xl bg-red-50 text-red-500 font-bold text-sm flex items-center justify-center gap-2 hover:bg-red-100 transition-colors border border-red-100\"\r\n                    >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                        Delete Account\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      {/* SUCCESS TOAST */}\r\n      {toastMessage && (\r\n        <div className=\"fixed bottom-8 left-1/2 -translate-x-1/2 bg-ui-black text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 animate-in slide-in-from-bottom-5 fade-in duration-300 z-50\">\r\n            <div className=\"bg-green-500 rounded-full p-0.5\"><Check className=\"w-3 h-3 text-white\" strokeWidth={4} /></div>\r\n            <span className=\"font-bold text-sm\">{toastMessage}</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* ERROR TOAST */}\r\n      {errorMessage && (\r\n        <div className=\"fixed bottom-8 left-1/2 -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 animate-in slide-in-from-bottom-5 fade-in duration-300 z-50\">\r\n            <AlertTriangle className=\"w-4 h-4\" />\r\n            <span className=\"font-bold text-sm\">{errorMessage}</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* --- MODALS --- */}\r\n      <AvatarSelectionModal \r\n        isOpen={showAvatarModal} \r\n        onClose={() => setShowAvatarModal(false)} \r\n        onSelect={handleUpdateAvatar} \r\n      />\r\n\r\n      <ChangePasswordModal \r\n        isOpen={showPasswordModal}\r\n        onClose={() => setShowPasswordModal(false)}\r\n        onConfirm={handleUpdatePassword}\r\n      />\r\n\r\n      <ConfirmModal \r\n        isOpen={showLogoutModal}\r\n        title=\"Log Out?\"\r\n        message=\"Are you sure you want to log out from this device?\"\r\n        onClose={() => setShowLogoutModal(false)}\r\n        onConfirm={handleLogout}\r\n        confirmText=\"Yes, Log Out\"\r\n      />\r\n\r\n      <ConfirmModal \r\n        isOpen={showDeleteModal}\r\n        title=\"Delete Account?\"\r\n        message=\"This action cannot be undone. All your data will be permanently deleted.\"\r\n        onClose={() => setShowDeleteModal(false)}\r\n        onConfirm={handleDeleteAccount}\r\n        isDanger={true}\r\n        confirmText=\"Delete Forever\"\r\n      />\r\n\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\action.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\auth\\fill-profile\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":59,"column":33,"nodeType":"JSXOpeningElement","endLine":63,"endColumn":35},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":144,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5486,5535],"text":"\r\n                What&apos;s your name?\r\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5486,5535],"text":"\r\n                What&lsquo;s your name?\r\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5486,5535],"text":"\r\n                What&#39;s your name?\r\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5486,5535],"text":"\r\n                What&rsquo;s your name?\r\n            "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":158,"column":21,"nodeType":"JSXOpeningElement","endLine":162,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { \r\n  ArrowLeft, \r\n  User, \r\n  Camera, \r\n  X, \r\n  Loader2, \r\n  Check \r\n} from \"lucide-react\";\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport { queryDocuments, updateDocument } from \"@/lib/firebase-db\";\r\nimport { where } from \"firebase/firestore\";\r\n\r\n// --- HELPER: AVATAR URL GENERATOR ---\r\n// Menggunakan Dicebear untuk generate avatar berdasarkan string\r\nconst getAvatarUrl = (seed: string) => {\r\n  return `https://api.dicebear.com/7.x/avataaars/svg?seed=${seed}`;\r\n};\r\n\r\n// --- COMPONENT: AVATAR SELECTION MODAL ---\r\ninterface AvatarModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    currentSelection: string;\r\n    onSelect: (avatarName: string) => void;\r\n}\r\n\r\nconst AvatarSelectionModal = ({ isOpen, onClose, currentSelection, onSelect }: AvatarModalProps) => {\r\n    if (!isOpen) return null;\r\n\r\n    // List opsi avatar (bisa ditambah)\r\n    const avatarOptions = [\"Felix\", \"Aneka\", \"Zoe\", \"Jack\", \"Molly\", \"Buster\"];\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in\">\r\n            <div className=\"bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl relative animate-in zoom-in-95\">\r\n                \r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                    <h3 className=\"font-bold text-lg text-ui-black\">Choose Avatar</h3>\r\n                    <button onClick={onClose} className=\"p-1 hover:bg-gray-100 rounded-full\">\r\n                        <X className=\"w-5 h-5 text-gray-400\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-3 gap-4\">\r\n                    {avatarOptions.map((seed, idx) => {\r\n                        const isSelected = currentSelection === seed;\r\n                        return (\r\n                            <button \r\n                                key={idx}\r\n                                onClick={() => { onSelect(seed); onClose(); }}\r\n                                className={`relative aspect-square rounded-full overflow-hidden bg-gray-100 transition-all ${\r\n                                    isSelected ? \"ring-4 ring-ui-accent-yellow\" : \"hover:ring-2 hover:ring-gray-300\"\r\n                                }`}\r\n                            >\r\n                                <img \r\n                                    src={getAvatarUrl(seed)} \r\n                                    alt={seed} \r\n                                    className=\"w-full h-full object-cover\" \r\n                                />\r\n                                {isSelected && (\r\n                                    <div className=\"absolute inset-0 bg-black/20 flex items-center justify-center\">\r\n                                        <div className=\"bg-ui-accent-yellow rounded-full p-1\">\r\n                                            <Check className=\"w-4 h-4 text-ui-black\" strokeWidth={3} />\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </button>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- MAIN PAGE ---\r\nexport default function FillProfilePage() {\r\n  const router = useRouter();\r\n  const { user } = useAuth();\r\n\r\n  // State\r\n  const [username, setUsername] = useState(\"\");\r\n  const [selectedAvatar, setSelectedAvatar] = useState(\"avatar_1\");\r\n  const [showAvatarModal, setShowAvatarModal] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // Handle Create Account\r\n  const handleCreateAccount = async () => {\r\n    if (!username.trim()) {\r\n        alert(\"Username wajib diisi!\");\r\n        return;\r\n    }\r\n    if (!user) {\r\n        alert(\"No authenticated user found. Please sign in again.\");\r\n        router.replace(\"/auth/signup\");\r\n        return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n\r\n    try {\r\n        // Find the user document by uid\r\n        const userDocs = await queryDocuments(\"users\", [where(\"uid\", \"==\", user.uid)]);\r\n        \r\n        if (userDocs.length > 0) {\r\n          // Update existing doc with username & avatar from this form\r\n          await updateDocument(\"users\", userDocs[0].id, {\r\n            username: username.trim(),\r\n            avatarName: selectedAvatar || \"avatar_1\",\r\n          });\r\n        }\r\n\r\n        // Pastikan cookie session aman\r\n        document.cookie = \"luca_session=true; path=/; max-age=604800\";\r\n        \r\n        // Redirect ke Home\r\n        router.push(\"/home\");\r\n\r\n    } catch (error) {\r\n        console.error(\"Error creating profile\", error);\r\n        setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full min-h-screen w-full bg-white px-8 py-6 max-w-md mx-auto relative\">\r\n      \r\n      {/* 1. BACK BUTTON */}\r\n      <div className=\"mb-4\">\r\n        <button onClick={() => router.back()} className=\"p-2 -ml-2 rounded-full hover:bg-gray-100 transition-colors\">\r\n            <ArrowLeft className=\"w-7 h-7 text-ui-black\" />\r\n        </button>\r\n      </div>\r\n\r\n      {/* 2. SCROLLABLE CONTENT */}\r\n      <div className=\"flex-1 flex flex-col items-center overflow-y-auto no-scrollbar\">\r\n        \r\n        <div className=\"mt-8 text-center mb-10\">\r\n            <h1 className=\"text-3xl font-bold font-display text-ui-black mb-2\">\r\n                What's your name?\r\n            </h1>\r\n            <p className=\"text-sm font-medium text-ui-dark-grey\">\r\n                We want to know you more!\r\n            </p>\r\n        </div>\r\n\r\n        {/* AVATAR SELECTION AREA */}\r\n        <div className=\"flex flex-col items-center gap-4 mb-10\">\r\n            <button \r\n                onClick={() => setShowAvatarModal(true)}\r\n                className=\"w-36 h-36 rounded-full bg-ui-grey overflow-hidden relative group transition-all hover:brightness-95 active:scale-95 shadow-sm\"\r\n            >\r\n                {selectedAvatar ? (\r\n                    <img \r\n                        src={getAvatarUrl(selectedAvatar)} \r\n                        alt=\"Avatar\" \r\n                        className=\"w-full h-full object-cover\"\r\n                    />\r\n                ) : (\r\n                    <div className=\"w-full h-full flex items-center justify-center\">\r\n                        <Camera className=\"w-8 h-8 text-ui-dark-grey\" />\r\n                    </div>\r\n                )}\r\n                \r\n                {/* Overlay Hint on Hover (Desktop) / Always hidden on mobile visually but interactive */}\r\n            </button>\r\n            \r\n            <button \r\n                onClick={() => setShowAvatarModal(true)}\r\n                className=\"text-xs font-bold text-ui-accent-yellow uppercase tracking-wide hover:underline\"\r\n            >\r\n                Tap to change avatar\r\n            </button>\r\n        </div>\r\n\r\n        {/* USERNAME INPUT */}\r\n        <div className=\"w-full h-12.5 bg-ui-grey rounded-full flex items-center px-6 mb-8\">\r\n            <User className=\"w-4 h-4 text-ui-black mr-4\" />\r\n            <input \r\n                value={username}\r\n                onChange={(e) => setUsername(e.target.value)}\r\n                placeholder=\"Username\"\r\n                className=\"flex-1 bg-transparent outline-none text-sm font-medium text-ui-black placeholder:text-ui-black/50\"\r\n            />\r\n        </div>\r\n\r\n        {/* CREATE ACCOUNT BUTTON */}\r\n        <button \r\n            onClick={handleCreateAccount}\r\n            disabled={isLoading || !username}\r\n            className=\"w-full h-12.5 bg-ui-accent-yellow text-ui-black font-bold text-sm rounded-full hover:brightness-105 active:scale-[0.98] transition-all disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-sm\"\r\n        >\r\n            {isLoading ? (\r\n                <>\r\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                    Creating Account...\r\n                </>\r\n            ) : (\r\n                \"Create Account\"\r\n            )}\r\n        </button>\r\n\r\n      </div>\r\n\r\n      {/* 3. MODAL OVERLAY */}\r\n      <AvatarSelectionModal \r\n        isOpen={showAvatarModal}\r\n        onClose={() => setShowAvatarModal(false)}\r\n        currentSelection={selectedAvatar}\r\n        onSelect={setSelectedAvatar}\r\n      />\r\n\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\auth\\login\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ValidationUtils' is assigned a value but never used.","line":18,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":22},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":289,"column":20,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[10860,10900],"text":"\r\n                Don&apos;t have an account?"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[10860,10900],"text":"\r\n                Don&lsquo;t have an account?"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[10860,10900],"text":"\r\n                Don&#39;t have an account?"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[10860,10900],"text":"\r\n                Don&rsquo;t have an account?"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { \r\n  ArrowLeft, \r\n  Mail, \r\n  Lock, \r\n  Eye, \r\n  EyeOff, \r\n  Loader2, \r\n  AlertCircle \r\n} from \"lucide-react\";\r\nimport { validateEmail, getPasswordError } from \"@/lib/validation\";\r\nimport { loginWithEmail, signInWithGoogle } from \"@/lib/firebase-auth\";\r\n\r\n// --- VALIDATION UTILS ---\r\nconst ValidationUtils = {\r\n  isValidEmail: (email: string) => /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email),\r\n  isValidPassword: (password: string) => password.length >= 6\r\n};\r\n\r\n// --- COMPONENT: CUSTOM INPUT FORM ---\r\ninterface CustomInputProps {\r\n  value: string;\r\n  onChange: (val: string) => void;\r\n  placeholder: string;\r\n  icon: React.ReactNode;\r\n  isPassword?: boolean;\r\n  error?: string | null;\r\n}\r\n\r\nconst CustomInputForm = ({ \r\n  value, \r\n  onChange, \r\n  placeholder, \r\n  icon, \r\n  isPassword = false, \r\n  error \r\n}: CustomInputProps) => {\r\n  const [isPasswordVisible, setIsPasswordVisible] = useState(false);\r\n\r\n  return (\r\n    <div className=\"w-full flex flex-col gap-1\">\r\n        <div className={`w-full h-12.5 bg-ui-grey/50 rounded-full flex items-center px-6 transition-all border ${\r\n            error ? \"border-red-400 bg-red-50\" : \"border-transparent focus-within:border-ui-accent-yellow\"\r\n        }`}>\r\n            {/* Left Icon */}\r\n            <div className={`mr-3 ${error ? \"text-red-400\" : \"text-ui-black\"}`}>\r\n                {icon}\r\n            </div>\r\n\r\n            {/* Input Field */}\r\n            <input \r\n                type={isPassword && !isPasswordVisible ? \"password\" : \"text\"}\r\n                value={value}\r\n                onChange={(e) => onChange(e.target.value)}\r\n                placeholder={placeholder}\r\n                className=\"flex-1 bg-transparent outline-none text-sm font-medium text-ui-black placeholder:text-ui-black/50\"\r\n            />\r\n\r\n            {/* Right Icon (Password Toggle) */}\r\n            {isPassword && (\r\n                <button \r\n                    onClick={() => setIsPasswordVisible(!isPasswordVisible)}\r\n                    className=\"ml-3 text-ui-black hover:text-gray-600 focus:outline-none\"\r\n                    type=\"button\"\r\n                >\r\n                    {isPasswordVisible ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\r\n                </button>\r\n            )}\r\n        </div>\r\n\r\n        {/* Error Message */}\r\n        {error && (\r\n            <p className=\"text-xs text-red-500 font-medium ml-4 flex items-center gap-1 animate-in slide-in-from-top-1\">\r\n                <AlertCircle className=\"w-3 h-3\" /> {error}\r\n            </p>\r\n        )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- MAIN PAGE ---\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  \r\n  // State\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isGoogleLoading, setIsGoogleLoading] = useState(false);\r\n  \r\n  // Error State\r\n  const [emailError, setEmailError] = useState<string | null>(null);\r\n  const [passwordError, setPasswordError] = useState<string | null>(null);\r\n  const [globalError, setGlobalError] = useState<string | null>(null);\r\n\r\n  // Validation\r\n  const validate = () => {\r\n    let isValid = true;\r\n    \r\n    // Validate Email\r\n    if (!email) {\r\n        setEmailError(\"Email tidak boleh kosong\");\r\n        isValid = false;\r\n    } else if (!validateEmail(email)) {\r\n        setEmailError(\"Format email tidak valid\");\r\n        isValid = false;\r\n    } else {\r\n        setEmailError(null);\r\n    }\r\n\r\n    // Validate Password\r\n    const passwordError = getPasswordError(password);\r\n    if (passwordError) {\r\n        setPasswordError(passwordError);\r\n        isValid = false;\r\n    } else {\r\n        setPasswordError(null);\r\n    }\r\n\r\n    return isValid;\r\n  };\r\n\r\n  // Handle Login\r\n  const handleLogin = async () => {\r\n    if (!validate()) return;\r\n    \r\n    setIsLoading(true);\r\n    setGlobalError(null);\r\n\r\n    try {\r\n        await loginWithEmail(email, password);\r\n        // Set session cookie agar middleware tahu user sudah login\r\n        document.cookie = \"luca_session=true; path=/; max-age=604800\"; // 7 hari\r\n        // Success -> Redirect to home\r\n        router.push(\"/home\");\r\n    } catch (error) {\r\n        const errorMessage = error instanceof Error ? error.message : \"Login failed. Please check your credentials.\";\r\n        setGlobalError(errorMessage);\r\n        setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Handle Google Sign In\r\n  const handleGoogleSignIn = async () => {\r\n    if (isGoogleLoading || isLoading) return;\r\n    setIsGoogleLoading(true);\r\n    setGlobalError(null);\r\n\r\n    try {\r\n        const user = await signInWithGoogle();\r\n        // Set session cookie agar middleware tahu user sudah login\r\n        document.cookie = \"luca_session=true; path=/; max-age=604800\"; // 7 hari\r\n        \r\n        // Cek apakah user baru\r\n        const isNewUser = user.metadata.creationTime === user.metadata.lastSignInTime;\r\n        if (isNewUser) {\r\n          router.push(\"/auth/fill-profile\");\r\n        } else {\r\n          router.push(\"/home\");\r\n        }\r\n    } catch (error) {\r\n        const errorMessage = error instanceof Error ? error.message : \"Google sign-in failed. Please try again.\";\r\n        if (errorMessage !== \"__CANCELLED_POPUP__\") {\r\n          // Show error while button is still disabled\r\n          setGlobalError(errorMessage);\r\n          // Re-enable button after 2s\r\n          setTimeout(() => setIsGoogleLoading(false), 2000);\r\n        } else {\r\n          setIsGoogleLoading(false);\r\n        }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full min-h-screen w-full bg-white px-8 py-6 max-w-md mx-auto relative\">\r\n      \r\n      {/* 1. BACK BUTTON */}\r\n      <div className=\"mb-4\">\r\n        <button onClick={() => router.back()} className=\"p-2 -ml-2 rounded-full hover:bg-gray-100 transition-colors\">\r\n            <ArrowLeft className=\"w-7 h-7 text-ui-black\" />\r\n        </button>\r\n      </div>\r\n\r\n      {/* 2. SCROLLABLE CONTENT */}\r\n      <div className=\"flex-1 flex flex-col justify-center overflow-y-auto no-scrollbar\">\r\n        \r\n        <h1 className=\"text-3xl font-bold font-display text-ui-black mb-2\">\r\n            Welcome Back!\r\n        </h1>\r\n        <p className=\"text-sm font-medium text-ui-dark-grey mb-10\">\r\n            Enter your email and password to log in.\r\n        </p>\r\n\r\n        <div className=\"flex flex-col gap-4\">\r\n            <CustomInputForm \r\n                value={email}\r\n                onChange={(val) => { \r\n                    setEmail(val);\r\n                    // Real-time email validation\r\n                    if (!val) {\r\n                        setEmailError(\"Email tidak boleh kosong\");\r\n                    } else if (!validateEmail(val)) {\r\n                        setEmailError(\"Format email tidak valid\");\r\n                    } else {\r\n                        setEmailError(null);\r\n                    }\r\n                }}\r\n                placeholder=\"Email Address\"\r\n                icon={<Mail className=\"w-4 h-4\" />}\r\n                error={emailError}\r\n            />\r\n\r\n            <CustomInputForm \r\n                value={password}\r\n                onChange={(val) => { \r\n                    setPassword(val);\r\n                    // Real-time password validation\r\n                    const error = getPasswordError(val);\r\n                    setPasswordError(error);\r\n                }}\r\n                placeholder=\"Password\"\r\n                icon={<Lock className=\"w-4 h-4\" />}\r\n                isPassword={true}\r\n                error={passwordError}\r\n            />\r\n        </div>\r\n\r\n        {/* Global Error Banner */}\r\n        {globalError && (\r\n            <div className=\"mt-4 p-3 bg-red-50 border border-red-200 rounded-xl text-xs text-red-600 font-medium flex items-center gap-2\">\r\n                <AlertCircle className=\"w-4 h-4\" />\r\n                {globalError}\r\n            </div>\r\n        )}\r\n\r\n        <div className=\"mt-12 flex flex-col gap-3\">\r\n            <button \r\n                onClick={handleLogin}\r\n                disabled={isLoading || isGoogleLoading}\r\n                className=\"w-full h-12.5 bg-ui-accent-yellow text-ui-black font-bold text-sm rounded-full hover:brightness-105 active:scale-[0.98] transition-all disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-sm\"\r\n            >\r\n                {isLoading ? (\r\n                    <>\r\n                        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                        Logging in...\r\n                    </>\r\n                ) : (\r\n                    \"Log in\"\r\n                )}\r\n            </button>\r\n\r\n            {/* Divider */}\r\n            <div className=\"flex items-center gap-3 my-2\">\r\n                <div className=\"flex-1 h-px bg-gray-200\"></div>\r\n                <span className=\"text-xs text-gray-400 font-medium\">OR</span>\r\n                <div className=\"flex-1 h-px bg-gray-200\"></div>\r\n            </div>\r\n\r\n            {/* Google Sign In */}\r\n            <button \r\n                onClick={handleGoogleSignIn}\r\n                disabled={isLoading || isGoogleLoading}\r\n                className=\"w-full h-12.5 bg-white border-2 border-gray-200 text-ui-black font-bold text-sm rounded-full hover:border-gray-300 active:scale-[0.98] transition-all disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-sm\"\r\n            >\r\n                {isGoogleLoading ? (\r\n                    <>\r\n                        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                        Signing in...\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\r\n                            <path fill=\"currentColor\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\r\n                            <path fill=\"currentColor\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\r\n                            <path fill=\"currentColor\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\r\n                            <path fill=\"currentColor\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\r\n                        </svg>\r\n                        Continue with Google\r\n                    </>\r\n                )}\r\n            </button>\r\n        </div>\r\n\r\n        <div className=\"mt-8 text-center\">\r\n            <p className=\"text-sm font-medium text-ui-black\">\r\n                Don't have an account?{\" \"}\r\n                <button \r\n                    onClick={() => router.push(\"/auth/signup\")}\r\n                    className=\"text-ui-accent-yellow font-bold hover:underline\"\r\n                >\r\n                    Sign Up.\r\n                </button>\r\n            </p>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      {/* 3. FOOTER */}\r\n      <div className=\"mt-auto pt-6 text-center\">\r\n        <p className=\"text-xs font-semibold text-ui-black/60\">\r\n            Privacy Policy   ┬╖   Terms of Service\r\n        </p>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\auth\\signup\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\auth\\verify-email\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'handleSendOtp' and 'router'. Either include them or remove the dependency array.","line":131,"column":6,"nodeType":"ArrayExpression","endLine":131,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [handleSendOtp, router]","fix":{"range":[4538,4540],"text":"[handleSendOtp, router]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\contacts\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\event\\[id]\\activity\\[activityid]\\add-item\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Plus' is defined but never used.","line":5,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":25,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Plus"},"fix":{"range":[145,151],"text":""},"desc":"Remove unused variable \"Plus\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":5,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":28,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"X"},"fix":{"range":[151,154],"text":""},"desc":"Remove unused variable \"X\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":5,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":43,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Trash2"},"fix":{"range":[161,169],"text":""},"desc":"Remove unused variable \"Trash2\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'query' is defined but never used.","line":8,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":27,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"query"},"fix":{"range":[339,346],"text":""},"desc":"Remove unused variable \"query\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1180,1183],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1180,1183],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'items' is assigned a value but never used.","line":29,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1230,1233],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1230,1233],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2029,2032],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2029,2032],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":91,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3013,3016],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3013,3016],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleDeleteItem' is assigned a value but never used.","line":145,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":145,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":294,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":294,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10980,10983],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10980,10983],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":308,"column":25,"nodeType":"JSXOpeningElement","endLine":312,"endColumn":27}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useRouter, useParams } from \"next/navigation\";\r\nimport { ArrowLeft, Plus, X, Check, Trash2 } from \"lucide-react\";\r\nimport { useAuth } from \"@/lib/useAuth\";\r\nimport { getEventsWithActivities, createItem, deleteItem } from \"@/lib/firestore\";\r\nimport { collection, query, onSnapshot } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\n\r\nexport default function AddItemPage() {\r\n  const router = useRouter();\r\n  const params = useParams();\r\n  const { userId, loading: authLoading } = useAuth();\r\n\r\n  const eventId = Array.isArray(params?.id) ? params.id[0] : params?.id;\r\n  const activityId = Array.isArray(params?.activityid) ? params.activityid[0] : params?.activityid;\r\n\r\n  // States\r\n  const [itemName, setItemName] = useState(\"\");\r\n  const [price, setPrice] = useState(\"\");\r\n  const [quantity, setQuantity] = useState(\"1\");\r\n  const [selectedMembers, setSelectedMembers] = useState<string[]>([]);\r\n  const [discountAmount, setDiscountAmount] = useState(\"0\");\r\n  const [taxPercentage, setTaxPercentage] = useState(\"0\");\r\n\r\n  // Data loading\r\n  const [activity, setActivity] = useState<any>(null);\r\n  const [items, setItems] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  // Fetch activity data\r\n  useEffect(() => {\r\n    const fetchActivity = async () => {\r\n      if (authLoading) return;\r\n      if (!userId || !eventId || !activityId) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n        const allEvents = await getEventsWithActivities(userId);\r\n        const event = allEvents.find((e) => e.id === eventId);\r\n        const activityData = event?.activities.find((a) => a.id === activityId);\r\n        \r\n        if (activityData) {\r\n          setActivity(activityData);\r\n          // Set default members to all activity participants\r\n          const participantNames = activityData.participants?.map((p: any) => p.name) || [];\r\n          setSelectedMembers(participantNames);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching activity:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchActivity();\r\n  }, [userId, eventId, activityId, authLoading]);\r\n\r\n  // Real-time listener for items\r\n  useEffect(() => {\r\n    if (!userId || !eventId || !activityId) return;\r\n\r\n    const itemsRef = collection(\r\n      db,\r\n      \"users\",\r\n      userId,\r\n      \"events\",\r\n      eventId,\r\n      \"activities\",\r\n      activityId,\r\n      \"items\"\r\n    );\r\n\r\n    const unsubscribe = onSnapshot(itemsRef, (snapshot) => {\r\n      const itemsList = snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n      setItems(itemsList);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [userId, eventId, activityId]);\r\n\r\n  const getAvatarByName = (name: string) => {\r\n    const participant = activity?.participants?.find((p: any) => p.name === name);\r\n    if (participant?.avatarName?.startsWith(\"http\")) {\r\n      return participant.avatarName;\r\n    }\r\n    return `https://api.dicebear.com/7.x/avataaars/svg?seed=${name}`;\r\n  };\r\n\r\n  const toggleMember = (name: string) => {\r\n    setSelectedMembers((prev) => {\r\n      if (prev.includes(name)) {\r\n        // Don't allow removing all members\r\n        if (prev.length > 1) {\r\n          return prev.filter((m) => m !== name);\r\n        }\r\n        return prev;\r\n      } else {\r\n        return [...prev, name];\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!itemName || !price || !userId || !eventId || !activityId) {\r\n      alert(\"Please fill in Item Name and Price\");\r\n      return;\r\n    }\r\n\r\n    if (selectedMembers.length === 0) {\r\n      alert(\"Please select at least one member\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setSaving(true);\r\n\r\n      await createItem(userId, eventId, activityId, {\r\n        itemName: itemName,\r\n        price: parseInt(price.replace(/\\D/g, \"\")) || 0,\r\n        quantity: parseFloat(quantity) || 1,\r\n        memberNames: selectedMembers,\r\n        discountAmount: parseInt(discountAmount.replace(/\\D/g, \"\")) || 0,\r\n        taxPercentage: parseFloat(taxPercentage) || 0,\r\n      });\r\n\r\n      // Redirect to activity detail page\r\n      router.push(`/event/${eventId}/activity/${activityId}`);\r\n    } catch (error) {\r\n      console.error(\"Error creating item:\", error);\r\n      alert(\"Failed to create item. Please try again.\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteItem = async (itemId: string) => {\r\n    if (!confirm(\"Delete this item?\")) return;\r\n    if (!userId || !eventId || !activityId) return;\r\n\r\n    try {\r\n      await deleteItem(userId, eventId, activityId, itemId);\r\n    } catch (error) {\r\n      console.error(\"Error deleting item:\", error);\r\n      alert(\"Failed to delete item\");\r\n    }\r\n  };\r\n\r\n  if (loading || authLoading) {\r\n    return (\r\n      <div className=\"h-full flex flex-col items-center justify-center gap-4\">\r\n        <div className=\"w-10 h-10 border-4 border-ui-accent-yellow border-t-transparent rounded-full animate-spin\"></div>\r\n        <p className=\"text-ui-dark-grey\">Loading activity...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!activity) {\r\n    return (\r\n      <div className=\"h-full flex flex-col items-center justify-center gap-4\">\r\n        <p className=\"text-ui-dark-grey\">Activity not found</p>\r\n        <button onClick={() => router.back()} className=\"text-ui-accent-yellow font-bold\">\r\n          Go Back\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full w-full bg-ui-white\">\r\n      {/* --- HEADER --- */}\r\n      <div className=\"px-5 pt-6 pb-4 flex items-center gap-4 border-b border-ui-grey/20\">\r\n        <button\r\n          onClick={() => router.back()}\r\n          className=\"w-10 h-10 rounded-full bg-ui-grey/10 flex items-center justify-center hover:bg-ui-grey/20 transition-colors\"\r\n        >\r\n          <ArrowLeft className=\"w-5 h-5 text-ui-black\" />\r\n        </button>\r\n        <h1 className=\"text-xl font-bold font-display text-ui-black\">Add Menu Item</h1>\r\n      </div>\r\n\r\n      {/* --- FORM CONTENT --- */}\r\n      <div className=\"flex-1 overflow-y-auto px-6 py-8 no-scrollbar\">\r\n        <div className=\"max-w-md mx-auto flex flex-col gap-8\">\r\n          {/* 1. ITEM NAME */}\r\n          <div className=\"flex flex-col gap-2\">\r\n            <label className=\"text-xs font-bold text-ui-dark-grey uppercase tracking-widest\">\r\n              Item Name\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"e.g. Nasi Goreng\"\r\n              className=\"w-full text-2xl font-bold text-ui-black placeholder:text-ui-dark-grey/50 outline-none bg-transparent border-b-2 border-ui-accent-yellow py-2 transition-colors\"\r\n              value={itemName}\r\n              onChange={(e) => setItemName(e.target.value)}\r\n              autoFocus\r\n            />\r\n          </div>\r\n\r\n          {/* 2. PRICE & QUANTITY */}\r\n          <div className=\"grid grid-cols-2 gap-6\">\r\n            <div className=\"flex flex-col gap-2\">\r\n              <label className=\"text-xs font-bold text-ui-dark-grey uppercase tracking-widest\">\r\n                Price\r\n              </label>\r\n              <div className=\"relative\">\r\n                <span className=\"absolute left-0 top-2 text-2xl font-bold text-ui-dark-grey/50\">$</span>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"0\"\r\n                  className=\"w-full text-2xl font-bold text-ui-black placeholder:text-ui-dark-grey/50 outline-none bg-transparent border-b-2 border-ui-accent-yellow py-2 transition-colors pl-6\"\r\n                  value={price}\r\n                  onChange={(e) => {\r\n                    const val = e.target.value.replace(/\\D/g, \"\");\r\n                    setPrice(val);\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col gap-2\">\r\n              <label className=\"text-xs font-bold text-ui-dark-grey uppercase tracking-widest\">\r\n                Qty\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                placeholder=\"1\"\r\n                className=\"w-full text-2xl font-bold text-ui-black placeholder:text-ui-dark-grey/50 outline-none bg-transparent border-b-2 border-ui-accent-yellow py-2 transition-colors\"\r\n                value={quantity}\r\n                onChange={(e) => setQuantity(e.target.value)}\r\n                step=\"0.5\"\r\n                min=\"0.5\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* 3. TAX & DISCOUNT (Optional) */}\r\n          <div className=\"grid grid-cols-2 gap-6\">\r\n            <div className=\"flex flex-col gap-2\">\r\n              <label className=\"text-xs font-bold text-ui-dark-grey uppercase tracking-widest\">\r\n                Tax %\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                placeholder=\"0\"\r\n                className=\"w-full text-lg font-bold text-ui-black placeholder:text-ui-dark-grey/50 outline-none bg-transparent border-b-2 border-ui-grey/30 py-2 transition-colors\"\r\n                value={taxPercentage}\r\n                onChange={(e) => setTaxPercentage(e.target.value)}\r\n                step=\"0.5\"\r\n                min=\"0\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex flex-col gap-2\">\r\n              <label className=\"text-xs font-bold text-ui-dark-grey uppercase tracking-widest\">\r\n                Discount\r\n              </label>\r\n              <div className=\"relative\">\r\n                <span className=\"absolute left-0 top-2 text-lg font-bold text-ui-dark-grey/50\">$</span>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"0\"\r\n                  className=\"w-full text-lg font-bold text-ui-black placeholder:text-ui-dark-grey/50 outline-none bg-transparent border-b-2 border-ui-grey/30 py-2 transition-colors pl-6\"\r\n                  value={discountAmount}\r\n                  onChange={(e) => {\r\n                    const val = e.target.value.replace(/\\D/g, \"\");\r\n                    setDiscountAmount(val);\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* 4. SHARED BY (Members) */}\r\n          <div className=\"flex flex-col gap-3\">\r\n            <div className=\"flex justify-between items-end\">\r\n              <label className=\"text-xs font-bold text-ui-dark-grey uppercase tracking-widest\">\r\n                Shared By\r\n              </label>\r\n              <span className=\"text-xs bg-ui-accent-yellow/20 text-ui-dark-grey px-2 py-1 rounded-full font-bold\">\r\n                {selectedMembers.length} people\r\n              </span>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col gap-2\">\r\n              {activity.participants?.map((participant: any) => {\r\n                const isSelected = selectedMembers.includes(participant.name);\r\n                return (\r\n                  <div\r\n                    key={participant.name}\r\n                    onClick={() => toggleMember(participant.name)}\r\n                    className={`flex items-center justify-between p-3 rounded-2xl border cursor-pointer transition-all ${\r\n                      isSelected\r\n                        ? \"bg-ui-white border-ui-accent-yellow shadow-sm\"\r\n                        : \"bg-ui-grey/5 border-transparent\"\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"w-10 h-10 rounded-full overflow-hidden bg-gray-200\">\r\n                        <img\r\n                          src={getAvatarByName(participant.name)}\r\n                          className=\"w-full h-full object-cover\"\r\n                          alt={participant.name}\r\n                        />\r\n                      </div>\r\n                      <span className=\"font-bold text-sm text-ui-black\">\r\n                        {participant.name}\r\n                      </span>\r\n                    </div>\r\n\r\n                    <div\r\n                      className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${\r\n                        isSelected\r\n                          ? \"bg-ui-accent-yellow border-ui-accent-yellow\"\r\n                          : \"border-ui-grey/30\"\r\n                      }`}\r\n                    >\r\n                      {isSelected && (\r\n                        <Check className=\"w-4 h-4 text-ui-black\" />\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n\r\n      </div>\r\n\r\n      {/* --- FOOTER --- */}\r\n      <div className=\"p-5 bg-ui-white border-t border-ui-grey/10\">\r\n        <button\r\n          onClick={handleSave}\r\n          disabled={saving || !itemName || !price}\r\n          className=\"w-full py-4 rounded-2xl bg-ui-black text-white font-bold text-lg shadow-lg active:scale-[0.98] transition-all hover:opacity-90 disabled:opacity-70 disabled:cursor-not-allowed\"\r\n        >\r\n          {saving ? \"Saving...\" : \"Add Item\"}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\event\\[id]\\activity\\[activityid]\\edit\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\event\\[id]\\activity\\[activityid]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Receipt' is defined but never used.","line":5,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":24,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Receipt"},"fix":{"range":[150,159],"text":""},"desc":"Remove unused variable \"Receipt\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Sparkles' is defined but never used.","line":5,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":34,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Sparkles"},"fix":{"range":[159,169],"text":""},"desc":"Remove unused variable \"Sparkles\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used.","line":5,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":48,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"User"},"fix":{"range":[177,183],"text":""},"desc":"Remove unused variable \"User\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'finalTotal' is assigned a value but never used.","line":24,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":21},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":75,"column":25,"nodeType":"JSXOpeningElement","endLine":79,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3987,3990],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3987,3990],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":94,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4051,4054],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4051,4054],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4101,4104],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4101,4104],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4797,4800],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4797,4800],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":116,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4877,4880],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4877,4880],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":161,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":161,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6055,6058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6055,6058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":169,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6387,6390],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6387,6390],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":187,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7059,7062],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7059,7062],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":190,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7221,7224],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7221,7224],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":197,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":197,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7520,7523],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7520,7523],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":242,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":242,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9256,9259],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9256,9259],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":245,"column":37,"nodeType":"JSXOpeningElement","endLine":249,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":294,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":294,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11778,11781],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11778,11781],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'idx' is defined but never used.","line":294,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":294,"endColumn":50}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useMemo, useState, useEffect } from \"react\";\r\nimport { useRouter, useParams } from \"next/navigation\";\r\nimport { Edit2, Receipt, Sparkles, Trash2, User, Plus } from \"lucide-react\";\r\nimport { Item } from \"@/lib/dummy-data\";\r\nimport { useAuth } from \"@/lib/useAuth\";\r\nimport { getEventsWithActivities } from \"@/lib/firestore\";\r\nimport { Wave } from \"@/components/ui/Icons\"; // Pastikan path import Wave benar\r\nimport Toggle from \"@/components/ui/Toggle\";\r\nimport { collection, onSnapshot } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\n\r\n// --- 1. COMPONENT TERPISAH: RECEIPT ITEM ---\r\n// Kita buat komponen ini menerima props yang dibutuhkan saja\r\ninterface ReceiptItemProps {\r\n    item: Item;\r\n    getAvatarByName: (name: string) => string;\r\n}\r\n\r\nfunction ReceiptItem({ item, getAvatarByName }: ReceiptItemProps) {\r\n    const itemTotal = (item.price * item.quantity) || 0;\r\n    const taxAmount = (itemTotal * (item.taxPercentage || 0)) / 100;\r\n    const finalTotal = itemTotal + taxAmount - (item.discountAmount || 0);\r\n\r\n    return (\r\n        <div className=\"flex flex-col gap-2\">\r\n            {/* Baris 1: Qty - Nama - Harga */}\r\n            <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex gap-3\">\r\n                    <span className=\"text-sm font-mono text-ui-dark-grey pt-0.5 opacity-60\">\r\n                        {item.quantity}x\r\n                    </span>\r\n                    <span className=\"text-sm font-bold text-ui-black leading-snug\">\r\n                        {item.itemName}\r\n                    </span>\r\n                </div>\r\n                <span className=\"text-sm font-bold text-ui-black\">\r\n                    {new Intl.NumberFormat(\"id-ID\", { \r\n                        style: \"currency\", \r\n                        currency: \"IDR\", \r\n                        minimumFractionDigits: 0 \r\n                    }).format(itemTotal)}\r\n                </span>\r\n            </div>\r\n\r\n            {/* Baris 2: Tax dan Discount */}\r\n            {((item.taxPercentage || 0) > 0 || (item.discountAmount || 0) > 0) && (\r\n                <div className=\"pl-8 flex flex-col gap-0.5 text-xs text-ui-dark-grey\">\r\n                    {(item.taxPercentage || 0) > 0 && (\r\n                        <span>\r\n                            Tax ({item.taxPercentage}%): {new Intl.NumberFormat(\"id-ID\", { \r\n                                style: \"currency\", \r\n                                currency: \"IDR\", \r\n                                minimumFractionDigits: 0 \r\n                            }).format(taxAmount)}\r\n                        </span>\r\n                    )}\r\n                    {(item.discountAmount || 0) > 0 && (\r\n                        <span>\r\n                            Discount: -{new Intl.NumberFormat(\"id-ID\", { \r\n                                style: \"currency\", \r\n                                currency: \"IDR\", \r\n                                minimumFractionDigits: 0 \r\n                            }).format(item.discountAmount)}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Baris 3: Avatar Pemakan */}\r\n            <div className=\"flex items-center gap-1 pl-8\">\r\n                {item.memberNames.map((name, i) => (\r\n                    <div key={i} className=\"w-5 h-5 rounded-full bg-gray-100 border border-white overflow-hidden shadow-sm\">\r\n                        <img \r\n                            src={getAvatarByName(name)} \r\n                            className=\"w-full h-full object-cover\" \r\n                            alt={name}\r\n                        />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function ActivityDetailPage() {\r\n  const router = useRouter();\r\n  const params = useParams();\r\n  const { userId, loading: authLoading } = useAuth();\r\n  \r\n  // State\r\n  const [eventData, setEventData] = useState<any>(null);\r\n  const [activityData, setActivityData] = useState<any>(null);\r\n  const [items, setItems] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isEqualSplit, setIsEqualSplit] = useState(false);\r\n  \r\n  // Unwrap params\r\n  const eventId = Array.isArray(params?.id) ? params.id[0] : params?.id;\r\n  const activityId = Array.isArray(params?.activityid) ? params.activityid[0] : params?.activityid;\r\n\r\n  // Fetch data dari Firebase\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if (authLoading) return;\r\n      if (!userId || !eventId || !activityId) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n        const allEvents = await getEventsWithActivities(userId);\r\n        const event = allEvents.find((e: any) => e.id === eventId);\r\n        const activity = event?.activities.find((a: any) => a.id === activityId);\r\n        \r\n        setEventData(event || null);\r\n        setActivityData(activity || null);\r\n      } catch (error) {\r\n        console.error(\"Error fetching activity:\", error);\r\n        setEventData(null);\r\n        setActivityData(null);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [userId, eventId, activityId, authLoading]);\r\n\r\n  // Real-time listener for items\r\n  useEffect(() => {\r\n    if (!userId || !eventId || !activityId) return;\r\n\r\n    const itemsRef = collection(\r\n      db,\r\n      \"users\",\r\n      userId,\r\n      \"events\",\r\n      eventId,\r\n      \"activities\",\r\n      activityId,\r\n      \"items\"\r\n    );\r\n\r\n    const unsubscribe = onSnapshot(itemsRef, (snapshot) => {\r\n      const itemsList = snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n      setItems(itemsList);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [userId, eventId, activityId]);\r\n\r\n  // Helper untuk cari avatar user berdasarkan nama\r\n  const getAvatarByName = (name: string) => {\r\n    // Cari di partisipan activity dulu\r\n    const participant = activityData?.participants?.find((p: any) => p.name === name);\r\n    if (participant) {\r\n      return participant.avatarName?.startsWith(\"http\") \r\n        ? participant.avatarName \r\n        : `https://api.dicebear.com/7.x/avataaars/svg?seed=${name}`;\r\n    }\r\n    \r\n    // Kalau ga ada, cari di event level\r\n    const eventParticipant = eventData?.participants?.find((p: any) => p.name === name);\r\n    if (eventParticipant) {\r\n      return eventParticipant.avatarName?.startsWith(\"http\")\r\n        ? eventParticipant.avatarName\r\n        : `https://api.dicebear.com/7.x/avataaars/svg?seed=${name}`;\r\n    }\r\n\r\n    // Fallback ke dicebear\r\n    return `https://api.dicebear.com/7.x/avataaars/svg?seed=${name}`;\r\n  };\r\n\r\n  // 3. HITUNG TOTAL OTOMATIS DARI ITEMS\r\n  const { subTotal, taxAmount, discountAmount, grandTotal } = useMemo(() => {\r\n    if (!items || items.length === 0) {\r\n        return { subTotal: 0, taxAmount: 0, discountAmount: 0, grandTotal: 0 };\r\n    }\r\n\r\n    // 2. Hitung Subtotal\r\n    const sub = items.reduce((acc: number, item: any) => acc + (item.price * item.quantity), 0);\r\n    \r\n    // 3. Hitung Total Tax (sum of each item's tax)\r\n    const totalTax = items.reduce((acc: number, item: any) => {\r\n      const itemTotal = item.price * item.quantity;\r\n      const itemTax = (itemTotal * (item.taxPercentage || 0)) / 100;\r\n      return acc + itemTax;\r\n    }, 0);\r\n\r\n    // 4. Hitung Total Discount (sum of each item's discount)\r\n    const totalDiscount = items.reduce((acc: number, item: any) => acc + (item.discountAmount || 0), 0);\r\n    \r\n    // 5. Hitung Grand Total\r\n    const total = sub + totalTax - totalDiscount;\r\n\r\n    return {\r\n      subTotal: sub,\r\n      taxAmount: totalTax,\r\n      discountAmount: totalDiscount,\r\n      grandTotal: total\r\n    };\r\n  }, [items]);\r\n\r\n  // --- HANDLING LOADING ---\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-full bg-ui-background gap-4 p-5\">\r\n        <div className=\"w-12 h-12 border-4 border-ui-accent-yellow border-t-transparent rounded-full animate-spin\"></div>\r\n        <p className=\"text-ui-dark-grey\">Loading activity...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- HANDLING NOT FOUND ---\r\n  if (!activityData) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-full text-ui-dark-grey\">\r\n        <p>Activity not found.</p>\r\n        <button onClick={() => router.back()} className=\"text-ui-accent-yellow font-bold mt-2\">Go Back</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full w-full bg-ui-background\">\r\n\r\n      {/* --- CONTENT SCROLLABLE --- */}\r\n      <div className=\"flex-1 overflow-y-auto px-5 pt-6 pb-32 no-scrollbar\">\r\n        \r\n        {/* SECTION 1: PARTICIPANTS HEADER (Sesuai Screenshot) */}\r\n        <div className=\"rounded-2xl mb-6 flex items-center justify-between gap-3\">\r\n            <div className=\"bg-ui-white p-4 rounded-2xl shadow-sm flex-1 min-w-0 flex items-center justify-between\">\r\n                {/* 1. BAGIAN AVATAR */}\r\n                {/* Tambahkan: flex-1, min-w-0, overflow-x-auto */}\r\n                <div className=\"flex gap-2 overflow-x-auto no-scrollbar\">\r\n                    {activityData?.participants?.map((p: any, idx: number) => (\r\n                        <div key={idx} className=\"flex flex-col items-center shrink-0\">\r\n                            <div className=\"inline-block h-10 w-10 rounded-full ring-2 ring-white bg-gray-100 overflow-hidden\">\r\n                                    <img \r\n                                    src={getAvatarByName(p.name)} \r\n                                    className=\"w-full h-full object-cover\"\r\n                                    alt={p.name}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <div className=\"bg-ui-white p-4 rounded-2xl shadow-sm flex items-center justify-between\">\r\n                {/* 2. BAGIAN TOGGLE */}\r\n                {/* Tambahkan: shrink-0, pl-4 */}\r\n                <div className=\"\">\r\n                    <Toggle \r\n                        label=\"Equal Split\"\r\n                        checked={isEqualSplit}\r\n                        onChange={(val) => {\r\n                            setIsEqualSplit(val);\r\n                            console.log(\"Split Mode:\", val ? \"Equal\" : \"Itemized\");\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        {/* SECTION 2: RECEIPT CARD */}\r\n        {/* Kita kasih overflow-hidden biar Wave-nya kepotong rapi kalau ditaruh di dalam,\r\n            TAPI untuk efek kertas sobek di bawah, kita taruh Wave di LUAR div putih ini */}\r\n        <div className=\"relative drop-shadow-xl filter\">\r\n            \r\n            <div className=\"text-ui-white -mt-2\"> {/* margin minus biar nempel rapi */}\r\n                <Wave className=\"w-full fill-current\" />\r\n            </div>\r\n            {/* KERTAS STRUK (BAGIAN ATAS & TENGAH) */}\r\n            <div className=\"bg-ui-white p-6 pb-2\">\r\n                \r\n                {/* Judul & Payer */}\r\n                <div className=\"text-center mb-8\">\r\n                    <h2 className=\"text-xl font-bold text-ui-black font-display\">{activityData.title}</h2>\r\n                    <p className=\"text-xs text-ui-dark-grey\">\r\n                        Paid by <span className=\"font-bold text-ui-black\">{activityData.payerName}</span>\r\n                    </p>\r\n                </div>\r\n\r\n                {/* List Items dari Firebase */}\r\n                <div className=\"flex flex-col gap-6 mb-8\">\r\n                    {items && items.length > 0 ? (\r\n                        items.map((item: any, idx: number) => (\r\n                            <ReceiptItem \r\n                                key={item.id} \r\n                                item={item} \r\n                                getAvatarByName={getAvatarByName} \r\n                            />\r\n                        ))\r\n                    ) : (\r\n                        <p className=\"text-center text-xs text-gray-400 py-4\">No items yet</p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* ADD ITEM BUTTON */}\r\n                <div className=\"flex justify-center mb-8\">\r\n                    <button \r\n                        onClick={() => router.push(`/event/${eventId}/activity/${activityId}/add-item`)}\r\n                        className=\"flex items-center gap-2 px-4 py-2 bg-ui-grey rounded-full text-xs font-bold text-ui-dark-grey hover:bg-ui-accent-yellow/20 hover:text-ui-black transition-colors\"\r\n                    >\r\n                        <Plus className=\"w-4 h-4\" /> Add Menu Item\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Garis Putus-putus Divider */}\r\n                <div className=\"w-full border-b-2 border-dashed border-ui-dark-grey mb-6 relative\">\r\n                     {/* Efek Coak Kiri Kanan */}\r\n                     <div className=\"absolute -left-8 -top-3 w-6 h-6 rounded-full\"></div>\r\n                     <div className=\"absolute -right-8 -top-3 w-6 h-6 rounded-full\"></div>\r\n                </div>\r\n\r\n                {/* Totals Section */}\r\n                <div className=\"flex flex-col gap-2 pb-6\">\r\n                    <div className=\"flex justify-between items-center text-xs text-ui-dark-grey font-medium\">\r\n                        <span>Subtotal</span>\r\n                        <span className=\"\">{formatCurrency(subTotal)}</span>\r\n                    </div>\r\n                    {taxAmount > 0 && (\r\n                      <div className=\"flex justify-between items-center text-xs text-ui-dark-grey font-medium\">\r\n                          <span>Total Tax</span>\r\n                          <span className=\"\">{formatCurrency(taxAmount)}</span>\r\n                      </div>\r\n                    )}\r\n                    {discountAmount > 0 && (\r\n                      <div className=\"flex justify-between items-center text-xs text-ui-dark-grey font-medium\">\r\n                          <span>Total Discount</span>\r\n                          <span className=\"\">-{formatCurrency(discountAmount)}</span>\r\n                      </div>\r\n                    )}\r\n                    <div className=\"flex justify-between items-center text-lg font-bold text-ui-black mt-2\">\r\n                        <span>Total Bill</span>\r\n                        <span className=\"\">{formatCurrency(grandTotal)}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* BAGIAN BAWAH (WAVE / GERIGI KERTAS) */}\r\n            {/* Wave kita putar 180 derajat dan warnanya disamakan dengan bg kertas (putih) */}\r\n            <div className=\"text-ui-white -mt-px\"> {/* margin minus biar nempel rapi */}\r\n                <Wave className=\"w-full rotate-180 fill-current\" />\r\n            </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      {/* --- FOOTER ACTION (EDIT BUTTON) --- */}\r\n      <div className=\"fixed bottom-12 right-5 z-20\">\r\n          <button \r\n             onClick={() => router.push(`/event/${eventId}/activity/${activityId}/edit`)}\r\n             className=\"w-14 h-14 bg-ui-accent-yellow text-ui-black rounded-full shadow-lg shadow-black/20 flex items-center justify-center hover:scale-110 active:scale-95 transition-all border border-ui-grey/10\"\r\n          >\r\n             <Edit2 className=\"w-6 h-6\" />\r\n          </button>\r\n      </div>\r\n\r\n      <div className=\"fixed bottom-30 right-5 z-20\">\r\n          <button \r\n            //  logic delete taro sini\r\n             onClick={() => {}}\r\n             className=\"w-14 h-14 bg-ui-accent-red text-ui-white rounded-full shadow-lg shadow-black/20 flex items-center justify-center hover:scale-110 active:scale-95 transition-all border border-ui-grey/10\"\r\n          >\r\n             <Trash2 className=\"w-6 h-6\" />\r\n          </button>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n// Helper Format Rupiah\r\nconst formatCurrency = (amount: number) => {\r\n    return new Intl.NumberFormat(\"id-ID\", {\r\n        style: \"currency\",\r\n        currency: \"IDR\",\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 0\r\n    }).format(amount);\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\event\\[id]\\add-activity\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[610,613],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[610,613],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2567,2570],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2567,2570],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useRouter, useParams } from \"next/navigation\";\r\nimport ActivityForm, { ActivityFormData } from \"@/components/forms/ActivityForm\";\r\nimport { useAuth } from \"@/lib/useAuth\";\r\nimport { getEventsWithActivities, createActivity } from \"@/lib/firestore\";\r\nimport { getContacts, ContactData } from \"@/lib/firebase-contacts\";\r\n\r\nexport default function AddActivityPage() {\r\n  const router = useRouter();\r\n  const params = useParams();\r\n  const { userId, loading: authLoading } = useAuth();\r\n  \r\n  const [eventData, setEventData] = useState<any>(null);\r\n  const [contacts, setContacts] = useState<ContactData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  // 1. Get Event ID\r\n  const eventId = Array.isArray(params.id) ? params.id[0] : params.id;\r\n\r\n  // 2. Fetch Event Data\r\n  useEffect(() => {\r\n    const fetchEvent = async () => {\r\n      if (authLoading) return;\r\n      if (!userId || !eventId) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n        const allEvents = await getEventsWithActivities(userId);\r\n        const event = allEvents.find((e) => e.id === eventId);\r\n        setEventData(event || null);\r\n      } catch (error) {\r\n        console.error(\"Error fetching event:\", error);\r\n        setEventData(null);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchEvent();\r\n  }, [userId, eventId, authLoading]);\r\n\r\n  // 3. Fetch Contacts\r\n  useEffect(() => {\r\n    if (userId) {\r\n      getContacts(userId)\r\n        .then((data) => setContacts(data))\r\n        .catch((err) => console.error(\"Failed to fetch contacts:\", err));\r\n    }\r\n  }, [userId]);\r\n\r\n  if (loading || authLoading) {\r\n    return (\r\n      <div className=\"h-full flex flex-col items-center justify-center gap-4\">\r\n        <div className=\"w-10 h-10 border-4 border-ui-accent-yellow border-t-transparent rounded-full animate-spin\"></div>\r\n        <p className=\"text-ui-dark-grey\">Loading event...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!eventData) {\r\n    return (\r\n      <div className=\"h-full flex flex-col items-center justify-center gap-4\">\r\n        <p className=\"text-ui-dark-grey\">Event not found</p>\r\n        <button onClick={() => router.back()} className=\"text-ui-accent-yellow font-bold\">\r\n          Go Back\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Map event participants to Contact format for the form\r\n  const eventParticipants = eventData.participants?.map((p: any) => {\r\n    const contact = contacts.find((c) => c.name === p.name);\r\n    return {\r\n      id: contact?.id || p.name,\r\n      name: p.name,\r\n      avatarName: p.avatarName || p.name,\r\n    };\r\n  }) || [];\r\n\r\n  const handleCreate = async (data: ActivityFormData) => {\r\n    if (!userId || !eventId || saving) return;\r\n\r\n    try {\r\n      setSaving(true);\r\n\r\n      // Find payer participant info\r\n      const payerParticipant = eventParticipants.find((p) => p.id === data.payerId);\r\n      \r\n      // Map split among IDs to participant objects\r\n      const participants = data.splitAmongIds\r\n        .map((id) => {\r\n          const participant = eventParticipants.find((p) => p.id === id);\r\n          return participant\r\n            ? {\r\n                name: participant.name,\r\n                avatarName: participant.avatarName,\r\n              }\r\n            : null;\r\n        })\r\n        .filter((p) => p !== null) as Array<{ name: string; avatarName: string }>;\r\n\r\n      // Create activity using firestore function\r\n      await createActivity(userId, eventId, {\r\n        title: data.title,\r\n        amount: 0, // Will be calculated from items\r\n        category: data.category,\r\n        paidBy: payerParticipant\r\n          ? {\r\n              name: payerParticipant.name,\r\n              avatarName: payerParticipant.avatarName,\r\n            }\r\n          : { name: \"\", avatarName: \"\" },\r\n        participants: participants,\r\n        payerName: payerParticipant?.name || \"\",\r\n      });\r\n\r\n      router.back();\r\n    } catch (error) {\r\n      console.error(\"Error creating activity:\", error);\r\n      alert(\"Failed to create activity. Please try again.\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ActivityForm\r\n      eventParticipants={eventParticipants}\r\n      onSubmit={handleCreate}\r\n    />\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\event\\[id]\\edit\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[655,658],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[655,658],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useRouter, useParams } from \"next/navigation\";\r\nimport EventForm, { EventFormData } from \"@/components/forms/EventForm\";\r\nimport { useAuth } from \"@/lib/useAuth\";\r\nimport { getEventsWithActivities, updateEvent } from \"@/lib/firestore\";\r\nimport { getContacts, ContactData } from \"@/lib/firebase-contacts\";\r\nimport { getUserProfile } from \"@/lib/firebase-auth\";\r\n\r\nexport default function EditEventPage() {\r\n  const router = useRouter();\r\n  const params = useParams();\r\n  const { user, userId, loading: authLoading } = useAuth();\r\n\r\n  const [eventData, setEventData] = useState<any>(null);\r\n  const [firebaseContacts, setFirebaseContacts] = useState<ContactData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // 1. Get Event ID\r\n  const eventId = Array.isArray(params.id) ? params.id[0] : params.id;\r\n  \r\n  // 2. Fetch Event from Firebase\r\n  useEffect(() => {\r\n    const fetchEvent = async () => {\r\n      if (authLoading) return;\r\n      if (!userId || !eventId) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n        const allEvents = await getEventsWithActivities(userId);\r\n        const event = allEvents.find((e) => e.id === eventId);\r\n        setEventData(event || null);\r\n      } catch (error) {\r\n        console.error(\"Error fetching event:\", error);\r\n        setEventData(null);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchEvent();\r\n  }, [userId, eventId, authLoading]);\r\n\r\n  // 3. Fetch contacts\r\n  useEffect(() => {\r\n    if (userId) {\r\n      getContacts(userId)\r\n        .then((data) => setFirebaseContacts(data))\r\n        .catch((err) => console.error(\"Failed to fetch contacts:\", err));\r\n    }\r\n  }, [userId]);\r\n\r\n  // Loading state\r\n  if (loading || authLoading) {\r\n    return (\r\n      <div className=\"h-full flex flex-col items-center justify-center gap-4\">\r\n        <div className=\"w-10 h-10 border-4 border-ui-accent-yellow border-t-transparent rounded-full animate-spin\"></div>\r\n        <p className=\"text-ui-dark-grey\">Loading event...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Handle Invalid ID\r\n  if (!eventData) {\r\n    return (\r\n        <div className=\"h-full flex flex-col items-center justify-center gap-4\">\r\n            <p>Event not found</p>\r\n            <button onClick={() => router.back()} className=\"text-ui-accent-yellow font-bold\">Go Back</button>\r\n        </div>\r\n    );\r\n  }\r\n\r\n  const handleUpdate = async (data: EventFormData) => {\r\n    if (!userId || !eventId || !user?.uid) return;\r\n    try {\r\n      // Map participant IDs to participant objects using firebaseContacts\r\n      const participants = data.participantIds\r\n        .map((id) => {\r\n          const contact = firebaseContacts.find((c) => c.id === id);\r\n          return contact\r\n            ? {\r\n                name: contact.name,\r\n                avatarName: contact.avatarName || contact.name,\r\n              }\r\n            : null;\r\n        })\r\n        .filter((p) => p !== null) as Array<{ name: string; avatarName: string }>;\r\n\r\n      // Fetch current user's profile to get their correct avatar info\r\n      const userProfile = await getUserProfile(user.uid);\r\n      const currentUserParticipant = userProfile\r\n        ? {\r\n            name: userProfile.username || user.displayName || \"You\",\r\n            avatarName: userProfile.avatarName || userProfile.username || user.displayName || \"You\",\r\n          }\r\n        : {\r\n            name: user.displayName || \"You\",\r\n            avatarName: user.displayName || \"You\",\r\n          };\r\n\r\n      // Add the current user as a participant\r\n      participants.unshift(currentUserParticipant);\r\n\r\n      await updateEvent(userId, eventId, {\r\n        title: data.title,\r\n        location: data.location,\r\n        date: new Date(data.date),\r\n        participants,\r\n        imageUrl: data.imageUrl || eventData?.imageUrl || \"\",\r\n      });\r\n      router.back();\r\n    } catch (error) {\r\n      console.error(\"Error updating event:\", error);\r\n      alert(\"Failed to update event.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <EventForm \r\n        initialData={eventData} \r\n        isEditing={true} \r\n        onSubmit={handleUpdate} \r\n    />\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\event\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useMemo' is defined but never used.","line":3,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":24,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useMemo"},"fix":{"range":[33,41],"text":""},"desc":"Remove unused variable \"useMemo\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[596,599],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[596,599],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2215,2218],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2215,2218],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2411,2414],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2411,2414],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3073,3076],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3073,3076],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleting' is assigned a value but never used.","line":81,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":18},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchEvent'. Either include it or remove the dependency array.","line":111,"column":6,"nodeType":"ArrayExpression","endLine":111,"endColumn":36,"suggestions":[{"desc":"Update the dependencies array to be: [userId, eventId, authLoading, fetchEvent]","fix":{"range":[4031,4061],"text":"[userId, eventId, authLoading, fetchEvent]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":200,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7068,7071],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7068,7071],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useMemo, useState, useEffect } from \"react\";\r\nimport { useRouter, useParams } from \"next/navigation\"; \r\nimport { useAuth } from \"@/lib/useAuth\";\r\nimport { getEventsWithActivities, deleteActivity, deleteEvent } from \"@/lib/firestore\";\r\nimport EventHeaderCard from \"@/components/ui/EventHeaderCard\";\r\nimport { ShoppingCart, Utensils, Car, Zap, Ticket, Trash2 } from \"lucide-react\"; \r\nimport FabAdd from \"@/components/ui/FABAdd\";\r\nimport DeleteConfirmModal from \"@/components/ui/DeleteConfirmModal\";\r\n\r\n// --- HELPER: FORMAT DATE ---\r\nconst formatDate = (dateInput: any): string => {\r\n  if (!dateInput) return \"\";\r\n  let date: Date;\r\n  \r\n  if (dateInput instanceof Date) {\r\n    date = dateInput;\r\n  } else if (typeof dateInput.toDate === \"function\") {\r\n    date = dateInput.toDate();\r\n  } else if (typeof dateInput === \"object\" && \"seconds\" in dateInput) {\r\n    date = new Date(dateInput.seconds * 1000 + (dateInput.nanoseconds || 0) / 1000000);\r\n  } else if (typeof dateInput === \"string\") {\r\n    // Handle DD/MM/YYYY format\r\n    const ddmmyyyy = dateInput.match(/^(\\d{2})\\/(\\d{2})\\/(\\d{4})$/);\r\n    if (ddmmyyyy) {\r\n      date = new Date(parseInt(ddmmyyyy[3]), parseInt(ddmmyyyy[2]) - 1, parseInt(ddmmyyyy[1]));\r\n    } else {\r\n      date = new Date(dateInput);\r\n    }\r\n  } else if (typeof dateInput === \"number\") {\r\n    date = new Date(dateInput);\r\n  } else {\r\n    return \"\";\r\n  }\r\n  \r\n  return date.toLocaleDateString(\"en-GB\", {\r\n    day: \"2-digit\",\r\n    month: \"short\",\r\n    year: \"numeric\",\r\n  });\r\n};\r\n\r\n// --- HELPER: LOGIC ICON BERDASARKAN KATEGORI ---\r\nconst getCategoryIcon = (category: string) => {\r\n  const cat = category.toLowerCase();\r\n  if (cat.includes(\"food\") || cat.includes(\"makan\")) return <Utensils className=\"w-5 h-5\" />;\r\n  if (cat.includes(\"transport\") || cat.includes(\"jalan\")) return <Car className=\"w-5 h-5\" />;\r\n  if (cat.includes(\"entertainment\") || cat.includes(\"nonton\")) return <Ticket className=\"w-5 h-5\" />;\r\n  if (cat.includes(\"bill\") || cat.includes(\"listrik\")) return <Zap className=\"w-5 h-5\" />;\r\n  return <ShoppingCart className=\"w-5 h-5\" />; // Default\r\n};\r\n\r\n// --- HELPER: HITUNG TOTAL BILL DARI ITEMS ---\r\nconst getActivityTotal = (activity: any) => {\r\n  if (!activity.items || activity.items.length === 0) return 0;\r\n\r\n  // 1. Hitung Subtotal (Harga * Qty - Diskon per Item)\r\n  const subTotal = activity.items.reduce((acc: number, item: any) => {\r\n    const itemTotal = (item.price * item.quantity) - (item.discountAmount || 0);\r\n    return acc + itemTotal;\r\n  }, 0);\r\n\r\n  // 2. Hitung Tax (Ambil rate dari item pertama)\r\n  const taxRate = activity.items[0]?.taxPercentage || 0;\r\n  const taxAmount = subTotal * (taxRate / 100);\r\n\r\n  // 3. Grand Total (Belum termasuk global discount activity kalau ada, tapi cukup akurat utk list view)\r\n  return subTotal + taxAmount;\r\n};\r\n\r\nexport default function EventDetailPage() {\r\n  const router = useRouter();\r\n  const params = useParams(); \r\n  const { userId, loading: authLoading } = useAuth();\r\n  \r\n  // State\r\n  const [eventData, setEventData] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activityToDelete, setActivityToDelete] = useState<string | null>(null);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [showDeleteEvent, setShowDeleteEvent] = useState(false);\r\n  \r\n  // Unwrap ID\r\n  const rawId = params?.id;\r\n  const eventId = Array.isArray(rawId) ? rawId[0] : rawId;\r\n\r\n  // Fetch event dari Firebase\r\n  const fetchEvent = async () => {\r\n    if (authLoading) return;\r\n    if (!userId || !eventId) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const allEvents = await getEventsWithActivities(userId);\r\n      const event = allEvents.find((e) => e.id === eventId);\r\n      setEventData(event || null);\r\n    } catch (error) {\r\n      console.error(\"Error fetching event:\", error);\r\n      setEventData(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchEvent();\r\n  }, [userId, eventId, authLoading]);\r\n\r\n  // Delete activity handler\r\n  const confirmDeleteActivity = async () => {\r\n    if (!userId || !eventId || !activityToDelete) return;\r\n    try {\r\n      setDeleting(true);\r\n      await deleteActivity(userId, eventId, activityToDelete);\r\n      await fetchEvent(); // Refresh data\r\n    } catch (error) {\r\n      console.error(\"Error deleting activity:\", error);\r\n      alert(\"Failed to delete activity.\");\r\n    } finally {\r\n      setDeleting(false);\r\n      setActivityToDelete(null);\r\n    }\r\n  };\r\n\r\n  // Delete event handler\r\n  const confirmDeleteEvent = async () => {\r\n    if (!userId || !eventId) return;\r\n    try {\r\n      await deleteEvent(userId, eventId);\r\n      router.replace(\"/home\");\r\n    } catch (error) {\r\n      console.error(\"Error deleting event:\", error);\r\n      alert(\"Failed to delete event.\");\r\n    } finally {\r\n      setShowDeleteEvent(false);\r\n    }\r\n  };\r\n\r\n  // HANDLING LOADING\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-full bg-ui-background gap-4 p-5\">\r\n        <div className=\"w-12 h-12 border-4 border-ui-accent-yellow border-t-transparent rounded-full animate-spin\"></div>\r\n        <p className=\"text-ui-dark-grey\">Loading event...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // HANDLING NOT FOUND\r\n  if (!eventData) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-full bg-ui-background gap-4 p-5 text-center\">\r\n        <p className=\"text-ui-dark-grey font-bold text-lg\">Event Not Found ≡ƒÿö</p>\r\n        <button onClick={() => router.back()} className=\"text-ui-accent-yellow font-bold hover:underline\">Go Back</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // RENDER UI\r\n  return (\r\n    <div className=\"flex flex-col h-full w-full bg-ui-background\">\r\n      \r\n      {/* FAB ADD ACTIVITY */}\r\n      <FabAdd\r\n         onClick={() => {\r\n            router.push(`/event/${eventId}/add-activity`); \r\n         }}\r\n      />\r\n      \r\n      {/* HEADER CARD */}\r\n      <div className=\"px-5 pt-4 pb-2 shrink-0\">\r\n        <EventHeaderCard \r\n           event={{\r\n             ...eventData,\r\n             date: formatDate(eventData.date),\r\n           }}\r\n           onBackClick={() => router.back()}\r\n           onEditClick={() => router.push(`/event/${eventId}/edit`)}\r\n           onDeleteClick={() => setShowDeleteEvent(true)}\r\n        />\r\n      </div>\r\n\r\n      {/* CONTENT ACTIVITY */}\r\n      <div className=\"w-full px-5 mt-2\">\r\n        <h3 className=\"font-bold text-lg text-ui-black mb-4\">Activities</h3>\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-y-auto no-scrollbar px-5 mt-0 pb-32\">\r\n         {eventData.activities.length === 0 ? (\r\n            <div className=\"text-center py-10 opacity-50\">\r\n               <p className=\"text-sm text-ui-dark-grey\">No activities yet.</p>\r\n               <p className=\"text-xs text-ui-dark-grey mt-1\">Tap + to add one!</p>\r\n            </div>\r\n         ) : (\r\n            <div className=\"flex flex-col gap-3\">\r\n               {eventData.activities.map((activity: any, index: number) => {\r\n                 \r\n                 // Kalkulasi Total Real-time\r\n                 const totalBill = getActivityTotal(activity);\r\n\r\n                 return (\r\n                  <div \r\n                    key={activity.id || index}\r\n                    onClick={() => router.push(`/event/${eventId}/activity/${activity.id}`)}\r\n                    className=\"bg-ui-white p-4 rounded-xl flex items-center gap-4 shadow-sm border border-ui-grey/10 cursor-pointer active:scale-[0.98] active:bg-gray-50 transition-all\"\r\n                  >\r\n                    {/* Icon Category */}\r\n                    <div \r\n                      className=\"w-10 h-10 rounded-full flex items-center justify-center\"\r\n                      style={{ backgroundColor: `${activity.categoryColorHex || '#E5E7EB'}20` }} \r\n                    >\r\n                        <div style={{ color: activity.categoryColorHex || '#6B7280' }}>\r\n                            {getCategoryIcon(activity.category)}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Text Info */}\r\n                    <div className=\"flex-1 min-w-0\">\r\n                        <h4 className=\"font-bold text-ui-black text-sm truncate\">{activity.title}</h4>\r\n                        <p className=\"text-xs text-ui-dark-grey truncate\">\r\n                           Paid by <span className=\"font-semibold text-ui-black\">{activity.payerName}</span>\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Total Amount (Calculated) */}\r\n                    <span className=\"font-bold text-ui-accent-red text-sm whitespace-nowrap\">\r\n                        {new Intl.NumberFormat(\"id-ID\", { \r\n                            style: \"currency\", \r\n                            currency: \"IDR\", \r\n                            minimumFractionDigits: 0 \r\n                        }).format(totalBill)}\r\n                    </span>\r\n\r\n                    {/* Delete Button */}\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setActivityToDelete(activity.id);\r\n                      }}\r\n                      className=\"p-2 rounded-full bg-red-50 text-red-500 hover:bg-red-100 active:scale-90 transition-all shrink-0\"\r\n                    >\r\n                      <Trash2 className=\"w-4 h-4\" />\r\n                    </button>\r\n                  </div>\r\n                 );\r\n               })}\r\n            </div>\r\n         )}\r\n      </div>\r\n\r\n      {/* --- FOOTER: SUMMARIZE BUTTON --- */}\r\n      <div className=\"fixed bottom-8 left-5 right-5 z-30\">\r\n        <button \r\n            onClick={() => router.push(`/event/${eventId}/summary`)}\r\n            className=\"w-full h-14 bg-ui-accent-yellow text-white rounded-full shadow-xl shadow-black/20 flex items-center justify-center gap-2 hover:scale-[1.02] active:scale-95 transition-all font-bold text-lg border border-white/10\">\r\n            <span className=\"mt-0.5 text-ui-black\">Summarize</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* DELETE ACTIVITY CONFIRMATION MODAL */}\r\n      <DeleteConfirmModal\r\n        isOpen={!!activityToDelete}\r\n        onClose={() => setActivityToDelete(null)}\r\n        onConfirm={confirmDeleteActivity}\r\n        title=\"Delete Activity?\"\r\n        name=\"this activity\"\r\n      />\r\n\r\n      {/* DELETE EVENT CONFIRMATION MODAL */}\r\n      <DeleteConfirmModal\r\n        isOpen={showDeleteEvent}\r\n        onClose={() => setShowDeleteEvent(false)}\r\n        onConfirm={confirmDeleteEvent}\r\n        title=\"Delete Event?\"\r\n        name={eventData?.title || \"this event\"}\r\n      />\r\n\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\event\\[id]\\summary\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\example-events\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\help-support\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1654,1657],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1654,1657],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":153,"column":49,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6200,6251],"text":"\r\n                            No topics found for &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6200,6251],"text":"\r\n                            No topics found for &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6200,6251],"text":"\r\n                            No topics found for &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6200,6251],"text":"\r\n                            No topics found for &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":153,"column":63,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6264,6291],"text":"&quot;\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6264,6291],"text":"&ldquo;\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6264,6291],"text":"&#34;\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6264,6291],"text":"&rdquo;\r\n                        "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { \r\n  ArrowLeft, \r\n  Search, \r\n  ChevronDown, \r\n  ChevronUp, \r\n  Mail, \r\n  Bug, \r\n  ChevronRight \r\n} from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\n// --- COMPONENT: FAQ ITEM (ACCORDION) ---\r\nconst FaqItem = ({ question, answer }: { question: string, answer: string }) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  return (\r\n    <div className=\"border-b border-gray-100 last:border-0\">\r\n      <button \r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"w-full flex items-center justify-between py-4 px-5 text-left hover:bg-gray-50 transition-colors\"\r\n      >\r\n        <span className=\"font-medium text-sm text-ui-black pr-4\">{question}</span>\r\n        {isOpen ? (\r\n            <ChevronUp className=\"w-4 h-4 text-gray-400 shrink-0\" />\r\n        ) : (\r\n            <ChevronDown className=\"w-4 h-4 text-gray-400 shrink-0\" />\r\n        )}\r\n      </button>\r\n\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n            <motion.div\r\n                initial={{ height: 0, opacity: 0 }}\r\n                animate={{ height: \"auto\", opacity: 1 }}\r\n                exit={{ height: 0, opacity: 0 }}\r\n                className=\"overflow-hidden\"\r\n            >\r\n                <div className=\"px-5 pb-4 text-xs text-ui-dark-grey leading-relaxed\">\r\n                    {answer}\r\n                </div>\r\n            </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- COMPONENT: CONTACT ACTION ITEM ---\r\nconst ContactActionItem = ({ icon, title, subtitle, onClick }: any) => {\r\n  return (\r\n    <button \r\n        onClick={onClick}\r\n        className=\"w-full flex items-center bg-gray-50 hover:bg-gray-100 p-4 rounded-2xl transition-all group active:scale-[0.98]\"\r\n    >\r\n        {/* Icon Circle */}\r\n        <div className=\"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm shrink-0\">\r\n            <div className=\"text-ui-accent-yellow\">{icon}</div>\r\n        </div>\r\n\r\n        <div className=\"flex-1 text-left ml-4\">\r\n            <h4 className=\"font-bold text-sm text-ui-black group-hover:text-black\">{title}</h4>\r\n            <p className=\"text-xs text-ui-dark-grey\">{subtitle}</p>\r\n        </div>\r\n\r\n        <ChevronRight className=\"w-5 h-5 text-gray-400\" />\r\n    </button>\r\n  );\r\n};\r\n\r\n// --- MAIN PAGE ---\r\n\r\nexport default function HelpSupportPage() {\r\n  const router = useRouter();\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  const faqs = [\r\n    { \r\n        q: \"How to split a bill equally?\", \r\n        a: \"To split a bill equally, go to the Activity Detail page and toggle the 'Equal Split' switch. This will automatically divide the total amount by the number of participants.\" \r\n    },\r\n    { \r\n        q: \"Can I edit an activity after saving?\", \r\n        a: \"Yes! Simply tap on the activity you want to edit, then click the Edit (Pencil) icon. You can modify items, prices, and participants.\" \r\n    },\r\n    { \r\n        q: \"How do I add friends?\", \r\n        a: \"Currently, friends are added automatically when you create a new event. We are working on a dedicated contacts feature!\" \r\n    },\r\n    { \r\n        q: \"Payment methods supported\", \r\n        a: \"Luca helps calculate split bills but does not process payments directly. You can settle up using your preferred payment apps like GoPay, OVO, or Bank Transfer.\" \r\n    }\r\n  ];\r\n\r\n  // Simple Search Filter\r\n  const filteredFaqs = faqs.filter(f => \r\n    f.q.toLowerCase().includes(searchQuery.toLowerCase()) || \r\n    f.a.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full min-h-screen w-full bg-ui-background relative\">\r\n      \r\n      {/* HEADER TOP BAR */}\r\n      <div className=\"px-5 pt-6 pb-4 flex items-center gap-4 bg-white sticky top-0 z-30 border-b border-gray-50\">\r\n        <button \r\n            onClick={() => router.back()} \r\n            className=\"w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center hover:bg-gray-100 transition-colors\"\r\n        >\r\n             <ArrowLeft className=\"w-5 h-5 text-ui-black\" />\r\n        </button>\r\n        <h1 className=\"text-xl font-bold font-display text-ui-black\">Help & Support</h1>\r\n      </div>\r\n\r\n      {/* SCROLLABLE CONTENT */}\r\n      <div className=\"flex-1 overflow-y-auto no-scrollbar pb-10\">\r\n        <div className=\"p-5 flex flex-col gap-6\">\r\n\r\n            {/* 1. SEARCH HERO SECTION */}\r\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\r\n                <h2 className=\"text-2xl font-bold text-ui-black mb-2 font-display\">How can we help you?</h2>\r\n                <p className=\"text-sm text-ui-dark-grey mb-6\">Search for topics or questions</p>\r\n\r\n                <div className=\"relative\">\r\n                    <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\r\n                    <input \r\n                        type=\"text\"\r\n                        placeholder=\"e.g., split bill, forgot password\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                        className=\"w-full h-12 pl-12 pr-4 rounded-full bg-ui-background border-none outline-none text-sm text-ui-black focus:ring-2 focus:ring-ui-accent-yellow transition-all placeholder:text-gray-400\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* 2. FAQ SECTION */}\r\n            <div className=\"bg-white rounded-2xl overflow-hidden shadow-sm border border-gray-100\">\r\n                <div className=\"px-5 pt-5 pb-2\">\r\n                    <h3 className=\"font-bold text-base text-ui-black\">Popular Topics</h3>\r\n                </div>\r\n                \r\n                <div className=\"flex flex-col\">\r\n                    {filteredFaqs.length > 0 ? (\r\n                        filteredFaqs.map((faq, idx) => (\r\n                            <FaqItem key={idx} question={faq.q} answer={faq.a} />\r\n                        ))\r\n                    ) : (\r\n                        <div className=\"p-5 text-center text-sm text-gray-400\">\r\n                            No topics found for \"{searchQuery}\"\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* 3. CONTACT & ACTIONS */}\r\n            <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100\">\r\n                <h3 className=\"font-bold text-base text-ui-black mb-4 px-1\">Still need help?</h3>\r\n                \r\n                <div className=\"flex flex-col gap-3\">\r\n                    <ContactActionItem \r\n                        icon={<Mail className=\"w-5 h-5\" />}\r\n                        title=\"Email Support\"\r\n                        subtitle=\"Get response within 24 hours\"\r\n                        onClick={() => window.location.href = \"mailto:support@luca.app\"}\r\n                    />\r\n                    \r\n                    <ContactActionItem \r\n                        icon={<Bug className=\"w-5 h-5\" />}\r\n                        title=\"Report a Bug\"\r\n                        subtitle=\"Something not working?\"\r\n                        onClick={() => router.push(\"/report-bug\")}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\home\\DesktopDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\home\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\new-event\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\report-bug\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":5,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":45,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"X"},"fix":{"range":[146,149],"text":""},"desc":"Remove unused variable \"X\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ArrowLeft, Bug, ImagePlus, Check, X, Loader2 } from \"lucide-react\";\r\n\r\n// --- COMPONENT: CUSTOM TEXT FIELD ---\r\ninterface LucaTextFieldProps extends React.InputHTMLAttributes<HTMLInputElement | HTMLTextAreaElement> {\r\n  label: string;\r\n  isTextArea?: boolean;\r\n}\r\n\r\nconst LucaTextField = ({ label, isTextArea = false, className, ...props }: LucaTextFieldProps) => {\r\n  return (\r\n    <div className=\"w-full\">\r\n      <label className=\"text-sm font-bold text-ui-black mb-2 block\">{label}</label>\r\n      {isTextArea ? (\r\n        <textarea \r\n          className={`w-full bg-ui-grey border border-ui-grey/50 rounded-xl px-4 py-3 text-sm text-ui-black font-medium outline-none focus:border-ui-accent-yellow focus:ring-1 focus:ring-ui-accent-yellow transition-all resize-none ${className}`}\r\n          rows={5}\r\n          {...props as React.TextareaHTMLAttributes<HTMLTextAreaElement>}\r\n        />\r\n      ) : (\r\n        <input \r\n          className={`w-full bg-ui-grey border border-ui-grey/50 rounded-xl px-4 py-3 text-sm text-ui-black font-medium outline-none focus:border-ui-accent-yellow focus:ring-1 focus:ring-ui-accent-yellow transition-all ${className}`}\r\n          {...props as React.InputHTMLAttributes<HTMLInputElement>}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- MAIN PAGE ---\r\nexport default function ReportBugPage() {\r\n  const router = useRouter();\r\n  \r\n  // State\r\n  const [subject, setSubject] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [showSuccess, setShowSuccess] = useState(false);\r\n\r\n  // Mock Handle Submit\r\n  const handleSubmit = () => {\r\n    if (!subject || !description) return;\r\n    \r\n    setIsSubmitting(true);\r\n    \r\n    // Simulate API Delay\r\n    setTimeout(() => {\r\n        setIsSubmitting(false);\r\n        setShowSuccess(true);\r\n        \r\n        // Auto go back after success\r\n        setTimeout(() => {\r\n            router.back();\r\n        }, 1500);\r\n    }, 1500);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full min-h-screen w-full bg-ui-background relative\">\r\n      \r\n      {/* 1. TOP BAR */}\r\n      <div className=\"px-5 pt-6 pb-4 flex items-center gap-4 bg-white sticky top-0 z-30 border-b border-gray-50\">\r\n        <button \r\n            onClick={() => router.back()} \r\n            className=\"w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center hover:bg-gray-100 transition-colors\"\r\n        >\r\n             <ArrowLeft className=\"w-5 h-5 text-ui-black\" />\r\n        </button>\r\n        <h1 className=\"text-xl font-bold font-display text-ui-black\">Report a Bug</h1>\r\n      </div>\r\n\r\n      {/* 2. SCROLLABLE CONTENT */}\r\n      <div className=\"flex-1 overflow-y-auto no-scrollbar pb-32\">\r\n        <div className=\"flex flex-col gap-4 p-5\">\r\n            \r\n            {/* SECTION: INTRO */}\r\n            <div className=\"bg-white rounded-2xl p-6 flex flex-col items-center text-center shadow-sm border border-gray-100\">\r\n                <div className=\"w-16 h-16 rounded-2xl bg-ui-accent-yellow/20 flex items-center justify-center mb-4 text-ui-black\">\r\n                    <Bug className=\"w-8 h-8\" />\r\n                </div>\r\n                <h2 className=\"text-lg font-bold text-ui-black mb-2\">Found an issue?</h2>\r\n                <p className=\"text-sm text-ui-dark-grey leading-relaxed max-w-xs\">\r\n                    Please describe the bug you encountered. Your feedback helps us make Luca better.\r\n                </p>\r\n            </div>\r\n\r\n            {/* SECTION: FORM */}\r\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 flex flex-col gap-5\">\r\n                <LucaTextField \r\n                    label=\"Subject\"\r\n                    placeholder=\"e.g., App crashes on split screen\"\r\n                    value={subject}\r\n                    onChange={(e) => setSubject(e.target.value)}\r\n                />\r\n                \r\n                <LucaTextField \r\n                    label=\"Description\"\r\n                    placeholder=\"Tell us what happened, steps to reproduce, etc.\"\r\n                    value={description}\r\n                    onChange={(e) => setDescription(e.target.value)}\r\n                    isTextArea={true}\r\n                />\r\n            </div>\r\n\r\n            {/* SECTION: ATTACHMENT */}\r\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\r\n                <h3 className=\"text-sm font-bold text-ui-black mb-1\">Screenshots (Optional)</h3>\r\n                <p className=\"text-xs text-ui-dark-grey mb-4\">Upload images to help us understand the issue.</p>\r\n                \r\n                <div className=\"flex gap-3\">\r\n                    {/* Add Button Placeholder */}\r\n                    <button className=\"w-20 h-20 rounded-xl bg-gray-50 border border-dashed border-gray-300 flex flex-col items-center justify-center gap-1 hover:bg-gray-100 transition-colors text-gray-400 hover:text-gray-600\">\r\n                        <ImagePlus className=\"w-6 h-6\" />\r\n                        <span className=\"text-[10px] font-medium\">Add</span>\r\n                    </button>\r\n                    \r\n                    {/* Contoh visual kalau ada foto (bisa dikomen kalo gak perlu) */}\r\n                    {/* <div className=\"w-20 h-20 rounded-xl bg-gray-200 border border-gray-100 overflow-hidden relative group\">\r\n                        <img src=\"https://via.placeholder.com/150\" className=\"w-full h-full object-cover\" />\r\n                        <button className=\"absolute top-1 right-1 bg-black/50 p-1 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                            <X className=\"w-3 h-3\" />\r\n                        </button>\r\n                    </div> */}\r\n                </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 3. BOTTOM BAR (STICKY) */}\r\n      <div className=\"fixed bottom-0 left-0 right-0 p-5 bg-white border-t border-gray-100 z-30 md:pl-72\">\r\n        {/* md:pl-72 itu kompensasi kalau ada sidebar di desktop */}\r\n        <button \r\n            onClick={handleSubmit}\r\n            disabled={!subject || !description || isSubmitting}\r\n            className={`w-full h-12 rounded-full font-bold text-sm flex items-center justify-center gap-2 transition-all shadow-lg ${\r\n                (!subject || !description) \r\n                ? \"bg-gray-200 text-gray-400 cursor-not-allowed\" \r\n                : \"bg-ui-accent-yellow text-ui-black hover:brightness-105 active:scale-95 shadow-ui-accent-yellow/20\"\r\n            }`}\r\n        >\r\n            {isSubmitting ? (\r\n                <>\r\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                    Sending...\r\n                </>\r\n            ) : (\r\n                \"Submit Report\"\r\n            )}\r\n        </button>\r\n      </div>\r\n\r\n      {/* SUCCESS TOAST OVERLAY */}\r\n      {showSuccess && (\r\n        <div className=\"absolute inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm animate-in fade-in\">\r\n            <div className=\"bg-ui-black text-white px-6 py-4 rounded-2xl shadow-xl flex flex-col items-center gap-3 animate-in zoom-in-95\">\r\n                <div className=\"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center text-white\">\r\n                    <Check className=\"w-6 h-6\" strokeWidth={3} />\r\n                </div>\r\n                <div className=\"text-center\">\r\n                    <h3 className=\"font-bold text-lg\">Thank You!</h3>\r\n                    <p className=\"text-xs text-gray-300\">Your report has been submitted.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\scan\\camera\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":93,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":93,"endColumn":17},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":142,"column":19,"nodeType":"JSXOpeningElement","endLine":142,"endColumn":62}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useRef, useEffect } from \"react\";\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\nimport { AlertCircle, Image, Camera } from \"lucide-react\";\r\nimport Header from \"@/components/ui/Header\";\r\nimport { useScan } from \"../scan-context\";\r\n\r\nexport default function CameraPage() {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const streamRef = useRef<MediaStream | null>(null);\r\n\r\n  const { setFile, setPreview, setError, setReceiptData } = useScan();\r\n  const [cameraError, setCameraError] = React.useState<string | null>(null);\r\n\r\n  // Function to stop camera\r\n  const stopCamera = () => {\r\n    if (videoRef.current) {\r\n      videoRef.current.srcObject = null;\r\n    }\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach((track) => track.stop());\r\n      streamRef.current = null;\r\n\r\n    }\r\n  };\r\n\r\n  // Camera ON hanya di /scan/camera, selain itu OFF\r\n  useEffect(() => {\r\n    if (pathname === \"/scan/camera\") {\r\n      const initCamera = async () => {\r\n        try {\r\n          setCameraError(null);\r\n          const stream = await navigator.mediaDevices.getUserMedia({\r\n            video: {\r\n              facingMode: \"environment\",\r\n              width: { ideal: 1280 },\r\n              height: { ideal: 720 },\r\n            },\r\n          });\r\n\r\n          if (videoRef.current) {\r\n            videoRef.current.srcObject = stream;\r\n            streamRef.current = stream;\r\n          }\r\n        } catch (err) {\r\n          const errorMsg =\r\n            err instanceof Error\r\n              ? err.message\r\n              : \"Could not access camera. Please check permissions.\";\r\n          setCameraError(errorMsg);\r\n        }\r\n      };\r\n\r\n      initCamera();\r\n    } else {\r\n      stopCamera();\r\n    }\r\n    return () => {\r\n      stopCamera();\r\n    };\r\n  }, [pathname]);\r\n\r\n  const handleCapturePhoto = async () => {\r\n    if (!videoRef.current || !canvasRef.current) return;\r\n\r\n    try {\r\n      const context = canvasRef.current.getContext(\"2d\");\r\n      if (!context) return;\r\n\r\n      canvasRef.current.width = videoRef.current.videoWidth;\r\n      canvasRef.current.height = videoRef.current.videoHeight;\r\n      context.drawImage(videoRef.current, 0, 0);\r\n\r\n      canvasRef.current.toBlob((blob) => {\r\n        if (!blob) return;\r\n\r\n        const file = new File([blob], \"receipt-photo.jpg\", {\r\n          type: \"image/jpeg\",\r\n        });\r\n\r\n        setFile(file);\r\n        setPreview(canvasRef.current!.toDataURL(\"image/jpeg\"));\r\n        setError(null);\r\n        setReceiptData(null);\r\n\r\n        stopCamera();\r\n        router.push(\"/scan/upload\");\r\n      }, \"image/jpeg\");\r\n    } catch (err) {\r\n      setError(\"Failed to capture photo. Please try again.\");\r\n    }\r\n  };\r\n\r\n  const handleUploadClick = () => {\r\n    stopCamera();\r\n    router.push(\"/scan/upload\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full min-h-screen w-full bg-ui-background\">\r\n      <Header variant=\"SCAN\" onLeftIconClick={() => router.push(\"/home\")} />\r\n\r\n      {/* CONTENT */}\r\n      <div className=\"flex-1 overflow-y-auto no-scrollbar px-5 py-6\">\r\n        <div className=\"max-w-2xl mx-auto h-full flex flex-col\">\r\n          {cameraError ? (\r\n            <div className=\"flex-1 flex flex-col items-center justify-center\">\r\n              <div className=\"bg-red-50 border border-red-200 rounded-2xl p-6 text-center\">\r\n                <AlertCircle className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\r\n                <p className=\"text-sm font-semibold text-red-700 mb-2\">Camera Access Denied</p>\r\n                <p className=\"text-sm text-red-600 mb-6\">{cameraError}</p>\r\n                <button\r\n                  onClick={handleUploadClick}\r\n                  className=\"px-4 py-2 bg-ui-accent-yellow text-ui-black font-bold rounded-lg hover:brightness-105 transition-all\"\r\n                >\r\n                  Upload File Instead\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"flex-1 bg-black rounded-2xl overflow-hidden mb-6 shadow-lg\">\r\n                <video\r\n                  ref={videoRef}\r\n                  autoPlay\r\n                  playsInline\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              </div>\r\n\r\n              {/* CAMERA CONTROLS */}\r\n              <div className=\"flex items-center justify-center gap-6 pb-6\">\r\n                {/* Upload Icon Button */}\r\n                <button\r\n                  onClick={handleUploadClick}\r\n                  className=\"w-14 h-14 bg-white rounded-full flex items-center justify-center shadow-lg hover:bg-gray-100 transition-colors\"\r\n                >\r\n                  <Image className=\"w-6 h-6 text-ui-black\" />\r\n                </button>\r\n\r\n                {/* Capture Button */}\r\n                <button\r\n                  onClick={handleCapturePhoto}\r\n                  className=\"w-16 h-16 bg-ui-accent-yellow rounded-full flex items-center justify-center shadow-lg hover:brightness-105 active:scale-95 transition-all\"\r\n                >\r\n                  <Camera className=\"w-8 h-8 text-ui-black\" />\r\n                </button>\r\n\r\n                {/* Spacer for alignment */}\r\n                <div className=\"w-14\"></div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Hidden Canvas */}\r\n      <canvas ref={canvasRef} className=\"hidden\" />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\scan\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\scan\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\scan\\result\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\scan\\scan-context.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\scan\\upload\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":59,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":17},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":101,"column":19,"nodeType":"JSXOpeningElement","endLine":101,"endColumn":93}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useRef } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Upload, AlertCircle, X, Loader2 } from \"lucide-react\";\r\nimport Header from \"@/components/ui/Header\";\r\nimport { useScan } from \"../scan-context\";\r\nimport { scanReceipt } from \"@/app/action\";\r\n\r\nexport default function UploadPage() {\r\n  const router = useRouter();\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const { file, setFile, preview, setPreview, error, setError, loading, setLoading, setReceiptData } = useScan();\r\n\r\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const selectedFile = e.target.files?.[0];\r\n    if (!selectedFile) return;\r\n\r\n    if (!selectedFile.type.startsWith(\"image/\")) {\r\n      setError(\"Please select an image file\");\r\n      return;\r\n    }\r\n\r\n    setFile(selectedFile);\r\n    setError(null);\r\n    setReceiptData(null);\r\n\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => {\r\n      setPreview(reader.result as string);\r\n    };\r\n    reader.readAsDataURL(selectedFile);\r\n  };\r\n\r\n  const handleScan = async () => {\r\n    if (!file) {\r\n      setError(\"Please select an image file first\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      const result = await scanReceipt(formData);\r\n\r\n      if (!result.success || result.error) {\r\n        setError(result.error || \"Failed to scan receipt\");\r\n        setReceiptData(null);\r\n      } else if (result.data) {\r\n        setReceiptData(result.data);\r\n        setError(null);\r\n        router.push(\"/scan/result\");\r\n      }\r\n    } catch (err) {\r\n      setError(\"Failed to scan receipt. Please try again.\");\r\n      setReceiptData(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    router.push(\"/scan/camera\");\r\n  };\r\n\r\n  const handleClear = () => {\r\n    setFile(null);\r\n    setPreview(null);\r\n    setError(null);\r\n    setReceiptData(null);\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = \"\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full min-h-screen w-full bg-ui-background\">\r\n      <Header variant=\"SCAN\" onLeftIconClick={() => router.push(\"/home\")} />\r\n\r\n      {/* CONTENT */}\r\n      <div className=\"flex-1 overflow-y-auto no-scrollbar px-5 py-6\">\r\n        <div className=\"max-w-2xl mx-auto\">\r\n          {/* FILE UPLOAD AREA */}\r\n          <div className=\"bg-white rounded-2xl border-2 border-dashed border-gray-200 p-8 text-center mb-6 shadow-sm\">\r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={handleFileSelect}\r\n              className=\"hidden\"\r\n            />\r\n\r\n            {preview ? (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"relative w-full max-h-64 rounded-xl overflow-hidden bg-gray-100\">\r\n                  <img src={preview} alt=\"Preview\" className=\"w-full h-full object-cover\" />\r\n                </div>\r\n                <div className=\"flex gap-3\">\r\n                  <button\r\n                    onClick={() => fileInputRef.current?.click()}\r\n                    className=\"flex-1 px-4 py-2 bg-gray-100 text-ui-black font-semibold text-sm rounded-xl hover:bg-gray-200 transition-colors\"\r\n                  >\r\n                    Change Image\r\n                  </button>\r\n                  <button\r\n                    onClick={handleClear}\r\n                    className=\"flex-1 px-4 py-2 bg-red-500 text-white font-semibold text-sm rounded-xl hover:bg-red-600 transition-colors flex items-center justify-center gap-2\"\r\n                  >\r\n                    <X className=\"w-4 h-4\" /> Clear\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div\r\n                onClick={() => fileInputRef.current?.click()}\r\n                className=\"cursor-pointer space-y-4\"\r\n              >\r\n                <div className=\"flex justify-center\">\r\n                  <div className=\"w-16 h-16 bg-ui-accent-yellow/10 rounded-full flex items-center justify-center\">\r\n                    <Upload className=\"w-8 h-8 text-ui-accent-yellow\" />\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm font-semibold text-ui-black\">Click to upload or drag and drop</p>\r\n                  <p className=\"text-xs text-ui-dark-grey mt-1\">PNG, JPG, GIF up to 10MB</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* ERROR MESSAGE */}\r\n          {error && (\r\n            <div className=\"bg-red-50 border border-red-200 rounded-xl p-4 flex items-start gap-3 mb-6\">\r\n              <AlertCircle className=\"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5\" />\r\n              <div>\r\n                <p className=\"text-sm font-semibold text-red-700\">Error</p>\r\n                <p className=\"text-sm text-red-600 mt-1\">{error}</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* SCAN BUTTON */}\r\n          {file && !error && (\r\n            <button\r\n              onClick={handleScan}\r\n              disabled={loading}\r\n              className=\"w-full py-3 bg-ui-accent-yellow text-ui-black font-bold rounded-xl hover:brightness-105 active:scale-[0.98] transition-all shadow-lg shadow-yellow-500/20 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 mb-3\"\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                  Scanning...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Upload className=\"w-5 h-5\" />\r\n                  Scan Receipt\r\n                </>\r\n              )}\r\n            </button>\r\n          )}\r\n\r\n          {/* BACK TO CAMERA */}\r\n          <button\r\n            onClick={handleReset}\r\n            className=\"w-full py-2 bg-gray-100 text-ui-black font-semibold text-sm rounded-xl hover:bg-gray-200 transition-colors\"\r\n          >\r\n            Back to Camera\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\app\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\features\\EventList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\features\\EventsListWithActivities.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[533,536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[533,536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":248,"column":13,"nodeType":"JSXOpeningElement","endLine":252,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { getEventsWithActivities, EventWithActivities } from \"@/lib/firestore\";\r\nimport { Calendar, MapPin, Loader2, AlertCircle, Receipt } from \"lucide-react\";\r\n\r\ninterface EventsListProps {\r\n  userId: string;\r\n}\r\n\r\n// ==================== SAFE DATE UTILITY ====================\r\n\r\n/**\r\n * Safely convert various date formats to JS Date object\r\n * Handles: Firestore Timestamp, JS Date, string, number, serialized Timestamp\r\n */\r\nfunction getSafeDate(dateInput: any): Date {\r\n  // Case 1: Null or undefined\r\n  if (!dateInput) {\r\n    return new Date();\r\n  }\r\n\r\n  // Case 2: Already a JS Date object\r\n  if (dateInput instanceof Date) {\r\n    return dateInput;\r\n  }\r\n\r\n  // Case 3: Firestore Timestamp with .toDate() method\r\n  if (typeof dateInput.toDate === \"function\") {\r\n    return dateInput.toDate();\r\n  }\r\n\r\n  // Case 4: Serialized Firestore Timestamp (has seconds and nanoseconds)\r\n  if (\r\n    typeof dateInput === \"object\" &&\r\n    \"seconds\" in dateInput &&\r\n    \"nanoseconds\" in dateInput\r\n  ) {\r\n    // Convert Firestore Timestamp format to JS Date\r\n    return new Date(dateInput.seconds * 1000 + dateInput.nanoseconds / 1000000);\r\n  }\r\n\r\n  // Case 5: String or number timestamp\r\n  if (typeof dateInput === \"string\") {\r\n    // Handle DD/MM/YYYY format\r\n    const ddmmyyyy = dateInput.match(/^(\\d{2})\\/(\\d{2})\\/(\\d{4})$/);\r\n    if (ddmmyyyy) {\r\n      return new Date(parseInt(ddmmyyyy[3]), parseInt(ddmmyyyy[2]) - 1, parseInt(ddmmyyyy[1]));\r\n    }\r\n    const parsedDate = new Date(dateInput);\r\n    if (!isNaN(parsedDate.getTime())) {\r\n      return parsedDate;\r\n    }\r\n  }\r\n\r\n  if (typeof dateInput === \"number\") {\r\n    const parsedDate = new Date(dateInput);\r\n    if (!isNaN(parsedDate.getTime())) {\r\n      return parsedDate;\r\n    }\r\n  }\r\n\r\n  // Fallback: return current date if unable to parse\r\n  console.warn(\"Unable to parse date:\", dateInput);\r\n  return new Date();\r\n}\r\n\r\n/**\r\n * Component to display Events with their Activities\r\n * Fetches nested Firestore data: users/{userId}/events/{eventId}/activities\r\n */\r\nexport default function EventsListWithActivities({ userId }: EventsListProps) {\r\n  const [events, setEvents] = useState<EventWithActivities[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    // Fetch events when component mounts or userId changes\r\n    const fetchEvents = async () => {\r\n      if (!userId) {\r\n        setError(\"User ID is required\");\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        const data = await getEventsWithActivities(userId);\r\n        setEvents(data);\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch events:\", err);\r\n        setError(\"Failed to load events. Please try again.\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchEvents();\r\n  }, [userId]);\r\n\r\n  // ==================== LOADING STATE ====================\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-12 gap-3\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin text-ui-accent-yellow\" />\r\n        <p className=\"text-sm text-ui-dark-grey font-medium\">\r\n          Loading events...\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ==================== ERROR STATE ====================\r\n  if (error) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-12 gap-3\">\r\n        <div className=\"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center\">\r\n          <AlertCircle className=\"w-6 h-6 text-red-500\" />\r\n        </div>\r\n        <p className=\"text-sm text-red-600 font-medium\">{error}</p>\r\n        <button\r\n          onClick={() => window.location.reload()}\r\n          className=\"text-xs text-ui-accent-yellow font-semibold hover:underline\"\r\n        >\r\n          Retry\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ==================== EMPTY STATE ====================\r\n  if (events.length === 0) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-12 gap-3\">\r\n        <div className=\"w-12 h-12 rounded-full bg-ui-grey flex items-center justify-center\">\r\n          <Receipt className=\"w-6 h-6 text-ui-dark-grey\" />\r\n        </div>\r\n        <p className=\"text-sm text-ui-dark-grey font-medium\">\r\n          No events found\r\n        </p>\r\n        <p className=\"text-xs text-ui-dark-grey/60\">\r\n          Create your first event to get started\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ==================== EVENTS LIST ====================\r\n  return (\r\n    <div className=\"flex flex-col gap-4\">\r\n      {events.map((event) => (\r\n        <EventCard key={event.id} event={event} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n// ==================== EVENT CARD COMPONENT ====================\r\n\r\ninterface EventCardProps {\r\n  event: EventWithActivities;\r\n}\r\n\r\nfunction EventCard({ event }: EventCardProps) {\r\n  // Safely convert date to JS Date object (handles Timestamp, Date, string, serialized)\r\n  const eventDate = getSafeDate(event.date);\r\n  \r\n  // Format date as DD/MM/YYYY\r\n  const formattedDate = eventDate.toLocaleDateString(\"en-GB\", {\r\n    day: \"2-digit\",\r\n    month: \"2-digit\",\r\n    year: \"numeric\",\r\n  });\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl border border-ui-grey/30 p-5 shadow-sm hover:shadow-md transition-shadow\">\r\n      {/* Event Header */}\r\n      <div className=\"flex items-start justify-between mb-3\">\r\n        <div className=\"flex-1\">\r\n          <h3 className=\"text-lg font-bold text-ui-black mb-2\">\r\n            {event.name}\r\n          </h3>\r\n          <div className=\"flex flex-col gap-1.5\">\r\n            <div className=\"flex items-center gap-2 text-sm text-ui-dark-grey\">\r\n              <MapPin className=\"w-4 h-4\" />\r\n              <span>{event.location}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 text-sm text-ui-dark-grey\">\r\n              <Calendar className=\"w-4 h-4\" />\r\n              <span>{formattedDate}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Participants Avatar Stack */}\r\n        {event.participants && event.participants.length > 0 && (\r\n          <ParticipantsAvatarStack participants={event.participants} />\r\n        )}\r\n      </div>\r\n\r\n      {/* Activities Section */}\r\n      <div className=\"pt-4 border-t border-ui-grey/20\">\r\n        <p className=\"text-xs font-semibold text-ui-dark-grey mb-3\">\r\n          Activities ({event.activities.length})\r\n        </p>\r\n\r\n        {event.activities.length === 0 ? (\r\n          <p className=\"text-xs text-ui-dark-grey/60 italic\">\r\n            No activities yet\r\n          </p>\r\n        ) : (\r\n          <div className=\"flex flex-col gap-2\">\r\n            {event.activities.map((activity) => (\r\n              <ActivityItem key={activity.id} activity={activity} />\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ==================== PARTICIPANTS AVATAR STACK ====================\r\n\r\ninterface ParticipantsAvatarStackProps {\r\n  participants: { name: string; avatar?: string }[];\r\n  maxVisible?: number;\r\n}\r\n\r\nfunction ParticipantsAvatarStack({ \r\n  participants, \r\n  maxVisible = 3 \r\n}: ParticipantsAvatarStackProps) {\r\n  const visibleParticipants = participants.slice(0, maxVisible);\r\n  const remainingCount = participants.length - maxVisible;\r\n\r\n  return (\r\n    <div className=\"flex items-center -space-x-2\">\r\n      {visibleParticipants.map((participant, index) => (\r\n        <div\r\n          key={index}\r\n          className=\"w-8 h-8 rounded-full border-2 border-white bg-ui-accent-yellow/20 flex items-center justify-center overflow-hidden\"\r\n          title={participant.name}\r\n        >\r\n          {participant.avatar ? (\r\n            <img\r\n              src={participant.avatar}\r\n              alt={participant.name}\r\n              className=\"w-full h-full object-cover\"\r\n            />\r\n          ) : (\r\n            <span className=\"text-xs font-bold text-ui-black\">\r\n              {participant.name.charAt(0).toUpperCase()}\r\n            </span>\r\n          )}\r\n        </div>\r\n      ))}\r\n      \r\n      {remainingCount > 0 && (\r\n        <div className=\"w-8 h-8 rounded-full border-2 border-white bg-ui-dark-grey/20 flex items-center justify-center\">\r\n          <span className=\"text-xs font-bold text-ui-black\">\r\n            +{remainingCount}\r\n          </span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// ==================== ACTIVITY ITEM COMPONENT ====================\r\n\r\ninterface ActivityItemProps {\r\n  activity: {\r\n    id: string;\r\n    title: string;\r\n    category: string;\r\n    payerName: string;\r\n    total: number;\r\n  };\r\n}\r\n\r\nfunction ActivityItem({ activity }: ActivityItemProps) {\r\n  // Format currency as IDR\r\n  const formattedAmount = new Intl.NumberFormat(\"id-ID\", {\r\n    style: \"currency\",\r\n    currency: \"IDR\",\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0,\r\n  }).format(activity.total);\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-between py-2.5 px-3 bg-ui-grey/30 rounded-xl hover:bg-ui-grey/50 transition-colors\">\r\n      {/* Left Side: Icon + Title + Payer */}\r\n      <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n        {/* Category Icon */}\r\n        <div className=\"w-10 h-10 rounded-full bg-white flex items-center justify-center flex-shrink-0\">\r\n          <Receipt className=\"w-5 h-5 text-ui-black\" />\r\n        </div>\r\n        \r\n        {/* Title and Payer Info */}\r\n        <div className=\"flex flex-col min-w-0\">\r\n          <span className=\"text-sm font-semibold text-ui-black truncate\">\r\n            {activity.title}\r\n          </span>\r\n          <span className=\"text-xs text-ui-dark-grey\">\r\n            Paid by {activity.payerName}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Right Side: Amount */}\r\n      <div className=\"flex-shrink-0 ml-3\">\r\n        <span className=\"text-sm font-bold text-red-500\">\r\n          {formattedAmount}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\features\\NewActivityModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\features\\NewEventModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getAvatarSrc' is assigned a value but never used.","line":17,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":19},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":289,"column":25,"nodeType":"JSXOpeningElement","endLine":293,"endColumn":27},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":384,"column":35,"nodeType":"JSXOpeningElement","endLine":384,"endColumn":115}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { X, Calendar, Type, Loader2, Search, Check, MapPin, ImagePlus } from \"lucide-react\";\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport { getContacts, ContactData } from \"@/lib/firebase-contacts\";\r\nimport { uploadEventImage } from \"@/lib/firebase-storage\";\r\n\r\n\r\n// Helper: Get avatar color\r\nconst getAvatarColor = (name: string) => {\r\n  const colors = [\"bg-red-100\", \"bg-blue-100\", \"bg-green-100\", \"bg-orange-100\", \"bg-purple-100\", \"bg-teal-100\"];\r\n  return colors[name.length % colors.length];\r\n};\r\n\r\n// Helper: Get avatar src\r\nconst getAvatarSrc = (avatarName: string) => {\r\n  if (avatarName?.startsWith(\"http\")) return avatarName;\r\n  return `https://api.dicebear.com/7.x/avataaars/svg?seed=${avatarName || \"user\"}`;\r\n};\r\n\r\n// Helper: Alphabetical sort, non-alphabetic at bottom\r\nconst alphaSort = (a: { name: string }, b: { name: string }) => {\r\n  const isAlpha = (str: string) => /^[A-Za-z]/.test(str);\r\n  const aAlpha = isAlpha(a.name);\r\n  const bAlpha = isAlpha(b.name);\r\n  if (aAlpha && !bAlpha) return -1;\r\n  if (!aAlpha && bAlpha) return 1;\r\n  return a.name.localeCompare(b.name, undefined, { sensitivity: 'base' });\r\n};\r\n\r\ninterface NewEventModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (data: {\r\n    title: string;\r\n    date: Date;\r\n    location: string;\r\n    imageUrl: string;\r\n    participants: { name: string; avatarName: string }[];\r\n  }) => void;\r\n  isLoading?: boolean;\r\n  initialData?: {\r\n    title: string;\r\n    date: string;\r\n    location?: string;\r\n    imageUrl?: string;\r\n    participants: { name: string; avatarName: string }[];\r\n  } | null;\r\n}\r\n\r\nexport default function NewEventModal({ \r\n  isOpen, \r\n  onClose, \r\n  onSubmit, \r\n  isLoading = false,\r\n  initialData = null \r\n}: NewEventModalProps) {\r\n  const { user } = useAuth();\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [date, setDate] = useState(\"\");\r\n  const [location, setLocation] = useState(\"\");\r\n  const [imageFile, setImageFile] = useState<File | null>(null);\r\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [selectedContacts, setSelectedContacts] = useState<ContactData[]>([]);\r\n  const [searchContact, setSearchContact] = useState(\"\");\r\n  const [contacts, setContacts] = useState<ContactData[]>([]);\r\n  const [contactsLoading, setContactsLoading] = useState(false);\r\n\r\n  // --- EFFECT: FETCH CONTACTS FROM FIREBASE ---\r\n  useEffect(() => {\r\n    if (isOpen && user?.uid) {\r\n      setContactsLoading(true);\r\n      getContacts(user.uid)\r\n        .then((data) => setContacts(data))\r\n        .catch((err) => console.error(\"Failed to fetch contacts:\", err))\r\n        .finally(() => setContactsLoading(false));\r\n    }\r\n  }, [isOpen, user?.uid]);\r\n\r\n  // --- EFFECT: ISI FORM SAAT MODAL DIBUKA (EDIT MODE) ---\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n        if (initialData) {\r\n            // Edit Mode\r\n            setTitle(initialData.title);\r\n            setLocation(initialData.location || \"\");\r\n            setImagePreview(initialData.imageUrl || null);\r\n            setImageFile(null);\r\n            // Parse DD/MM/YYYY or other date formats to YYYY-MM-DD for input type=\"date\"\r\n            let parsedDate: Date;\r\n            const ddmmyyyy = initialData.date.match?.(/^(\\d{2})\\/(\\d{2})\\/(\\d{4})$/);\r\n            if (ddmmyyyy) {\r\n              parsedDate = new Date(parseInt(ddmmyyyy[3]), parseInt(ddmmyyyy[2]) - 1, parseInt(ddmmyyyy[1]));\r\n            } else {\r\n              parsedDate = new Date(initialData.date);\r\n            }\r\n            const isoDate = !isNaN(parsedDate.getTime()) ? parsedDate.toISOString().split('T')[0] : new Date().toISOString().split('T')[0];\r\n            setDate(isoDate);\r\n            // Filter user sendiri dari list participants biar gak dobel\r\n            const others = initialData.participants.filter(p => p.name !== \"You\" && p.name !== user?.displayName);\r\n            setSelectedContacts(others.map(p => ({\r\n              id: p.name,\r\n              name: p.name,\r\n              avatarName: p.avatarName,\r\n              bankAccounts: [],\r\n              description: \"\",\r\n              phoneNumber: \"\",\r\n              userId: \"\",\r\n            })));\r\n        } else {\r\n            // Create Mode (Reset)\r\n            setTitle(\"\");\r\n            setDate(new Date().toISOString().split('T')[0]);\r\n            setLocation(\"\");\r\n            setImageFile(null);\r\n            setImagePreview(null);\r\n            setSelectedContacts([]);\r\n        }\r\n        setSearchContact(\"\");\r\n    }\r\n  }, [isOpen, initialData, user?.displayName]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const toggleParticipant = (contact: ContactData) => {\r\n    const exists = selectedContacts.find(c => c.id === contact.id || c.name === contact.name);\r\n    if (exists) {\r\n      setSelectedContacts(selectedContacts.filter(c => c.name !== contact.name));\r\n    } else {\r\n      setSelectedContacts([...selectedContacts, contact]);\r\n    }\r\n  };\r\n\r\n  const handleImageSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      setImageFile(file);\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => setImagePreview(reader.result as string);\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const removeImage = () => {\r\n    setImageFile(null);\r\n    setImagePreview(null);\r\n    if (fileInputRef.current) fileInputRef.current.value = \"\";\r\n  };\r\n\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!title.trim() || !user?.uid) return;\r\n    // Require at least one contact selected (so total participants is at least 2)\r\n    if (selectedContacts.length < 1) {\r\n      alert(\"Please select at least one participant to create an event.\");\r\n      return;\r\n    }\r\n\r\n    let imageUrl = initialData?.imageUrl || \"\";\r\n\r\n    // Upload image if a new file was selected\r\n    if (imageFile) {\r\n      try {\r\n        setUploading(true);\r\n        imageUrl = await uploadEventImage(user.uid, imageFile);\r\n      } catch (err) {\r\n        console.error(\"Image upload failed:\", err);\r\n        alert(\"Failed to upload image. Event will be created without image.\");\r\n        imageUrl = \"\";\r\n      } finally {\r\n        setUploading(false);\r\n      }\r\n    }\r\n\r\n    // Sort participants before submit\r\n    const participants = selectedContacts\r\n      .slice()\r\n      .sort(alphaSort)\r\n      .map(c => ({\r\n        name: c.name,\r\n        avatarName: c.avatarName || c.name,\r\n      }));\r\n    onSubmit({ title, date: new Date(date), location, imageUrl, participants });\r\n  };\r\n\r\n  // Filter and sort Contacts from Firebase data\r\n  const filteredContacts = contacts\r\n    .filter(c => c.name.toLowerCase().includes(searchContact.toLowerCase()))\r\n    .sort(alphaSort);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in\">\r\n      <div \r\n        className=\"bg-white w-full max-w-lg rounded-3xl p-6 shadow-2xl animate-in zoom-in-95 flex flex-col max-h-[90vh]\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex justify-between items-center mb-6 shrink-0\">\r\n          <div>\r\n            <h3 className=\"font-bold text-xl text-ui-black font-display\">\r\n                {initialData ? \"Edit Event\" : \"New Event\"}\r\n            </h3>\r\n            <p className=\"text-xs text-gray-500\">\r\n                {initialData ? \"Update event details\" : \"Create a new bill splitting group\"}\r\n            </p>\r\n          </div>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\">\r\n            <X className=\"w-5 h-5 text-gray-400\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Form Body */}\r\n        <div className=\"flex-1 overflow-y-auto pr-2 -mr-2 no-scrollbar\">\r\n            <form id=\"createEventForm\" onSubmit={handleSubmit} className=\"flex flex-col gap-5\">\r\n            \r\n            {/* Input Title */}\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-xs font-bold text-gray-400 ml-1 uppercase tracking-wider\">Event Name</label>\r\n              <div className=\"relative\">\r\n                <div className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\">\r\n                  <Type className=\"w-4 h-4\" />\r\n                </div>\r\n                <input \r\n                  autoFocus\r\n                  type=\"text\" \r\n                  placeholder=\"e.g. Trip to Japan\" \r\n                  value={title}\r\n                  onChange={(e) => setTitle(e.target.value)}\r\n                  className=\"w-full h-12 pl-11 pr-4 rounded-xl bg-gray-50 border border-transparent focus:bg-white focus:border-ui-accent-yellow focus:ring-4 focus:ring-ui-accent-yellow/10 transition-all outline-none font-medium text-ui-black\"\r\n                />\r\n              </div>\r\n              {title.trim().length === 0 && (\r\n                <div className=\"mt-1 px-3 py-2 bg-yellow-50 border border-yellow-200 text-yellow-700 text-xs rounded-lg flex items-center gap-2\">\r\n                <svg className=\"w-4 h-4 text-yellow-500\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\r\n                Event name is required.\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Input Date */}\r\n            <div className=\"space-y-1\">\r\n                <label className=\"text-xs font-bold text-gray-400 ml-1 uppercase tracking-wider\">Date</label>\r\n                <div className=\"relative\">\r\n                    <div className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\">\r\n                        <Calendar className=\"w-4 h-4\" />\r\n                    </div>\r\n                    <input \r\n                        type=\"date\" \r\n                        value={date}\r\n                        onChange={(e) => setDate(e.target.value)}\r\n                        className=\"w-full h-12 pl-11 pr-4 rounded-xl bg-gray-50 border border-transparent focus:bg-white focus:border-ui-accent-yellow focus:ring-4 focus:ring-ui-accent-yellow/10 transition-all outline-none font-medium text-ui-black\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Input Location */}\r\n            <div className=\"space-y-1\">\r\n                <label className=\"text-xs font-bold text-gray-400 ml-1 uppercase tracking-wider\">Location</label>\r\n                <div className=\"relative\">\r\n                    <div className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\">\r\n                        <MapPin className=\"w-4 h-4\" />\r\n                    </div>\r\n                    <input \r\n                        type=\"text\" \r\n                        placeholder=\"e.g. Bali, Indonesia\" \r\n                        value={location}\r\n                        onChange={(e) => setLocation(e.target.value)}\r\n                        className=\"w-full h-12 pl-11 pr-4 rounded-xl bg-gray-50 border border-transparent focus:bg-white focus:border-ui-accent-yellow focus:ring-4 focus:ring-ui-accent-yellow/10 transition-all outline-none font-medium text-ui-black\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Image Upload */}\r\n            <div className=\"space-y-1\">\r\n                <label className=\"text-xs font-bold text-gray-400 ml-1 uppercase tracking-wider\">Event Image</label>\r\n                <input \r\n                    ref={fileInputRef}\r\n                    type=\"file\" \r\n                    accept=\"image/*\" \r\n                    onChange={handleImageSelect}\r\n                    className=\"hidden\"\r\n                />\r\n                {imagePreview ? (\r\n                    <div className=\"relative rounded-xl overflow-hidden border border-gray-100 group\">\r\n                        <img \r\n                            src={imagePreview} \r\n                            alt=\"Preview\" \r\n                            className=\"w-full h-36 object-cover\"\r\n                        />\r\n                        <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all flex items-center justify-center gap-2 opacity-0 group-hover:opacity-100\">\r\n                            <button \r\n                                type=\"button\"\r\n                                onClick={() => fileInputRef.current?.click()}\r\n                                className=\"px-3 py-1.5 bg-white rounded-lg text-xs font-bold text-ui-black shadow-sm\"\r\n                            >\r\n                                Change\r\n                            </button>\r\n                            <button \r\n                                type=\"button\"\r\n                                onClick={removeImage}\r\n                                className=\"px-3 py-1.5 bg-red-500 rounded-lg text-xs font-bold text-white shadow-sm\"\r\n                            >\r\n                                Remove\r\n                            </button>\r\n                        </div>\r\n                        {uploading && (\r\n                            <div className=\"absolute inset-0 bg-white/70 flex items-center justify-center\">\r\n                                <Loader2 className=\"w-6 h-6 animate-spin text-ui-accent-yellow\" />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ) : (\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => fileInputRef.current?.click()}\r\n                        className=\"w-full h-28 rounded-xl border-2 border-dashed border-gray-200 flex flex-col items-center justify-center gap-2 text-gray-400 hover:border-ui-accent-yellow hover:text-ui-black hover:bg-ui-accent-yellow/5 transition-all cursor-pointer group\"\r\n                    >\r\n                        <ImagePlus className=\"w-6 h-6 group-hover:text-ui-accent-yellow\" />\r\n                        <span className=\"text-xs font-medium\">Click to add event image</span>\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* Participants */}\r\n            <div className=\"space-y-2\">\r\n                <div className=\"flex justify-between items-end\">\r\n                    <label className=\"text-xs font-bold text-gray-400 ml-1 uppercase tracking-wider\">Invite Friends</label>\r\n                    <span className=\"text-xs font-bold text-ui-accent-yellow\">{selectedContacts.length} Selected</span>\r\n                </div>\r\n                {/* Warn if not enough participants */}\r\n                {selectedContacts.length < 1 && (\r\n                  <div className=\"mb-2 px-3 py-2 bg-yellow-50 border border-yellow-200 text-yellow-700 text-xs rounded-lg flex items-center gap-2\">\r\n                    <svg className=\"w-4 h-4 text-yellow-500\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\r\n                    Please select at least one participant to create an event.\r\n                  </div>\r\n                )}\r\n                {/* Search */}\r\n                <div className=\"relative mb-2\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400\" />\r\n                    <input \r\n                        type=\"text\"\r\n                        placeholder=\"Search contacts...\"\r\n                        value={searchContact}\r\n                        onChange={(e) => setSearchContact(e.target.value)}\r\n                        className=\"w-full h-9 pl-9 pr-3 rounded-lg bg-white border border-gray-200 text-xs focus:border-ui-accent-yellow outline-none transition-all\"\r\n                    />\r\n                </div>\r\n                {/* Grid List */}\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-55 overflow-y-auto no-scrollbar p-1\">\r\n                    {contactsLoading ? (\r\n                        <div className=\"col-span-1 sm:col-span-2 flex items-center justify-center py-8 text-gray-400\">\r\n                            <Loader2 className=\"w-5 h-5 animate-spin mr-2\" />\r\n                            <span className=\"text-xs\">Loading contacts...</span>\r\n                        </div>\r\n                    ) : filteredContacts.length > 0 ? (\r\n                        filteredContacts.map((contact) => {\r\n                          const isSelected = selectedContacts.some(c => c.id === contact.id || c.name === contact.name);\r\n                          // Use the actual avatarName from the contact, fallback to Dicebear if not present\r\n                          const avatarSrc = contact.avatarName?.startsWith(\"http\")\r\n                            ? contact.avatarName\r\n                            : contact.avatarName\r\n                              ? `https://api.dicebear.com/7.x/avataaars/svg?seed=${contact.avatarName}`\r\n                              : `https://api.dicebear.com/7.x/avataaars/svg?seed=${contact.name}`;\r\n                          const bgColor = getAvatarColor(contact.name);\r\n\r\n                          return (\r\n                            <div \r\n                              key={contact.id}\r\n                              onClick={() => toggleParticipant(contact)}\r\n                              className={`\r\n                                flex items-center gap-3 p-2 rounded-xl border cursor-pointer transition-all select-none\r\n                                ${isSelected \r\n                                  ? \"bg-ui-accent-yellow/10 border-ui-accent-yellow ring-1 ring-ui-accent-yellow\" \r\n                                  : \"bg-white border-gray-100 hover:border-gray-300 hover:bg-gray-50\"\r\n                                }\r\n                              `}\r\n                            >\r\n                              <div className=\"relative shrink-0\">\r\n                                <div className={`w-9 h-9 rounded-full overflow-hidden border border-gray-100 ${bgColor}`}>\r\n                                  <img src={avatarSrc} alt={contact.name} className=\"w-full h-full object-cover\"/>\r\n                                </div>\r\n                                {isSelected && (\r\n                                  <div className=\"absolute -bottom-1 -right-1 bg-ui-accent-yellow rounded-full p-0.5 border-2 border-white shadow-sm\">\r\n                                    <Check className=\"w-2.5 h-2.5 text-ui-black\" strokeWidth={4} />\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                              <span className={`text-sm font-medium truncate ${isSelected ? \"text-ui-black font-bold\" : \"text-gray-600\"}`}>\r\n                                {contact.name}\r\n                              </span>\r\n                            </div>\r\n                          )\r\n                        })\r\n                    ) : (\r\n                        <div className=\"col-span-1 sm:col-span-2 text-center py-8 text-gray-400 border-2 border-dashed border-gray-100 rounded-xl\">\r\n                            <p className=\"text-xs\">No contacts found.</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            </form>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex gap-3 mt-6 pt-4 border-t border-gray-50 shrink-0\">\r\n            <button \r\n                type=\"button\" \r\n                onClick={onClose} \r\n                className=\"flex-1 h-12 rounded-xl bg-gray-100 font-bold text-gray-500 hover:bg-gray-200 transition-colors text-sm\"\r\n            >\r\n                Cancel\r\n            </button>\r\n            <button \r\n              type=\"submit\"\r\n              form=\"createEventForm\"\r\n              disabled={!title.trim() || isLoading || uploading || selectedContacts.length < 1}\r\n              className=\"flex-1 h-12 rounded-xl bg-ui-accent-yellow text-ui-black font-bold shadow-lg shadow-ui-accent-yellow/20 hover:brightness-105 active:scale-95 transition-all text-sm flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed\"\r\n            >\r\n              {(isLoading || uploading) ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : (initialData ? \"Save Changes\" : \"Create Event\")}\r\n            </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\features\\SummaryModel.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[635,638],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[635,638],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":101,"column":45,"nodeType":"JSXOpeningElement","endLine":101,"endColumn":146},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":101,"column":45,"nodeType":"JSXOpeningElement","endLine":101,"endColumn":146},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":115,"column":45,"nodeType":"JSXOpeningElement","endLine":115,"endColumn":144},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":115,"column":45,"nodeType":"JSXOpeningElement","endLine":115,"endColumn":144},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":149,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8015,8018],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8015,8018],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":159,"column":21,"nodeType":"JSXOpeningElement","endLine":159,"endColumn":124},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":159,"column":21,"nodeType":"JSXOpeningElement","endLine":159,"endColumn":124},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":173,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":173,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9393,9396],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9393,9396],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useMemo } from \"react\";\r\nimport { X, ArrowRight, Check, ChevronDown, ChevronUp, Share2, Receipt } from \"lucide-react\";\r\nimport { calculateSummary } from \"@/lib/settlement-logic\";\r\n\r\n// Helper Avatar (Sama kayak sebelumnya)\r\nconst getAvatarUrl = (name: string) => `https://api.dicebear.com/7.x/avataaars/svg?seed=${name}`;\r\n\r\n// Helper Currency\r\nconst formatCurrency = (amount: number) => \r\n  new Intl.NumberFormat(\"id-ID\", { style: \"currency\", currency: \"IDR\", minimumFractionDigits: 0 }).format(amount);\r\n\r\ninterface SummaryModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  event: any;\r\n}\r\n\r\nexport default function SummaryModal({ isOpen, onClose, event }: SummaryModalProps) {\r\n  const [activeTab, setActiveTab] = useState<'SETTLEMENT' | 'DETAILS'>('SETTLEMENT');\r\n  \r\n  // Calculate Data\r\n  const summaryData = useMemo(() => {\r\n      if (!event) return null;\r\n      return calculateSummary(event);\r\n  }, [event]);\r\n\r\n  if (!isOpen || !summaryData) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-70 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in\">\r\n      <div \r\n        className=\"bg-white w-full max-w-4xl h-[85vh] rounded-3xl shadow-2xl flex overflow-hidden animate-in zoom-in-95\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        \r\n        {/* SIDEBAR / HEADER SECTION (Left Panel) */}\r\n        <div className=\"w-1/3 bg-gray-50 border-r border-gray-100 flex flex-col p-6\">\r\n            <h2 className=\"text-2xl font-bold font-display text-ui-black mb-1\">{event.title}</h2>\r\n            <p className=\"text-sm text-gray-500 mb-6\">Total Expense Summary</p>\r\n\r\n            <div className=\"bg-white p-4 rounded-2xl border border-gray-100 shadow-sm mb-6\">\r\n                <span className=\"block text-xs text-gray-400 font-bold uppercase tracking-wider mb-1\">Total Bill</span>\r\n                <span className=\"text-3xl font-bold text-ui-black\">\r\n                    {formatCurrency(summaryData.totalExpense)}\r\n                </span>\r\n            </div>\r\n\r\n            {/* Tabs Vertical Style */}\r\n            <div className=\"flex flex-col gap-2\">\r\n                <button \r\n                    onClick={() => setActiveTab('SETTLEMENT')}\r\n                    className={`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${activeTab === 'SETTLEMENT' ? 'bg-ui-accent-yellow text-ui-black font-bold shadow-sm' : 'hover:bg-gray-200 text-gray-500 font-medium'}`}\r\n                >\r\n                    <div className={`w-8 h-8 rounded-full flex items-center justify-center ${activeTab === 'SETTLEMENT' ? 'bg-white/30' : 'bg-gray-200'}`}>\r\n                        <Check className=\"w-4 h-4\" />\r\n                    </div>\r\n                    Settlement Plan\r\n                </button>\r\n                <button \r\n                    onClick={() => setActiveTab('DETAILS')}\r\n                    className={`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${activeTab === 'DETAILS' ? 'bg-ui-accent-yellow text-ui-black font-bold shadow-sm' : 'hover:bg-gray-200 text-gray-500 font-medium'}`}\r\n                >\r\n                    <div className={`w-8 h-8 rounded-full flex items-center justify-center ${activeTab === 'DETAILS' ? 'bg-white/30' : 'bg-gray-200'}`}>\r\n                        <Receipt className=\"w-4 h-4\" />\r\n                    </div>\r\n                    Consumption Details\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"mt-auto\">\r\n                <button className=\"w-full py-3 bg-ui-black text-white rounded-xl font-bold flex items-center justify-center gap-2 hover:opacity-90 transition-opacity\">\r\n                    <Share2 className=\"w-4 h-4\" /> Share Summary\r\n                </button>\r\n            </div>\r\n        </div>\r\n\r\n        {/* CONTENT SECTION (Right Panel) */}\r\n        <div className=\"flex-1 flex flex-col relative\">\r\n            {/* Close Button */}\r\n            <button onClick={onClose} className=\"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full transition-colors z-10\">\r\n                <X className=\"w-6 h-6 text-gray-400\" />\r\n            </button>\r\n\r\n            <div className=\"flex-1 overflow-y-auto p-8 pt-16 no-scrollbar\">\r\n                \r\n                {activeTab === 'SETTLEMENT' ? (\r\n                    // --- SETTLEMENT LIST ---\r\n                    <div className=\"max-w-md mx-auto flex flex-col gap-4\">\r\n                        {summaryData.settlements.length === 0 ? (\r\n                            <div className=\"text-center py-20 text-gray-400 border-2 border-dashed border-gray-100 rounded-3xl\">\r\n                                <p>No settlements needed.<br/>Everyone is squared up! ≡ƒÄë</p>\r\n                            </div>\r\n                        ) : (\r\n                            summaryData.settlements.map((item, idx) => (\r\n                                <div key={idx} className=\"flex items-center justify-between p-4 bg-white border border-gray-100 rounded-2xl shadow-sm hover:shadow-md transition-all\">\r\n                                    {/* Transfer Flow */}\r\n                                    <div className=\"flex items-center gap-4 flex-1\">\r\n                                        <div className=\"flex flex-col items-center gap-1 min-w-15\">\r\n                                            <img src={getAvatarUrl(item.fromName)} className=\"w-10 h-10 rounded-full bg-gray-100 object-cover\" />\r\n                                            <span className=\"text-xs font-bold text-gray-600 truncate max-w-20\">{item.fromName}</span>\r\n                                        </div>\r\n                                        \r\n                                        <div className=\"flex-1 flex flex-col items-center\">\r\n                                            <span className=\"text-[10px] text-gray-400 font-bold uppercase mb-1\">PAYS</span>\r\n                                            <div className=\"w-full h-px bg-gray-200 relative\">\r\n                                                <div className=\"absolute right-0 top-1/2 -translate-y-1/2\">\r\n                                                    <ArrowRight className=\"w-4 h-4 text-gray-300\" />\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"flex flex-col items-center gap-1 min-w-15\">\r\n                                            <img src={getAvatarUrl(item.toName)} className=\"w-10 h-10 rounded-full bg-gray-100 object-cover\" />\r\n                                            <span className=\"text-xs font-bold text-gray-600 truncate max-w-20\">{item.toName}</span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Amount */}\r\n                                    <div className=\"ml-6 text-right\">\r\n                                        <span className=\"block font-bold text-lg text-ui-black\">\r\n                                            {formatCurrency(item.amount)}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                        <p className=\"text-xs text-gray-400 text-center mt-4\">Calculated to minimize total transactions.</p>\r\n                    </div>\r\n                ) : (\r\n                    // --- DETAILS LIST ---\r\n                    <div className=\"max-w-lg mx-auto flex flex-col gap-4\">\r\n                        {summaryData.consumptionDetails.map((detail, idx) => (\r\n                            <ConsumptionCard key={idx} detail={detail} />\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n            </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Sub-component for Consumption Details\r\nconst ConsumptionCard = ({ detail }: { detail: any }) => {\r\n    const [expanded, setExpanded] = useState(false);\r\n\r\n    return (\r\n        <div \r\n            onClick={() => setExpanded(!expanded)}\r\n            className=\"bg-white border border-gray-100 rounded-2xl p-4 cursor-pointer hover:border-ui-accent-yellow/50 transition-all shadow-sm\"\r\n        >\r\n            <div className=\"flex justify-between items-center\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <img src={getAvatarUrl(detail.userName)} className=\"w-10 h-10 rounded-full bg-gray-100 object-cover\" />\r\n                    <div>\r\n                        <h4 className=\"font-bold text-sm text-ui-black\">{detail.userName}</h4>\r\n                        <p className=\"text-xs text-gray-400\">{detail.items.length} items consumed</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                    <span className=\"font-bold text-ui-black\">{formatCurrency(detail.totalConsumption)}</span>\r\n                    {expanded ? <ChevronUp className=\"w-4 h-4 text-gray-400\" /> : <ChevronDown className=\"w-4 h-4 text-gray-400\" />}\r\n                </div>\r\n            </div>\r\n\r\n            {expanded && (\r\n                <div className=\"mt-4 pt-4 border-t border-gray-50 flex flex-col gap-2 animate-in slide-in-from-top-2\">\r\n                    {detail.items.map((item: any, i: number) => (\r\n                        <div key={i} className=\"flex justify-between items-center text-xs\">\r\n                            <span className=\"text-gray-600\">{item.itemName}</span>\r\n                            <span className=\"text-gray-400\">{formatCurrency(item.splitAmount)}</span>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\forms\\ActivityForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\forms\\EventForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\layout\\MainLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\layout\\MobileLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\screens\\ContactsPage.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_updateId' is assigned a value but never used.","line":131,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":131,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_newId' is assigned a value but never used.","line":138,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":138,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\screens\\HomeScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRef' is defined but never used.","line":3,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":57,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useRef"},"fix":{"range":[65,73],"text":""},"desc":"Remove unused variable \"useRef\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[424,427],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[424,427],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'navIndex' is assigned a value but never used.","line":14,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setNavIndex' is assigned a value but never used.","line":14,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport SearchBar from \"@/components/ui/SearchBar\";\r\nimport EventCard from \"@/components/ui/EventCard\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/lib/useAuth\";\r\nimport { getEventsWithActivities } from \"@/lib/firestore\";\r\n\r\nexport default function HomeScreen() {\r\n  const [events, setEvents] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [navIndex, setNavIndex] = useState(1);\r\n  const router = useRouter();\r\n  const { userId, loading: authLoading } = useAuth();\r\n\r\n\r\n  // Load Data from Firebase\r\n  const loadData = useCallback(async () => {\r\n    if (authLoading) return;\r\n    if (!userId) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const data = await getEventsWithActivities(userId);\r\n      setEvents(data);\r\n    } catch (error) {\r\n      console.error(\"Error loading events:\", error);\r\n      setEvents([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [userId, authLoading]);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [loadData]);\r\n\r\n\r\n  useEffect(() => {\r\n    const handleFocus = () => {\r\n      if (userId && !authLoading) loadData();\r\n    };\r\n    window.addEventListener(\"focus\", handleFocus);\r\n    return () => window.removeEventListener(\"focus\", handleFocus);\r\n  }, [userId, authLoading, loadData]);\r\n\r\n  const filteredEvents = events.filter((e) =>\r\n    e.title.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    // FIX 1: Gunakan 'h-[100dvh]' biar pas sama layar HP & 'overflow-hidden' biar body gak gerak\r\n    <div className=\"flex flex-col h-dvh w-full bg-ui-accent-yellow relative overflow-hidden\">\r\n      \r\n      {/* HEADER & SEARCH (Area Kuning - Fixed/Tidak ikut scroll) */}\r\n      <div className=\"px-5 py-6 shrink-0 z-10\">\r\n        <SearchBar value={searchQuery} onChange={setSearchQuery} placeholder=\"Search Events...\"/>\r\n      </div>\r\n\r\n      {/* CONTENT AREA (Area Putih) */}\r\n      {/* FIX 2: 'flex-1' buat ngisi sisa layar, 'overflow-hidden' biar anak-nya yang scroll */}\r\n      <div className=\"flex-1 bg-ui-background rounded-t-[30px] w-full flex flex-col relative z-0 shadow-[-5px_-5px_20px_rgba(0,0,0,0.05)] overflow-hidden\">\r\n        \r\n        {/* SCROLLABLE CONTAINER */}\r\n        {/* FIX 3: 'overflow-y-auto' di sini. 'pb-32' biar item terakhir gak ketutup Navbar */}\r\n        <div className=\"flex-1 overflow-y-auto no-scrollbar pt-6 pb-50 px-5\">\r\n          \r\n          {loading ? (\r\n             <div className=\"flex flex-col items-center justify-center h-full animate-pulse\">\r\n               <div className=\"w-10 h-10 border-4 border-ui-accent-yellow border-t-transparent rounded-full animate-spin\"></div>\r\n            </div>\r\n          ) : filteredEvents.length === 0 ? (\r\n             <div className=\"flex flex-col items-center justify-center h-full text-center\">\r\n                <p className=\"text-ui-dark-grey\">No events found.</p>\r\n             </div>\r\n          ) : (\r\n            // LIST ITEM\r\n            <div className=\"flex flex-col gap-4\">\r\n               {/* Label Kecil */}\r\n               <div className=\"flex justify-between items-end px-1\">\r\n                  <p className=\"text-ui-dark-grey text-xs font-bold tracking-widest uppercase\">\r\n                      Events\r\n                  </p>\r\n                  <span className=\"text-[10px] text-ui-dark-grey bg-ui-grey px-2 py-1 rounded-full\">\r\n                    {filteredEvents.length} Items\r\n                  </span>\r\n               </div>\r\n               \r\n               {/* Mapping Data */}\r\n               {filteredEvents.map((event, index) => (\r\n                 // Pake index buat key karena tadi kita duplikat datanya\r\n                 <EventCard \r\n                    key={index} \r\n                    data={event} \r\n                    // 3. UPDATE LOGIC ONCLICK\r\n                    onClick={(id) => {\r\n                        router.push(`/event/${id}`); \r\n                    }} \r\n                />\r\n               ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\screens\\ScanScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":5,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":32,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"X"},"fix":{"range":[147,150],"text":""},"desc":"Remove unused variable \"X\"."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\screens\\ScanScreen.tsx:75:7\n  73 |       startCamera();\n  74 |     } else {\n> 75 |       stopCamera();\n     |       ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  76 |     }\n  77 |\n  78 |     // Cleanup: Stop camera when component unmounts or pathname changes","line":75,"column":7,"nodeType":null,"endLine":75,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport { Camera, AlertCircle, X } from \"lucide-react\";\r\n\r\nexport default function ScanPage() {\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const streamRef = useRef<MediaStream | null>(null);\r\n  const [cameraActive, setCameraActive] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState<string>(\"\");\r\n  const pathname = usePathname();\r\n\r\n  const stopCamera = () => {\r\n    if (streamRef.current) {\r\n      const tracks = streamRef.current.getTracks();\r\n      tracks.forEach((track) => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n    if (videoRef.current) {\r\n      videoRef.current.srcObject = null;\r\n    }\r\n    setCameraActive(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    const startCamera = async () => {\r\n      try {\r\n        // Check if still on scan page before starting\r\n        if (!isMounted || pathname !== \"/scan\") return;\r\n        \r\n        setErrorMessage(\"\");\r\n        setCameraActive(false);\r\n        \r\n        const stream = await navigator.mediaDevices.getUserMedia({\r\n          video: {\r\n            facingMode: \"environment\", // Gunakan kamera belakang (untuk scan)\r\n            width: { ideal: 1280 },\r\n            height: { ideal: 720 },\r\n          },\r\n        });\r\n\r\n        // Double-check: only set stream if still on scan page and component is mounted\r\n        if (isMounted && videoRef.current && pathname === \"/scan\") {\r\n          streamRef.current = stream;\r\n          videoRef.current.srcObject = stream;\r\n        } else {\r\n          // If pathname changed while waiting for getUserMedia, stop the stream\r\n          stream.getTracks().forEach((track) => track.stop());\r\n        }\r\n      } catch (error) {\r\n        if (!isMounted) return;\r\n        \r\n        console.error(\"Error accessing camera:\", error);\r\n        let errorMsg = \"Unable to access camera\";\r\n        \r\n        if (error instanceof DOMException) {\r\n          if (error.name === \"NotAllowedError\") {\r\n            errorMsg = \"Camera permission denied. Please allow camera access.\";\r\n          } else if (error.name === \"NotFoundError\") {\r\n            errorMsg = \"No camera device found.\";\r\n          }\r\n        }\r\n        setErrorMessage(errorMsg);\r\n        setCameraActive(false);\r\n      }\r\n    };\r\n\r\n    // Only start camera if on scan page\r\n    if (pathname === \"/scan/camera\") {\r\n      startCamera();\r\n    } else {\r\n      stopCamera();\r\n    }\r\n\r\n    // Cleanup: Stop camera when component unmounts or pathname changes\r\n    return () => {\r\n      isMounted = false;\r\n      stopCamera();\r\n    };\r\n  }, [pathname]);\r\n\r\n  const capturePhoto = () => {\r\n    if (videoRef.current && canvasRef.current) {\r\n      const context = canvasRef.current.getContext(\"2d\");\r\n      if (context) {\r\n        canvasRef.current.width = videoRef.current.videoWidth;\r\n        canvasRef.current.height = videoRef.current.videoHeight;\r\n        context.drawImage(videoRef.current, 0, 0);\r\n        \r\n        // Download the image atau proses lebih lanjut\r\n        const link = document.createElement(\"a\");\r\n        link.href = canvasRef.current.toDataURL(\"image/jpeg\");\r\n        link.download = `receipt-${Date.now()}.jpg`;\r\n        link.click();\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full w-full bg-black relative\">\r\n      {/* Video Camera Stream - Always render */}\r\n      <div className=\"flex-1 relative flex items-center justify-center overflow-hidden\">\r\n        <video\r\n          ref={videoRef}\r\n          autoPlay\r\n          playsInline\r\n          muted\r\n          onLoadedMetadata={() => setCameraActive(true)}\r\n          className=\"w-full h-full object-cover\"\r\n        />\r\n        \r\n        {/* Scanner Overlay - Only show when camera is active */}\r\n        {cameraActive && (\r\n          <>\r\n            <div className=\"absolute inset-0 flex items-center justify-center\">\r\n              <div className=\"relative w-64 h-64 border-2 border-ui-accent-yellow rounded-3xl\">\r\n                {/* Top Left Corner */}\r\n                <div className=\"absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 border-ui-accent-yellow\"></div>\r\n                {/* Top Right Corner */}\r\n                <div className=\"absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 border-ui-accent-yellow\"></div>\r\n                {/* Bottom Left Corner */}\r\n                <div className=\"absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 border-ui-accent-yellow\"></div>\r\n                {/* Bottom Right Corner */}\r\n                <div className=\"absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 border-ui-accent-yellow\"></div>\r\n                \r\n                {/* Animated Scanning Line */}\r\n                <div className=\"absolute top-0 left-0 right-0 h-1 bg-ui-accent-yellow animate-[bounce_2s_infinite]\" />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Dark Overlay untuk area di luar scanner */}\r\n            <div className=\"absolute inset-0 pointer-events-none\">\r\n              <div className=\"absolute inset-0 bg-black/40\"></div>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {/* Placeholder - Show while loading */}\r\n        {!cameraActive && !errorMessage && (\r\n          <div className=\"absolute inset-0 flex flex-col items-center justify-center p-10 text-white space-y-4 bg-black\">\r\n            <Camera className=\"w-16 h-16 text-white/50 animate-pulse\" />\r\n            <p className=\"text-sm font-medium text-center text-white/70\">\r\n              Opening camera...\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Error State - Show if there's an error */}\r\n        {errorMessage && (\r\n          <div className=\"absolute inset-0 flex flex-col items-center justify-center p-10 text-white space-y-4 bg-black\">\r\n            <AlertCircle className=\"w-16 h-16 text-red-400\" />\r\n            <p className=\"text-sm font-medium text-center text-white\">{errorMessage}</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Control Bottom Bar */}\r\n      <div className=\"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-black via-black/80 to-transparent flex flex-col items-center justify-center z-10 space-y-4\">\r\n        {cameraActive && (\r\n          <>\r\n            <button\r\n              onClick={capturePhoto}\r\n              className=\"w-16 h-16 rounded-full bg-ui-accent-yellow hover:bg-yellow-500 transition-colors shadow-lg flex items-center justify-center\"\r\n              title=\"Capture photo\"\r\n            >\r\n              <Camera className=\"w-8 h-8 text-black\" />\r\n            </button>\r\n            <p className=\"text-xs text-white/60\">Tap to capture</p>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {/* Hidden Canvas untuk capture */}\r\n      <canvas ref={canvasRef} className=\"hidden\" />\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\ui\\ActivityItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\ui\\AvatarStack.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":52,"column":13,"nodeType":"JSXOpeningElement","endLine":61,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\n\r\ninterface AvatarStackProps {\r\n  avatars: (string | null | undefined)[]; // Update tipe biar lebih aman\r\n  size?: number;\r\n  overlap?: number;\r\n  limit?: number;\r\n  className?: string;\r\n}\r\n\r\nexport default function AvatarStack({\r\n  avatars = [],\r\n  size = 28,\r\n  overlap = -10,\r\n  limit = 3,\r\n  className = \"\",\r\n}: AvatarStackProps) {\r\n  \r\n  // Validasi & Cleaning data\r\n  const safeAvatars = avatars || [];\r\n  const visibleAvatars = safeAvatars.slice(0, limit);\r\n  const remainingCount = safeAvatars.length - limit;\r\n\r\n  // Helper buat generate URL Dicebear\r\n  // Kita pake index sebagai seed karena kita ga punya data 'nama' di sini\r\n  const getFallbackAvatar = (seed: string | number) => \r\n    `https://api.dicebear.com/9.x/avataaars/svg?seed=${seed}&backgroundColor=b6e3f4,c0aede,d1d4f9`;\r\n\r\n  if (safeAvatars.length === 0) {\r\n    return null; \r\n  }\r\n\r\n  return (\r\n    <div className={`flex items-center ${className}`}>\r\n      {visibleAvatars.map((src, index) => {\r\n        // Logic 1: Kalau src kosong/null dari awal, langsung pake Dicebear\r\n        const initialSrc = (src && src.trim() !== \"\") \r\n          ? src \r\n          : getFallbackAvatar(index);\r\n\r\n        return (\r\n          <div\r\n            key={index}\r\n            className=\"relative rounded-full border-2 border-ui-white bg-ui-grey shadow-sm overflow-hidden shrink-0\"\r\n            style={{\r\n              width: size,\r\n              height: size,\r\n              marginLeft: index === 0 ? 0 : overlap,\r\n              zIndex: visibleAvatars.length - index,\r\n            }}\r\n          >\r\n            <img \r\n              src={initialSrc} \r\n              alt={`User ${index}`} \r\n              className=\"w-full h-full object-cover\"\r\n              // Logic 2: Kalau gambar gagal di-load (404/corrupt), ganti ke Dicebear\r\n              onError={(e) => {\r\n                e.currentTarget.onerror = null; // Prevent infinite loop\r\n                e.currentTarget.src = getFallbackAvatar(index);\r\n              }}\r\n            />\r\n          </div>\r\n        );\r\n      })}\r\n\r\n      {/* Indikator Sisa (+X) */}\r\n      {remainingCount > 0 && (\r\n        <div\r\n          className=\"relative rounded-full border-2 border-ui-white bg-ui-black text-ui-white flex items-center justify-center shrink-0 shadow-sm\"\r\n          style={{\r\n            width: size,\r\n            height: size,\r\n            marginLeft: overlap,\r\n            fontSize: size * 0.45,\r\n            fontWeight: \"bold\",\r\n            zIndex: 0,\r\n          }}\r\n        >\r\n          +{remainingCount}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\ui\\DeleteConfirmModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\ui\\EventCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Receipt' is defined but never used.","line":4,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":35,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Receipt"},"fix":{"range":[104,113],"text":""},"desc":"Remove unused variable \"Receipt\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[626,629],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[626,629],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[857,860],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[857,860],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":107,"column":11,"nodeType":"JSXOpeningElement","endLine":111,"endColumn":13}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState, useMemo } from \"react\";\r\nimport { MapPin, Calendar, Receipt } from \"lucide-react\";\r\nimport AvatarStack from \"./AvatarStack\";\r\nimport { getContacts, ContactData } from \"@/lib/firebase-contacts\";\r\nimport { useAuth } from \"@/lib/auth-context\";\r\n\r\n// ==================== TYPES ====================\r\n\r\ninterface Participant {\r\n  id: string;\r\n}\r\n\r\ninterface Activity {\r\n  id: string;\r\n  title: string;\r\n  category: string;\r\n  payerName: string;\r\n  total: number;\r\n}\r\n\r\ninterface EventCardProps {\r\n  data: {\r\n    id: string;\r\n    name: string;\r\n    location: string;\r\n    date: any;\r\n    imageUrl?: string;\r\n    participants?: Participant[];\r\n    activities?: Activity[];\r\n  };\r\n  onClick?: (id: string) => void;\r\n}\r\n\r\n// ==================== SAFE DATE ====================\r\n\r\nfunction getSafeDate(dateInput: any): Date {\r\n  if (!dateInput) return new Date();\r\n  if (dateInput instanceof Date) return dateInput;\r\n  if (typeof dateInput?.toDate === \"function\") return dateInput.toDate();\r\n\r\n  if (\r\n    typeof dateInput === \"object\" &&\r\n    \"seconds\" in dateInput &&\r\n    \"nanoseconds\" in dateInput\r\n  ) {\r\n    return new Date(\r\n      dateInput.seconds * 1000 + dateInput.nanoseconds / 1000000\r\n    );\r\n  }\r\n\r\n  const parsed = new Date(dateInput);\r\n  if (!isNaN(parsed.getTime())) return parsed;\r\n\r\n  return new Date();\r\n}\r\n\r\n// ==================== COMPONENT ====================\r\n\r\nexport default function EventCard({ data, onClick }: EventCardProps) {\r\n  const { user } = useAuth();\r\n  const [contacts, setContacts] = useState<ContactData[]>([]);\r\n\r\n  useEffect(() => {\r\n    if (!user?.uid) return;\r\n    getContacts(user.uid).then(setContacts);\r\n  }, [user?.uid]);\r\n\r\n  // Format Date\r\n  const eventDate = getSafeDate(data.date);\r\n  const formattedDate = eventDate.toLocaleDateString(\"en-GB\", {\r\n    day: \"2-digit\",\r\n    month: \"2-digit\",\r\n    year: \"numeric\",\r\n  });\r\n\r\n  // ≡ƒöÑ ALWAYS resolve avatar from contacts\r\n  const participantAvatars = useMemo(() => {\r\n    if (!data.participants?.length) return [];\r\n\r\n    return data.participants\r\n      .map((p) => contacts.find((c) => c.id === p.id))\r\n      .filter(Boolean)\r\n      .map((contact) => {\r\n        if (!contact) return null;\r\n\r\n        // If avatarName is full URL\r\n        if (contact.avatarName?.startsWith(\"http\")) {\r\n          return contact.avatarName;\r\n        }\r\n\r\n        // Stable avatar seed using contact ID\r\n        return `https://api.dicebear.com/7.x/avataaars/svg?seed=${contact.id}`;\r\n      })\r\n      .filter(Boolean) as string[];\r\n  }, [data.participants, contacts]);\r\n\r\n  return (\r\n    <div\r\n      onClick={() => onClick?.(data.id)}\r\n      className=\"relative group w-full bg-ui-white rounded-3xl shadow-xl border border-ui-grey/40 flex flex-col transition-all active:scale-[0.99] active:bg-gray-50 cursor-pointer overflow-hidden hover:shadow-md\"\r\n    >\r\n      {/* IMAGE */}\r\n      {data.imageUrl && (\r\n        <div className=\"w-full aspect-video relative overflow-hidden\">\r\n          <img\r\n            src={data.imageUrl}\r\n            alt={data.name}\r\n            className=\"w-full h-full object-cover\"\r\n          />\r\n          <div className=\"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent\" />\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"p-5 flex flex-col gap-4\">\r\n        {/* HEADER */}\r\n        <div className=\"flex justify-between items-start gap-3\">\r\n          <h3 className=\"font-bold text-ui-black text-[19px] leading-snug flex-1\">\r\n            {data.name}\r\n          </h3>\r\n\r\n          {participantAvatars.length > 0 && (\r\n            <AvatarStack\r\n              avatars={participantAvatars}\r\n              size={32}\r\n              overlap={-10}\r\n              limit={3}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* LOCATION & DATE */}\r\n        <div className=\"flex flex-col gap-1.5\">\r\n          <div className=\"flex items-center gap-2 text-ui-dark-grey\">\r\n            <MapPin className=\"w-4 h-4 shrink-0 text-ui-accent-yellow\" />\r\n            <span className=\"text-sm font-medium truncate\">\r\n              {data.location || \"No location set\"}\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2 text-ui-dark-grey\">\r\n            <Calendar className=\"w-4 h-4 shrink-0 text-ui-accent-yellow\" />\r\n            <span className=\"text-sm font-medium\">{formattedDate}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\ui\\EventHeaderCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[881,884],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[881,884],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":43,"column":11,"nodeType":"JSXOpeningElement","endLine":47,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1142,1145],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1142,1145],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { \r\n  ArrowLeft, \r\n  Edit2, \r\n  Trash2, \r\n  MapPin, \r\n  Calendar, \r\n  ShoppingCart,\r\n  LucideIcon // Import tipe LucideIcon buat InfoChip\r\n} from \"lucide-react\";\r\nimport AvatarStack from \"@/components/ui/AvatarStack\";\r\nimport { Event } from \"@/lib/dummy-data\"; \r\n\r\ninterface EventHeaderCardProps {\r\n  event: Event;\r\n  onBackClick: () => void;\r\n  onEditClick: () => void;\r\n  onDeleteClick: () => void;\r\n}\r\n\r\n// Tambahkan ': React.JSX.Element' di sini\r\nexport default function EventHeaderCard({\r\n  event,\r\n  onBackClick,\r\n  onEditClick,\r\n  onDeleteClick\r\n}: EventHeaderCardProps): React.JSX.Element {\r\n\r\n  // PREVENT ERROR: Mapping dulu dari Object -> String[] buat AvatarStack\r\n  const participantAvatars = event.participants?.map((p) => p.avatarName) || [];\r\n\r\n  // Check if event has an imageUrl\r\n  const hasImage = !!(event as any).imageUrl;\r\n\r\n  return (\r\n    <div className=\"relative w-full h-60 rounded-3xl overflow-hidden shadow-sm shrink-0\">\r\n      \r\n      {/* --- 1. BACKGROUND (Image or Yellow) --- */}\r\n      {hasImage ? (\r\n        <>\r\n          <img \r\n            src={(event as any).imageUrl} \r\n            alt={event.title} \r\n            className=\"absolute inset-0 w-full h-full object-cover z-0\"\r\n          />\r\n          <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-black/10 z-0\" />\r\n        </>\r\n      ) : (\r\n        <>\r\n          <div className=\"absolute inset-0 bg-ui-accent-yellow z-0\" />\r\n          <ShoppingCart \r\n            className=\"absolute -bottom-6 -right-6 w-48 h-48 text-white/20 rotate-[-10deg] z-0 pointer-events-none\" \r\n            strokeWidth={1.5}\r\n          />\r\n        </>\r\n      )}\r\n\r\n      {/* --- 2. TOP BAR (Buttons) --- */}\r\n      <div className=\"relative z-10 flex justify-between items-center p-5\">\r\n        <CircleButton onClick={onBackClick}>\r\n          <ArrowLeft className=\"w-5 h-5 text-ui-black\" />\r\n        </CircleButton>\r\n\r\n        <div className=\"flex gap-2\">\r\n          <CircleButton onClick={onEditClick}>\r\n            <Edit2 className=\"w-4 h-4 text-ui-black\" />\r\n          </CircleButton>\r\n          <CircleButton onClick={onDeleteClick}>\r\n            <Trash2 className=\"w-4 h-4 text-ui-accent-red\" />\r\n          </CircleButton>\r\n        </div>\r\n      </div>\r\n\r\n      {/* --- 3. MAIN CONTENT (Bottom) --- */}\r\n      <div className=\"absolute bottom-0 left-0 w-full p-5 z-10 flex flex-col items-start\">\r\n        \r\n        {/* Title Besar */}\r\n        <h1 className={`text-2xl font-bold font-display leading-tight mb-3 line-clamp-2 drop-shadow-sm ${hasImage ? 'text-white' : 'text-ui-black'}`}>\r\n          {event.title}\r\n        </h1>\r\n\r\n        {/* Chips Row (Location & Date) */}\r\n        <div className=\"flex flex-wrap gap-2 mb-4\">\r\n          <InfoChip icon={MapPin} text={event.location} />\r\n          <InfoChip icon={Calendar} text={event.date} />\r\n        </div>\r\n\r\n        {/* Avatar Stack */}\r\n        <div className=\"pl-1\">\r\n             <AvatarStack \r\n                avatars={participantAvatars} \r\n                size={32} \r\n                limit={4}\r\n                overlap={-10}\r\n            />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// --- SUB COMPONENTS ---\r\n\r\n// Tambahkan ': React.JSX.Element' di sini\r\nfunction CircleButton({ \r\n  children, \r\n  onClick \r\n}: { \r\n  children: React.ReactNode; \r\n  onClick: () => void; \r\n}): React.JSX.Element {\r\n  return (\r\n    <button \r\n      onClick={onClick}\r\n      className=\"w-10 h-10 rounded-full bg-ui-white/90 backdrop-blur-sm flex items-center justify-center shadow-sm hover:scale-105 active:scale-90 transition-transform\"\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\n// Tambahkan ': React.JSX.Element' di sini juga\r\nfunction InfoChip({ \r\n  icon: Icon, \r\n  text \r\n}: { \r\n  icon: LucideIcon; \r\n  text: string; \r\n}): React.JSX.Element {\r\n  return (\r\n    <div className=\"bg-ui-white/90 backdrop-blur-md rounded-xl px-3 py-1.5 flex items-center gap-1.5 shadow-sm\">\r\n      <Icon className=\"w-3.5 h-3.5 text-ui-dark-grey\" />\r\n      <span className=\"text-xs font-bold text-ui-black font-display tracking-wide\">\r\n        {text}\r\n      </span>\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\ui\\FABAdd.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\ui\\FloatingNavbar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ScanLine' is defined but never used.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ScanLine"},"fix":{"range":[109,118],"text":""},"desc":"Remove unused variable \"ScanLine\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":5,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":25,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Users"},"fix":{"range":[100,147],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Plus, Home, Contacts, Scan } from \"./Icons\";\r\nimport { ScanLine, Users } from \"lucide-react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\ninterface FloatingNavbarProps {\r\n  selectedIndex: number; // 0, 1, or 2\r\n  onItemSelected: (index: number) => void;\r\n  onAddClick?: () => void;\r\n  onContactsClick?: () => void;\r\n  onHomeClick?: () => void;\r\n  onScanClick?: () => void;\r\n}\r\n\r\nexport default function FloatingNavbar({\r\n  selectedIndex = 1,\r\n  onItemSelected,\r\n  onAddClick,\r\n  onContactsClick,\r\n  onHomeClick,\r\n  onScanClick,\r\n}: FloatingNavbarProps) {\r\n  \r\n  // Posisi X untuk indicator putih (sesuai offset dp di Kotlin: 12, 83, 154)\r\n  // Kita asumsikan 1dp Γëê 1px untuk styling ini, atau disesuaikan skalanya.\r\n  const indicatorPositions = [12, 83, 154];\r\n\r\n  // Logic Icon Tengah: Kalau selectedIndex == 1 (Home), jadi tombol Add.\r\n  const isHomeActive = selectedIndex === 1;\r\n\r\n  return (\r\n    // Container Luar (Posisi Fixed di layar bawah)\r\n    <div className=\"fixed bottom-8 left-0 right-0 flex justify-center z-50 pointer-events-none\">\r\n      \r\n      {/* Navbar Body (Pointer events auto biar bisa diklik) */}\r\n      <div className=\"pointer-events-auto w-56.25 h-18.75 bg-ui-accent-yellow rounded-full shadow-xl relative flex items-center\">\r\n        \r\n        {/* --- 1. ANIMATED INDICATOR (Background Putih) --- */}\r\n        <motion.div\r\n          initial={false}\r\n          animate={{ x: indicatorPositions[selectedIndex] }}\r\n          transition={{\r\n            type: \"spring\",\r\n            stiffness: 400, // StiffnessLow\r\n            damping: 25,    // LowBouncy\r\n          }}\r\n          className=\"absolute top-2 left-0 w-14.75 h-14.75 bg-ui-white rounded-full shadow-sm z-0\"\r\n        />\r\n\r\n        {/* --- 2. ICON BUTTONS ROW --- */}\r\n        <div className=\"w-full h-full flex justify-evenly items-center z-10\">\r\n          \r\n          {/* BUTTON 1: SCAN (Index 0) */}\r\n          <NavIconButton\r\n            icon={<Scan className=\"w-6 h-6\" />}\r\n            isSelected={selectedIndex === 0}\r\n            onClick={() => {\r\n              onItemSelected(0);\r\n              onScanClick?.();\r\n            }}\r\n          />\r\n\r\n          {/* BUTTON 2: HOME / ADD (Index 1) */}\r\n          <NavIconButton\r\n            icon={\r\n              isHomeActive ? (\r\n                <Plus className=\"w-8 h-8 text-ui-black\" />\r\n              ) : (\r\n                <Home className=\"w-6 h-6 text-ui-black\" />\r\n              )\r\n            }\r\n            isSelected={selectedIndex === 1}\r\n            onClick={() => {\r\n              if (isHomeActive) {\r\n                // Kalau sudah di Home, tombol ini jadi \"Add Event\"\r\n                onAddClick?.();\r\n              } else {\r\n                // Kalau dari menu lain, balik ke Home\r\n                onItemSelected(1);\r\n                onHomeClick?.();\r\n              }\r\n            }}\r\n          />\r\n\r\n          {/* BUTTON 3: CONTACTS (Index 2) */}\r\n          <NavIconButton\r\n            icon={<Contacts className=\"w-6 h-6\" />}\r\n            isSelected={selectedIndex === 2}\r\n            onClick={() => {\r\n              onItemSelected(2);\r\n              onContactsClick?.();\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// --- SUB-COMPONENT: Nav Button ---\r\nfunction NavIconButton({\r\n  icon,\r\n  isSelected,\r\n  onClick,\r\n}: {\r\n  icon: React.ReactNode;\r\n  isSelected: boolean;\r\n  onClick: () => void;\r\n}) {\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      className={`w-14.75 h-14.75 rounded-full flex items-center justify-center transition-transform active:scale-90 outline-none\r\n        ${isSelected ? \"text-ui-black\" : \"text-ui-black/60 hover:text-ui-black\"}\r\n      `}\r\n    >\r\n      {icon}\r\n    </button>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\ui\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\ui\\Icons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\ui\\SearchBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\ui\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\ui\\SidebarDesktop.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronDown' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronDown"},"fix":{"range":[265,282],"text":""},"desc":"Remove unused variable \"ChevronDown\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronUp' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":12,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronUp"},"fix":{"range":[282,297],"text":""},"desc":"Remove unused variable \"ChevronUp\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Plus' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":7,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Plus"},"fix":{"range":[349,384],"text":""},"desc":"Remove unused variable \"Plus\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'expandAccount' is assigned a value but never used.","line":25,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setExpandAccount' is assigned a value but never used.","line":25,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":41},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":174,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6825,6828],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6825,6828],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\nimport { logout } from \"@/lib/firebase-auth\";\r\nimport { \r\n  LayoutDashboard, \r\n  User, \r\n  Settings, \r\n  Flag, \r\n  Info, \r\n  HelpCircle, \r\n  LogOut, \r\n  ChevronDown, \r\n  ChevronUp,\r\n  Users,       // Icon untuk Contacts\r\n  ScanLine,    // Icon untuk Scan/New\r\n  Plus         // Icon alternatif untuk New Event\r\n} from \"lucide-react\";\r\nimport { LucaLogo } from \"./Icons\";\r\n\r\nexport default function SidebarDesktop() {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const [expandAccount, setExpandAccount] = useState(false);\r\n  const [showLogoutDialog, setShowLogoutDialog] = useState(false);\r\n\r\n  const isActive = (path: string) => pathname === path;\r\n\r\n  const handleLogout = async () => {\r\n    document.cookie = \"luca_session=; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 GMT\";\r\n    await logout();\r\n    setShowLogoutDialog(false);\r\n    router.replace(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-64 h-screen bg-white border-r border-gray-100 flex flex-col sticky top-0 left-0 overflow-y-auto\">\r\n      \r\n      {/* HEADER LOGO */}\r\n      <div className=\"p-6 flex items-center gap-3\">\r\n         <div className=\"w-8 h-8 cursor-pointer\" onClick={() => router.push(\"/home\")}>\r\n            <LucaLogo className=\"w-full h-full\" />\r\n         </div>\r\n         <span className=\"text-xl font-bold font-display text-ui-black cursor-pointer\" onClick={() => router.push(\"/home\")}>\r\n            Luca\r\n         </span>\r\n      </div>\r\n\r\n      {/* --- BAGIAN BARU: CTA BUTTON (Pengganti tombol Scan tengah di Mobile) --- */}\r\n      <div className=\"px-4 mb-6\">\r\n        <button \r\n            onClick={() => router.push(\"/scan\")} // Atau ke /new-event langsung\r\n            className=\"w-full py-3 bg-ui-accent-yellow rounded-xl flex items-center justify-center gap-2 shadow-sm hover:shadow-md transition-all active:scale-[0.98]\"\r\n        >\r\n            <ScanLine className=\"w-5 h-5 text-ui-black\" strokeWidth={2.5} />\r\n            {/* Kalau di desktop mungkin lebih cocok \"New Event\" daripada Scan, tapi biar konsisten fungsinya kita arahin sama */}\r\n            <span className=\"font-bold text-ui-black\">Scan</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* MENU LIST */}\r\n      <div className=\"flex-1 px-4 flex flex-col gap-1\">\r\n         \r\n         <NavItem \r\n            icon={<LayoutDashboard className=\"w-5 h-5\" />} \r\n            text=\"Dashboard\" \r\n            active={isActive(\"/home\")}\r\n            onClick={() => router.push(\"/home\")} \r\n         />\r\n\r\n         {/* --- BAGIAN BARU: CONTACTS (Dari Navbar Mobile) --- */}\r\n         <NavItem \r\n            icon={<Users className=\"w-5 h-5\" />} \r\n            text=\"Contacts\" \r\n            active={isActive(\"/contacts\")}\r\n            onClick={() => router.push(\"/contacts\")} \r\n         />\r\n\r\n         {/* --- ACCOUNT SECTION --- */}\r\n         <div className=\"flex flex-col mt-4 pt-4 border-t border-gray-50\">\r\n            <p className=\"px-3 text-xs font-bold text-gray-400 mb-2 uppercase\">Account</p>\r\n            \r\n            <NavItem \r\n                icon={<User className=\"w-5 h-5\" />} \r\n                text=\"Account Settings\" \r\n                active={isActive(\"/account/settings\")}\r\n                onClick={() => router.push(\"/account/settings\")} \r\n            />\r\n            \r\n            {/* Sisanya sama kayak sebelumnya... */}\r\n            <NavItem \r\n                icon={<Settings className=\"w-5 h-5\" />} \r\n                text=\"Preferences\" \r\n                active={isActive(\"/settings\")}\r\n                onClick={() => router.push(\"/settings\")} \r\n            />\r\n         </div>\r\n\r\n         {/* --- APP INFO SECTION --- */}\r\n         <div className=\"flex flex-col mt-4 pt-4 border-t border-gray-50\">\r\n            <p className=\"px-3 text-xs font-bold text-gray-400 mb-2 uppercase\">App Info</p>\r\n            <NavItem \r\n                icon={<Flag className=\"w-5 h-5\" />} \r\n                text=\"Report Bugs\" \r\n                active={isActive(\"/report-bug\")}\r\n                onClick={() => router.push(\"/report-bug\")} \r\n            />\r\n            <NavItem \r\n                icon={<Info className=\"w-5 h-5\" />} \r\n                text=\"About Us\" \r\n                active={isActive(\"/about-us\")}\r\n                onClick={() => router.push(\"/about-us\")} \r\n            />\r\n         </div>\r\n      </div>\r\n\r\n      {/* FOOTER */}\r\n      <div className=\"p-4 border-t border-gray-100 mt-auto bg-gray-50/50\">\r\n         <NavItem \r\n            icon={<HelpCircle className=\"w-5 h-5\" />} \r\n            text=\"Help & Support\" \r\n            active={isActive(\"/help-support\")}\r\n            onClick={() => router.push(\"/help-support\")} \r\n         />\r\n         <div \r\n            className=\"mt-2 w-full flex items-center px-3 py-3 rounded-xl transition-all text-sm font-bold text-red-500 hover:bg-red-50 cursor-pointer\" \r\n            onClick={() => setShowLogoutDialog(true)}\r\n         >\r\n            <LogOut className=\"w-5 h-5\" />\r\n            <span className=\"ml-3\">Logout</span>\r\n         </div>\r\n      </div>\r\n\r\n      {/* LOGOUT CONFIRMATION DIALOG */}\r\n      {showLogoutDialog && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n          <div \r\n            className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\r\n            onClick={() => setShowLogoutDialog(false)}\r\n          />\r\n          <div className=\"bg-white w-full max-w-sm rounded-3xl p-6 relative z-10 shadow-2xl\">\r\n            <div className=\"flex justify-center mb-4\">\r\n              <div className=\"w-18 h-18 rounded-full bg-red-50 flex items-center justify-center p-4\">\r\n                <LogOut className=\"w-8 h-8 text-red-500 ml-1\" />\r\n              </div>\r\n            </div>\r\n            <h2 className=\"text-xl font-bold text-ui-black text-center mb-2\">Log Out?</h2>\r\n            <p className=\"text-sm text-gray-500 text-center leading-relaxed mb-6\">\r\n              You will need to sign in again to access your account.\r\n            </p>\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => setShowLogoutDialog(false)}\r\n                className=\"flex-1 h-12 rounded-full bg-gray-100 text-ui-black font-semibold text-sm hover:bg-gray-200 transition-colors\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"flex-1 h-12 rounded-full bg-red-500 text-white font-bold text-sm hover:bg-red-600 transition-all shadow-md active:scale-95\"\r\n              >\r\n                Log Out\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Komponen NavItem (Biar rapi)\r\nfunction NavItem({ icon, text, onClick, active }: any) {\r\n    return (\r\n        <button \r\n            onClick={onClick}\r\n            className={`w-full flex items-center px-3 py-2.5 rounded-xl transition-all text-sm font-bold mb-0.5 ${\r\n                active \r\n                ? \"bg-ui-accent-yellow/20 text-ui-black shadow-none border border-ui-accent-yellow/50\" \r\n                : \"text-gray-500 hover:bg-gray-100 hover:text-ui-black border border-transparent\"\r\n            }`}\r\n        >\r\n            <div className={active ? \"text-ui-black\" : \"text-gray-400\"}>{icon}</div>\r\n            <span className=\"ml-3\">{text}</span>\r\n        </button>\r\n    )\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\components\\ui\\Toggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\lib\\auth-context.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\lib\\dummy-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\lib\\firebase-auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\lib\\firebase-contacts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\lib\\firebase-db.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\lib\\firebase-storage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\lib\\firebase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\lib\\firestore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\lib\\otp-emailjs.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\lib\\settlement-logic.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\lib\\splitCalculations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\lib\\useAuth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\lib\\validate-env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\lib\\validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\PPTI\\Cawu 4\\Cawu 4 Gwe\\Machine Learning\\Splitify\\luca-shared-expense-web\\src\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
